(self["webpackChunk_canva_web"] = self["webpackChunk_canva_web"] || []).push([[5532],{

/***/ 788671:
function(_, __, __webpack_require__) {__webpack_require__.n_x = __webpack_require__.n;const __web_req__ = __webpack_require__;__web_req__(905716);__web_req__(702912);__web_req__(577081);self._456c437108d2d2713799e19380be528d = self._456c437108d2d2713799e19380be528d || {};(function(__c) {var Js;var Es;var Cs;var ys;var Mo=__c.Mo;var Ho=__c.Ho;var Lo=__c.Lo;var cs;var Zo=__c.Zo;var jq;var hq;var wq;var Lq;var ns;var z=__c.z;var bq;var nq;var os;var cq;var qq;var Yp;var aq;var bs;var as;var Yr;var Xr;var Wr;var ep=__c.ep;var u=__c.u;var A=__c.A;var Ja=__c.Ja;var t=__c.t;var w=__c.w;var Qh=__c.Qh;var E=__c.E;var Kq;var Sr;var Hq;var Rr;var zq;var yq;var Pr;var Or;var Nr;var rq;var jr;var Ir;var Hr;var Co=__c.Co;var M=__c.M;var kq;var qr;var Vp;var Ar;var zr;var Br;var xr;var Cr;var Zp;
var vr;var ur;var tr;var zp;var sr;var rr;var pr;var or;var yp;var nr;var xp;var ba=__c.ba;var mr;var ca=__c.ca;var Tg=__c.Tg;var Xq;var Yq;var Wq;var Vq;var Uq;var Tq;var Sq;var Rq;var Oq;var Mq;var Tp;var gq;var Bo=__c.Bo;var Eq;var Dq;var Aq;var tq;var pq;var mq;var Cp;var Ap;var fq;var iq;var Sp;var eq;var Xp;var $p;var Mp;var l=__c.l;var r=__c.r;var ka=__c.ka;var wp;var ia=__c.ia;
var Rkb,Skb,Tkb,vp,Ukb,Vkb,Wkb,Xkb,$kb,dlb,flb,Dp,ilb,klb,Ep,Fp,nlb,llb,mlb,plb,qlb,Gp,ulb,vlb,wlb,xlb,ylb,zlb,Alb,Hp,Ip,Jp,Blb,Kp,Dlb,Np,Op,Pp,Ilb,Klb,Up,Nlb,Qlb,Ulb,Slb,Tlb,Vlb,Wlb,hmb,dq,lmb,pmb,rmb,oq,vmb,wmb,xmb,ymb,Dmb,Emb,Gmb,Hmb,Jmb,Lmb,Mmb,Omb,Qmb,Rmb,Umb,Vmb,Wmb,Xmb,Ymb,Jq,$mb,anb,dnb,enb,fnb,gnb,hnb,Nq,inb,Pq,knb,lnb,Qq,onb,qnb,pnb,rnb,tnb,vnb,xnb,nnb,ynb,znb,Anb,Bnb,Cnb,Enb,Dnb,Fnb,Hnb,Inb,Jnb,Mnb,Knb,Lnb,Pnb,Rnb,Onb,Qnb,Snb,Tnb,Nnb,Unb,Vnb,Ynb,cr,aob,bob,cob,dr,dob,eob,fob,gob,kob,lob,
hr,mob,nob,oob,pob,ir,qob,rob,sob,tob,kr,uob;__c.Pkb=function(a,b,c){return a.attributes[c].myd?b[c]:b[c]!==a.attributes[c].defaultValue?b[c]:void 0};__c.Qkb=function(a,b,c){const d={};__c.Go(a,b,"all",(e,f)=>d[f]=c(e,f));return d};__c.sp=function(a,b){const c={};for(const [d,e]of Object.entries(b))try{ia(a.Rt(d)),c[d]=e!=null?a.attributes[d].normalize(e):void 0}catch(f){throw f;}return c};__c.up=function(a){const b=new WeakMap;return(c,...d)=>{ia(d.length===0);b.has(c)||b.set(c,a(c));return b.get(c)}};
Rkb=function(a,b){const c=new Map;for(const [d,e]of a){const [f,g]=b(d,e);c.set(f,g)}return c};Skb=function(a){return new RegExp(`^${a}${"B"}${"[0-9b-df-hj-np-tv-zB-DF-HJ-NP-TV-Z]"}{14}$`)};
Tkb=function(a,b){ia(b.length>0);switch(b.length){case 1:return b[0];case 2:return a.compose(b[0],b[1]);case 3:return a.compose(a.compose(b[0],b[1]),b[2]);case 4:return a.compose(a.compose(b[0],b[1]),a.compose(b[2],b[3]));default:const c=b.slice();for(b=b.length;b>1;){let d=0;for(let e=0;e<b;e+=2)c[d++]=e+1<b?a.compose(c[e],c[e+1]):c[e];b=d}return c[0]}};vp=function(a,b,c){ia(a.Hi(b,c),"{} != {}",b,c)};Ukb=function(a,b){return new wp(b(a.ru),b(a.$u),a.RBa,a.CIa)};
xp=__c.xp=function(a,b){return new wp(a,b,!1,!1)};yp=__c.yp=function(a){return new wp(void 0,a,!0,!1)};zp=__c.zp=function(a,b){a.RBa||(a.RBa=b.RBa);a.CIa||(a.CIa=b.CIa);return b};Vkb=function(a,b=!0){a.RBa||(a.RBa=b)};Wkb=function(a,b=!0){a.CIa||(a.CIa=b)};Xkb=function(a,b){if(a.clients){for(const c of a.clients.keys())try{c.error(b)}catch(d){}a.clients=void 0}};Ap=__c.Ap=function(a,b){a.$vc||(a.$vc=new Ykb(a,a.Zbf,a.error));return new __c.Zkb(a.$vc,b)};
$kb=function(a,b){ka(a.DL!=null);if(a.clients){var c=!1;for(const d of a.clients.keys())try{d.next(b)}catch(e){try{d.error(`could not publish to incoming: ${e}`)}catch(f){}a.clients.delete(d);c=!0}c&&!a.clients.size&&(a.clients=void 0)}};__c.Bp=function(a,b,c,d){a=b.bx(a,c);b=b.connect(a,d);return{mutable:a,lG:b}};
Cp=__c.Cp=function(a,b,c,d,e){const f=e?.Eud||"eager";switch(f){case "eager":return new alb(a,a.metrics?.Qog,b,c,d);case "lazy":return new blb(a,b,c,d);case "transient":return new clb(a,b,c,d,e?.t1c);default:throw new r(f);}};dlb=function(a){a.Hvb?.reportChanged();a.Hvb=void 0};flb=function(a,b){return b.mutable==null||typeof b.mutable!=="object"?new elb(b):a.t1c.WeakRef!=null?new a.t1c.WeakRef(b):new elb(b)};Dp=function(a){return a===1?glb:{type:0,length:a}};
ilb=function(a){return a===1?hlb:{type:1,length:a}};klb=function(a){return a===1?jlb:{type:2,length:a}};Ep=function(a,b){return{type:3,state:a,shift:b}};Fp=function(a,b){return{type:4,delta:a,shift:b}};nlb=function(a){switch(a.type){case 0:return`R(${a.length})`;case 1:return`X(${a.length})`;case 2:return`T(${a.length})`;case 3:return`I(${llb(a.state)})${mlb(a.shift)}`;case 4:return`U(${llb(a.delta)})${mlb(a.shift)}`;default:throw new r(a);}};llb=function(a){return a!=null?a:"\u22a5"};
mlb=function(a){return a!=null?`[${a.Df},${a.om}]`:""};plb=function(a,b){return b&&a.NWa?new olb(a.ops.map(c=>c.type===3&&c.shift?Ep(c.state,{Df:c.shift.Df+b,om:c.shift.om+b}):c.type===4&&c.shift?Fp(c.delta,{Df:c.shift.Df+b,om:c.shift.om+b}):c),a.pre,a.post,a.NWa):a};qlb=function(a,b){ia(b.length>0);const c=a.length;b.forEach((d,e)=>a.list[c+e]=d);a.length+=b.length};
Gp=function(a,b){const c=l(a.Gm);if(c.type===0)return a.FE(0,1),rlb;if(c.type===1)return a.FE(1,1),slb;if(c.type===2)return a.FE(2,1),tlb;if(c.type!==b)throw Error();a.Gm=a.ops[a.i++];return c};ulb=function(a){return a.every(()=>!1)};vlb=function(a){ia(a.aSa<a.input.length,"{} >= {}",a.aSa,a.input.length);return a.input[a.aSa++]};wlb=function(a,b){b=a.aSa+b;ia(b<=a.input.length);const c=a.input.slice(a.aSa,b);a.aSa=b;return c};
xlb=function(a,b){a.Sub||(a.Sub=new Set);ia(!a.Sub.has(b),"duplicate modification: {}",b);a.Sub.add(b)};ylb=function(a,b,c){xlb(a,b);(a.pPc||(a.pPc=new Map)).set(b,c)};zlb=function(a,b,c){xlb(a,b);(a.oPc||(a.oPc=new Map)).set(b,c)};Alb=function(a,b){let {Df:c,om:d}=b;var e=a.pPc;a=a.oPc;if(e){const f=e.get(c);f!=null&&(c=f,e.delete(c))}a&&(e=a.get(d),e!=null&&(d=e,a.delete(d)));return c!==b.Df||d!==b.om?{Df:c,om:d}:b};Hp=function(a,b,c){xlb(a,b);c!=null&&(a.g9b||(a.g9b=new Map)).set(b,c)};
Ip=function(a,b,c){(a.cdb||(a.cdb=new Map)).set(b,c)};Jp=function(a,b,c){(a.Gcb||(a.Gcb=new Map)).set(c,b)};Blb=function({Df:a,om:b}){return{Df:b,om:a}};__c.Clb=function(a){return a.filter(()=>!0)};Kp=function(a,b){ia(Object.getPrototypeOf(a)===Object.prototype);const c={};for(const d in a)c[d]=b(a[d],d);return c};Dlb=function(a){const b={};for(const c in a){const d=a[c];ia(!(d in b),"non-unique value in record: {}",d);b[d]=c}return b};Mp=__c.Mp=function(a,b){return a===Lp?b:b===Lp?a:new Elb(a,b)};
Np=function(a,b){return new Flb(a,b)};Op=function(a,b){return new Glb(a,b)};Pp=function(a,...b){return b.every(c=>c===Lp)?Lp:new a(...b)};Ilb=function(a){return Object.keys(a).length===0?Np({},{}):new Hlb(a)};Klb=function(a,b,c){return new Jlb(a,b,c)};Sp=__c.Sp=function(a,b){return b===void 0?Pp(Llb,a):new Llb(a,b)};Tp=__c.Tp=function(a,b){const c=new Mlb(d=>new a(d));return b!=null?Mp(c,Nlb(b)):c};Up=function(a){return new Mlb(b=>a.YI(b))};
Nlb=function(a){var b=__c.Olb.structural;return{serialize:c=>b(c,a)?void 0:c,deserialize:c=>c!=null?c:a}};Qlb=function(a){return Mp(Plb,Ilb({oldState:a,newState:a}))};Ulb=function(a,b,c,d){return Klb({[0]:Mp(Mp(Rlb,Ilb({delta:a})),c),[1]:Mp(Qlb(b),d)},Slb,Tlb)};Slb=function(a){return a.type};Tlb=function(a){switch(a.type){case "UPDATE":return 0;case "REPLACE":return 1;default:throw new r(a.type);}};Vlb=function(a){const b=__c.up(c=>a(c));return c=>c!=null&&typeof c==="object"?b(c):a(c)};
Vp=__c.Vp=function(a,b){ia(a.mP(b),"invalid value: {}",b);return b};Wlb=function(a,b,c){if(!a.kv(b,c))throw Error(`Invalid argument: ${a.stringify(b)} != ${a.stringify(c)}`);};__c.Wp=function(a,b){var c=a.XC,d=a.values;const e=new Map;for(const f of d)ia(!e.has(b[f]),"invalid literal mapping for: {}",f),e.set(b[f],f);return c.call(a,new Xlb(b,e))};Xp=__c.Xp=function(a){return new Ylb(a,Lp)};Yp=__c.Yp=function(...a){return a.length===1?new Zlb(new Set(a),Np(a[0],a[0])):new Zlb(new Set(a),Lp)};
Zp=__c.Zp=function(a,b){return new $lb(a,b,Pp(amb,a.serializer))};__c.dmb=function(a,b){return new bmb(a,b,Pp(cmb,Lp,b.serializer))};aq=__c.aq=function(a,b){return new emb(a,b,$p)};bq=__c.bq=function(a,b){return new fmb(a,b,$p)};cq=__c.cq=function(a){return new gmb(a,Lp)};hmb=function(a,b){ia(Number.isSafeInteger(a)&&Number.isSafeInteger(b)&&a<=b);return Xp(c=>Number.isSafeInteger(c)&&a<=c&&c<=b)};
dq=function(a,b){ia(Number.isFinite(a)&&Number.isFinite(b)&&a<=b);return Xp(c=>Number.isFinite(c)&&a<=c&&c<=b)};fq=__c.fq=function(a){return a instanceof eq?new __c.imb(a,Sp(a.serializer)):new jmb(a,Sp(a.SK),Sp(a.Pk))};gq=__c.gq=function(a,b){return a.S$b(Klb({[0]:Np(),[1]:Mp(Qlb(a.type.serializer),b)},c=>c==null?0:c.type,c=>c==null?0:1))};lmb=function(a){return new kmb(a)};hq=__c.hq=function(a,b,c){return a.S$b(Sp(Ulb(a.type.SK,a.type.Pk,b,c)))};iq=__c.iq=function(a){return new __c.mmb(a,$p,a.serializer)};
jq=__c.jq=function(a){return new nmb(a,$p,a.Pk)};kq=__c.kq=function(a){return iq(fq(a))};pmb=function(a,b,c){return c==null||a.component.isIdentity(c)?omb:new Map([[b,c]])};__c.qmb=function(a,b){return a.size?b.size?new Set([...a.keys(),...b.keys()]):a.keys():b.keys()};rmb=function(a,b,c){const d=Ap(a,e=>a.domain.update(b,e));return Cp(a.context,a.valueType,c,d)};
__c.lq=function(a,b,c,d){var e=a.S$b;var f=a.keyType.serializer;c=Ulb(Sp(a.valueType.SK),Sp(a.valueType.Pk),c,d);f=Pp(cmb,f,c);return e.call(a,Mp(f,Mp(smb,b)))};nq=__c.nq=function(...a){const [b,c]=a.length===1?[mq,a[0]]:a;return new tmb(b,c,$p,Pp(cmb,b.serializer,c.Pk))};oq=function(a){return new umb(a,Lp,a.serializer)};vmb=function(a,b,c){return pq.of({...a,...b,...c})};wmb=function(...a){const b=new Set;for(const c of a)for(const d in c)ia(!b.has(d),'duplicate key: "{}"',d),b.add(d)};
xmb=function(a){if(a.computed==null)return{hb:{},attributes:{}};const {hb:b,attributes:c,FP:d}=a.computed.create({...a.values,...a.hb,...a.attributes});return{hb:Kp(a.computed.hb,(e,f)=>b[f]),attributes:Kp(a.computed.attributes,(e,f)=>c[f]),FP:d}};
ymb=function(a,b){if(!a)return b;if(!b)return a;const c=a.create,d=b.create;return{hb:{...a.hb,...b.hb},attributes:{...a.attributes,...b.attributes},create:e=>{const {hb:f,attributes:g,FP:h}=c(e),{hb:k,attributes:m,FP:n}=d({...e,...f,...g});return{hb:{...f,...k},attributes:{...g,...m},FP:h&&n?()=>{h();n()}:h||n}}}};qq=__c.qq=function(a){return zmb.Zf(a)};rq=__c.rq=function(a){return a.domain.le()};
__c.sq=function(a,b,c,d,e,f,g,h){return a.aw(Mp(new Amb(a.domain,a.type.SK,a.type.Pk,c,d,e,f,g,h),Mp(smb,b)),a.Pk)};wq=__c.wq=function(a){return new tq(a,$p,Mp(Bmb,new Cmb(Pp(amb,a.Pk))))};__c.xq=function(a,b){return a?b?(...c)=>{a(...c);b(...c)}:a:b};Dmb=function(a,b){a=a.length;ia(0<=b&&b<a,"{} \u2209 [0, {})",b,a)};Emb=function(a,b){a=a.length;ia(0<b&&b<a,"{} \u2209 (0, {})",b,a)};__c.Fmb=function(a,b){return a?b?{Qa:__c.xq(a.Qa,b.Qa),item:__c.xq(a.item,b.item),Qi:__c.xq(a.Qi,b.Qi)}:a:b};
Gmb=function(a,b){a=a.lha;ia(0<b&&b<a,"{} \u2209 (0, {})",0,a)};Hmb=function(a,b){a=a.p7;ia(0<b&&b<a,"{} \u2209 (0, {})",0,a)};yq=__c.yq=function(a,b,c){switch(b.type){case 0:case 1:switch(c.type){case 0:case 1:return a.wo(b.state,c.state);case 2:return a.JM(b.state);default:throw new r(c);}case 2:switch(c.type){case 0:case 1:return a.Pza(c.state);case 2:return a.q8(b.state);default:throw new r(c);}default:throw new r(b);}};zq=__c.zq=function(a){const b=l(a.Gm);a.Gm=a.ops[a.i++];return b};
__c.Imb=function(a,b){const c=l(a.Gm),d=c.lha;ia(0<b&&b<=d);if(b<d){const [e,f]=c.g6b(b);a.Gm=f;return e}a.Gm=a.ops[a.i++];return c};Jmb=function(a,b){const c=l(a.Gm),d=c.p7;ia(0<b&&b<=d);if(b<d){const [e,f]=c.f6b(b);a.Gm=f;return e}a.Gm=a.ops[a.i++];return c};Lmb=function(a,b,c){switch(c.type){case 0:return b;case 1:return ia(b.type===1),new Aq(a.component.apply(b.state,c.delta));case 3:return __c.Kmb(a,b,c.oldState),c.newState;default:throw new r(c);}};
Mmb=function(a,b,c){switch(c.type){case 0:return b;case 1:return ia(b.type===1),new Aq(a.component.Xl(b.state,c.delta));case 3:return __c.Kmb(a,b,c.newState),c.oldState;default:throw new r(c);}};__c.Bq=function(a,b,c){switch(b.type){case 0:return c.type===0&&b.state===c.state;case 1:return c.type===1&&a.component.Hi(b.state,c.state);case 2:return c.type===2&&b.state===c.state;default:throw new r(b);}};__c.Kmb=function(a,b,c){ia(__c.Bq(a,b,c),"{} != {}",b,c)};
__c.Nmb=function(a,b){const c=__c.Cq.le(),d=a.cursor(0,{...Dq,Qi:g=>c.retain(g)}),e={...Dq,Qa:g=>c.retain(g.length)},f={...Dq,Qa:g=>c.JM(g)};b.forEach({retain:g=>d.Bn(g,e),delete:g=>d.Bn(g,f),insert:g=>c.insert(g)});return c.build()};
Omb=function(a,b){const c=new Eq,d=a.cursor();a=h=>{throw Error(String(h));};const e={...Dq,Qa:h=>c.retain(h.length)},f={...Dq,Qa:a},g={...Dq,Qa:()=>0,Qi:a};b.forEach({retain:h=>d.DJ(h,e),update:h=>{throw new r(h);},insert:h=>h.type!==2&&c.insert(h.state),wo:(h,k)=>{h.type===2?(d.DJ(h.length,f),k.type!==2&&c.insert(k.state)):(d.DJ(h.length,g),k.type===2?c.delete(h.length):(ia(h.state===k.state,"non-reflexive change: {} != {}",h,k),c.retain(h.length)))}});return c.build()};__c.Fq=function(a){return Object.keys(a)};
__c.Gq=function(a,b,c){for(const [d,e]of Object.entries(a))c(d,e,b[d])};__c.Pmb=function(a,b){return a.length?b.length?[...(new Set([...a,...b]))]:a:b};Qmb=function(a,b){return{type:0,XF:a,BH:b}};Rmb=function(a){return{type:1,length:a}};__c.Smb=function(a,b){return a&&b?a.RN===b.RN&&a.$L===b.$L:!a&&!b};__c.Tmb=function(a,b){Object.entries(a).forEach(([c,d])=>d!=null&&b(d,c))};
Umb=function(a,b){const c=__c.Fq(a),d=__c.Fq(b);if(a===b||!c.length&&!d.length)return!0;if(c.length!==d.length)return!1;const e=__c.Pmb(c,d);return c.length===e.length&&d.length===e.length&&e.every(f=>__c.Smb(a[f].r,b[f].r))};Vmb=function(a,b={}){return{type:0,length:a,UI:b}};Hq=__c.Hq=function(a,b){return a?!!b&&a.from===b.from&&a.to===b.to:!b};
Wmb=function(a,b){let c=0,d=0;for(const e of a.Ska)switch(a=e.length,e.type){case 0:b.retain&&b.retain(a,c,d);c+=a;d+=a;break;case 1:b.insert&&b.insert(a,c,d);d+=a;break;default:throw new r(e.type);}};Xmb=function(a,b,c){let {from:d,to:e}=a;d+=d>b?c:0;e+=e>b?c:0;return a.from!==d||a.to!==e?new Iq(d,e):a};Ymb=function(a,b,c){for(const [d,e]of a){const f=Xmb(e,b,c);f!==e&&a.set(d,f)}};
Jq=function(a,b,c,d){for(const [e,f]of a){const g=f.mha,h=f.eha,k=g&&(b!=null?Xmb(g,b,d):g),m=h&&(c!=null?Xmb(h,c,d):h);k===g&&m===h||a.set(e,new Zmb(k,m))}};$mb=function(a,b){return a.size?b.size?new Set([...a.keys(),...b.keys()]):a.keys():b.keys()};anb=function(a,b){Bo(a,b);return a};Kq=__c.Kq=function(a,b){return{key:a.FCa(b),value:b}};Lq=__c.Lq=function(a,b,c){return new __c.bnb(a,b,c,$p,$p)};__c.cnb=function(a,b){return a===b||a.size===b.size&&Array.from(a.keys()).every(c=>a.get(c)===b.get(c))};
dnb=function(a,b){if(!a.size)return b;if(!b.size)return a;const c=new Map;for(const [e,f]of a){var d=b.get(e)||0;(d=f+d)&&c.set(e,d)}for(const [e,f]of b)a.has(e)||c.set(e,f);return c};enb=function(a,b){const c=new Map;for(const [d,e]of a)b(e)&&c.set(d,e);return c};fnb=function(a){return gq(iq(dq(0,a)),Tp(Mq))};gnb=function(...a){return b=>{for(const c of a){const d=c(b);if(d)return d}}};
hnb=function(a){return b=>{const c=[];if(b==="")return{s:b,value:c};for(;;){const d=a(b);if(!d||d.s===b)return{s:b,value:c};c.push(...d.value);b=d.s}}};Nq=function(a){return{type:0,length:a}};inb=function(a){return{type:1,length:a}};Oq=__c.Oq=function(a,b){return a.FE(1,b).length};
Pq=function(a,b){var c=Array.from(b).sort((f,g)=>f-g);if(!c.length)return jnb;ia(c[0]>=0);b=new Map;a=a.zd(c[c.length-1],0);let d=0,e=0;for(const f of c){for(c=a.head;d<f;){ka(c!=null);switch(c.type){case 0:c=a.GA(Math.min(f-d,c.length));d+=c;e+=c;break;case 1:e+=Oq(a,c.length);break;default:throw new r(c);}c=a.head}c?.type===1&&(e+=Oq(a,c.length));if(d!==f)throw Error();b.set(d,e)}return b};
knb=function(a,b){var c=Array.from(b).sort((f,g)=>f-g);if(!c.length)return jnb;ia(c[0]>=0);b=new Map;a=a.zd(0,c[c.length-1]);let d=0,e=0;for(const f of c){for(c=a.head;e<f;){ka(c!=null);switch(c.type){case 0:c=a.GA(Math.min(f-e,c.length));d+=c;e+=c;break;case 1:e+=Oq(a,Math.min(f-e,c.length));break;default:throw new r(c);}c=a.head}if(e!==f)throw Error();b.set(e,d)}return b};lnb=function(a){return JSON.stringify(a,(b,c)=>c??null)};Qq=function(a){return new mnb(a.zYd)};
onb=function(a,b,c,d){var e=Math.max(a.lr,b.lr),f=Math.max(a.GB,b.GB);a=a.zd(void 0,e,f);b=b.zd(void 0,e,f);e=a.head;for(f=b.head;e||f;){if(e&&e.type===0||f&&f.type===0){const n=a.Hv(),p=b.Hv(),q=c.Hv();e=n;f=p;for(var g=q,h=d,k=e.head,m=f.head;k||m;){if(k&&k.type===0||m&&m.type===0){k=e.ov();m=f.ov();for(const v of nnb(k,m))g.uk(v,h(v,e.attrs[v],f.attrs[v]))}else if(k&&m)k=Math.min(k.length,m.length),e.eo(k),f.eo(k),g.SB(k);else throw Error(`length mismatch: ${k} x ${m}`);k=e.head;m=f.head}n.finish();
p.finish();q.finish()}else if(e&&f)e=Math.min(e.length,f.length),Rq(a,e),Rq(b,e),c.rows(e);else throw Error(`length mismatch: ${e} x ${f}`);e=a.head;f=b.head}a.finish();b.finish()};qnb=function(a,b,c,d){return Sq.isIdentity(c)&&Sq.isIdentity(d)||b.items.isEmpty()?b:pnb("apply",a.zYd,b,c,d)};
pnb=function(a,b,c,d,e){const f=new Tq,[g,h]=a==="apply"?[c.items.zd(e.pre),e.zd(c.items.length,0)]:[c.items.zd(e.post),e.zd(0,c.items.length)];e=g.head;var k=h.head;for(c=0;e||k;){if(k&&k.type===1)Oq(h,k.length),a==="apply"?f.Bc(k.length):g.eo(k.length);else if(e&&e.type===0){e=g.ov();const [n,p]=a==="apply"?[e.zd(d.pre),d.zd(e.length,0)]:[e.zd(d.post),d.zd(0,e.length)];e=a;k=new Tq;var m=n.head;let q=p.head;for(;m||q;){if(q&&q.type===1)Oq(p,q.length),e==="apply"?k.Bc(q.length):n.eo(q.length);else if(m)m.type===
0?k.grad(n.ov()):q?(m=Math.min(m.length,q.length),n.eo(m),p.GA(m),k.Bc(m)):(n.eo(m.length),k.Bc(m.length));else throw Error(`length mismatch: ${m} vs ${q}`);m=n.head;q=p.head}e=k.build();e.isEmpty()||(f.grad(e),c=Math.max(c,e.length));n.finish();p.finish()}else if(e&&k)e=Math.min(k.length,e.length),g.eo(e),h.GA(e),f.Bc(e);else throw Error("length mismatch");e=g.head;k=h.head}g.finish();h.finish();a=f.build();return Uq.of(b,a,c,a.length)};rnb=function(a){return{type:1,length:a}};
__c.snb=function(a,b,c){a=a.zd(b);b=a.head;let d=0;for(;b;)d=b.type!==0&&a.gaf?d+Rq(a,b.length):d+a.Ilc((e,f)=>c(e,d,f)),b=a.head;a.finish()};Rq=__c.Rq=function(a,b){ka(a.z_==null);return a.t3a.eo(b)};tnb=function(a,b,c,d){return c===d?!0:c&&d?a(b,c.oc,d.oc)&&a(b,c.r,d.r):!1};__c.unb=function(a,b,c,d){if(!d)return c;ia(a(b,c,d.oc),"{} != {}",c,d.oc);return d.r};vnb=function(a,b,c,d){return tnb(a,b,c,d)?void 0:{t:c,b:d}};
__c.wnb=function(a,b,c){const d={};if(b&&c)for(const f of nnb(b,c)){var e=vnb(a,f,b[f],c[f]);e&&(d[f]=e)}else if(b)for(e of Vq(b))(c=vnb(a,e,b[e]))&&(d[e]=c);else if(c)for(const f of Vq(c))(b=vnb(a,f,void 0,c[f]))&&(d[f]=b);return Wq(d)?void 0:d};xnb=function(a,b,c){return nnb(b,c).every(d=>{var e=b&&b[d],f=c&&c[d];return e===f?!0:e&&f?tnb(a,d,e.t,f.t)&&tnb(a,d,e.b,f.b):!1})};Vq=__c.Vq=function(a){return Object.keys(a)};
nnb=function(a,b){return a&&b?[...(new Set([...Vq(a),...Vq(b)]))]:a?Vq(a):b?Vq(b):[]};Wq=__c.Wq=function(a){return Vq(a).length===0};ynb=function(a,b){let c=a.rows[b];c==null&&(c=a.rows[b]=a.faf++);return c};znb=function(a,b){let c=a.cols[b];c==null&&(c=a.cols[b]=a.caf++);return c};Anb=function(a,b,c,d=()=>!0){a.cols.spliceWithArray(b,0,Array(c));for(let e=0;e<a.rows.length;e++){const f=a.get(e,b-1);if(f!=null&&d(f))for(let g=b;g<b+c;g++)a.set(e,g,f)}};
Bnb=function(a,b,c,d=()=>!0){a.rows.spliceWithArray(b,0,Array(c));for(let e=0;e<a.cols.length;e++){const f=a.get(b-1,e);if(f!=null&&d(f))for(let g=b;g<b+c;g++)a.set(g,e,f)}};Cnb=function(a,b,c,d){const e=__c.sp(a.tf,a.tf.Vba(b,d)),f=__c.Qkb(a.tf,e,(h,k)=>__c.Pkb(a.tf,e,k)),g={};__c.Go(a.tf,f,b,(h,k)=>{g[k]={o:c?.[k],n:f[k]}});return g};
Enb=function(a,b){__c.snb(b,a.tf.Rt,(c,d,e)=>{const f=a.grid.get(d,e),g=f?{...f}:{};Dnb(c,(h,k)=>{h!=null&&(ka(a.tf.kKa(k,f?.[k],h.o)),h.n==null?delete g[k]:g[k]=h.n)});a.write(d,e,g)})};Dnb=function(a,b){for(const c of Object.keys(a))b(a[c],c)};Fnb=function(a,b){return a&&b?[...(new Set([...Object.keys(a),...Object.keys(b)]))]:a?Object.keys(a):b?Object.keys(b):[]};Xq=__c.Xq=function(a,b,c,d){ka(0<=a);ka(0<=b);ka(a<=c);ka(b<=d);return{left:a,top:b,right:c,bottom:d}};
__c.Gnb=function(a,b){return{span:a,state:b}};Hnb=function(a){const b=a.rows[a.y];if(b!=null)for(;b.cells[a.x]==null&&a.x<b.cells.length;)a.x++};Inb=function(a){for(;a.rows[a.y]==null&&a.y<a.rows.length;)a.y++};Yq=__c.Yq=function(a,b){return a.right===b.right&&a.bottom===b.bottom};
Jnb=function(a,b,c,d){if(Sq.isIdentity(c)&&Sq.isIdentity(d))return b;const e=new Set,f=new Set;b.forEach((m,n,p)=>{e.add(m);f.add(n);switch(p.type){case 1:p.bounds&&e.add(p.bounds.o.right);p.bounds&&f.add(p.bounds.o.bottom);p.bounds&&e.add(p.bounds.n.right);p.bounds&&f.add(p.bounds.n.bottom);break;case 0:p.o&&e.add(p.o.right);p.o&&f.add(p.o.bottom);p.n&&e.add(p.n.right);p.n&&f.add(p.n.bottom);break;default:throw new r(p);}});const g=Pq(c,e),h=Pq(d,f),k=new Zq;b.forEach((m,n,p)=>{switch(p.type){case 1:k.add(l(g.get(m)),
l(h.get(n)),a.update(p.bounds&&{o:{right:l(g.get(p.bounds.o.right)),bottom:l(h.get(p.bounds.o.bottom))},n:{right:l(g.get(p.bounds.n.right)),bottom:l(h.get(p.bounds.n.bottom))}},p.delta));break;case 0:k.add(l(g.get(m)),l(h.get(n)),a.replace(p.o&&{right:l(g.get(p.o.right)),bottom:l(h.get(p.o.bottom)),state:p.o.state},p.n&&{right:l(g.get(p.n.right)),bottom:l(h.get(p.n.bottom)),state:p.n.state}));break;default:throw new r(p);}});return k.build()};
Mnb=function(a,b,c){const d=new Zq;Knb(b.zd(),c.zd(),(e,f,g,h)=>{b==null&&c==null||d.add(e,f,Lnb(a,g,h))});return d.build()};Knb=function(a,b,c){var d=a.head;let e=b.head;for(;d||e;){d=d==null?1:e==null?-1:d===e||d.y===e.y&&d.x===e.x?0:d.y<e.y||d.y===e.y&&d.x<e.x?-1:1;if(d<0){const {x:f,y:g,value:h}=a.uu();c(f,g,h,void 0)}else if(d>0){const {x:f,y:g,value:h}=b.uu();c(f,g,void 0,h)}else{const {x:f,y:g,value:h}=a.uu();({value:d}=b.uu());c(f,g,h,d)}d=a.head;e=b.head}a.finish();b.finish()};
Lnb=function(a,b,c){if(b==null)return c;if(c==null)return b;switch(b.type){case 0:a:switch(c.type){case 1:ka(b.n!=null);c.bounds&&ka(Yq(b.n,c.bounds.o));a=a.replace(b.o,{...(c.bounds?c.bounds.n:b.n),state:c.delta?a.component.apply(b.n.state,c.delta):b.n.state});break a;case 0:ka(__c.$q(a,b.n,c.o));a=a.replace(b.o,c.n);break a;default:throw new r(c);}return a;case 1:a:switch(c.type){case 1:b.bounds&&c.bounds&&ka(Yq(b.bounds.n,c.bounds.o));const d=b.bounds&&c.bounds?{o:b.bounds.o,n:c.bounds.n}:b.bounds||
c.bounds;b=b.delta&&c.delta?a.component.compose(b.delta,c.delta):b.delta||c.delta;a=a.update(d,b);break a;case 0:ka(c.o!=null);b.bounds&&ka(Yq(b.bounds.n,c.o));a=a.replace({...(b.bounds?b.bounds.o:c.o),state:b.delta?a.component.Xl(c.o.state,b.delta):c.o.state},c.n);break a;default:throw new r(c);}return a;default:throw new r(b);}};__c.$q=function(a,b,c){return b===c?!0:b&&c?Yq(b,c)&&a.component.Hi(b.state,c.state):!1};
Pnb=function(a,b,c,d,e,f){const g=d.type===0?d.n:d.bounds&&d.bounds.n,h=g?g.bottom:c;for(let n=Math.max(c,f.L3d);n<=h;n++)Nnb(f,n*2),f.Hv(),f.Ilc((p,q)=>{e.append(Xq(p,q,p,q))}),f.Job();f.L3d<=h&&Nnb(f,(h+1)*2);if(g==null)return{akb:b}=Onb(e,{left:b,top:c,right:b,bottom:c}),b?a.replace(void 0,void 0):void 0;const {akb:k,O2b:m}=Onb(e,{left:b,top:c,right:g.right,bottom:g.bottom});if(k){if(m)return a.update({o:{right:g.right,bottom:g.bottom},n:m},void 0);ka(d.type===0);return a.replace(d.n,void 0)}};
Rnb=function(a,b){Qnb(a,b.left,b.top);a.append(b)};Onb=function(a,b){Qnb(a,b.left,b.top);if(a.readBuffer(b.left,b.top))return{akb:!0,O2b:void 0};let c=b.left,d=b.top;for(var e=b.left+1;e<=b.right;e++){if(a.readBuffer(e,b.top))return{akb:!0,O2b:{right:c,bottom:d}};c=e}for(e=b.top+1;e<=b.bottom;e++){for(let f=b.left;f<=c;f++)if(a.readBuffer(f,e))return{akb:!0,O2b:{right:c,bottom:d}};d=e}return{akb:!1,O2b:void 0}};
Qnb=function(a,b,c){c>a.Gja&&(a.buffer.splice(0,c-a.Gja),a.Gja=c,a.qAa=0);b>a.qAa&&a.buffer[0]&&(a.buffer[0].splice(0,b-a.qAa),a.qAa=b)};Snb=function(a,b,c){c-=a.Gja;a=c===0?b-a.qAa:b;ka(c>=0&&a>=0);return{D3d:a,I3d:c}};Tnb=function(a){const b=Sq.le();a=a.zd();let c=a.head;for(;c;){switch(c.type){case 0:b.retain(c.length*2);a.GA(c.length);break;case 1:b.expand(c.length*2);Oq(a,c.length);break;default:throw new r(c);}c=a.head}return b.build()};
Nnb=function(a,b){for(ka(b>=a.Ara);b>a.Ara;){var c=a.zd.head;ka(c!=null);c.type===0?(a.Hv(),a.Job()):(c=Math.min(c.length,b-a.Ara),Rq(a.zd,c),a.Ara+=c)}};Unb=function(a,b){const c=new Zq,d=new Set;for(let e=b.top;e<=b.bottom;e++)for(let f=b.left;f<=b.right;f++){const g=a.grid.get(e,f);g==null||d.has(g)||(d.add(g),c.add(g.span.left,g.span.top,a.domain.replace({right:g.span.right,bottom:g.span.bottom,state:g.ak.snapshot()},void 0)))}return a.domain.Ke({cells:c.build()})};
Vnb=function(a,b){return c=>{const {left:d,top:e}=b.UId.get();return a.domain.Ke({cells:(new Zq).add(d,e,a.domain.update(void 0,c)).build()})}};Ynb=function(a,b,c){var d=a.grid;var e={left:znb(a.grid,c.left),top:ynb(a.grid,c.top),right:znb(a.grid,c.right),bottom:ynb(a.grid,c.bottom)};d=new Wnb(d,e);e=Ap(a,Vnb(a,d));b=Cp(a.context,a.type,b,e);b=new Xnb(b,d);for(d=c.top;d<=c.bottom;d++)for(e=c.left;e<=c.right;e++)a.grid.set(d,e,b)};__c.ar=function(a){return new Znb(a,$p,$p)};
cr=function(a,b,c,d){a.Kk.set(b,new br(c,d));return a};aob=function(a,b,c,d){a.Kk.set(b,new $nb(c,d));return a};bob=function(a,b){return a.size?b.size?new Set([...a.keys(),...b.keys()]):a.keys():b.keys()};
cob=function(a,b){if(Sq.isIdentity(b))return a;const c=new Set;for(const e of a.values())switch(e.type){case 0:e.oldValue!=null&&c.add(e.oldValue);e.newValue!=null&&c.add(e.newValue);break;case 1:c.add(e.oldValue);c.add(e.newValue);break;default:throw new r(e);}const d=Pq(b,c);return Tg(a,e=>{switch(e.type){case 0:return new br(e.oldValue!=null?l(d.get(e.oldValue)):void 0,e.newValue!=null?l(d.get(e.newValue)):void 0);case 1:return new $nb(l(d.get(e.oldValue)),l(d.get(e.newValue)));default:throw new r(e);
}})};dr=function(a){return{start:`${"a/"}${a}`,end:`${"b/"}${a}`}};dob=function(a){ka(a.startsWith("a/")||a.startsWith("b/"));return a.substring(2)};eob=function(a){const b=new Map;for(const [c,d]of a)a=dr(c),b.set(a.start,d.start),b.set(a.end,d.end);return b};fob=function(a){const b=new Map;a=new Map(a);for(const c of a.keys()){const d=dob(c),e=dr(d),f=l(a.get(e.start)),g=l(a.get(e.end));a.delete(e.start);a.delete(e.end);b.set(d,er.from({start:f,end:g}))}if(a.size)throw Error();return b};
gob=function(a){const b=__c.fr.le();for(const [d,e]of a.We)switch(e.type){case "replace":var c=dr(d);cr(b,c.start,e.oldValue?e.oldValue.start:void 0,e.newValue?e.newValue.start:void 0);cr(b,c.end,e.oldValue?e.oldValue.end:void 0,e.newValue?e.newValue.end:void 0);break;case "update":c=dr(d);e.start&&aob(b,c.start,e.start.oldValue,e.start.newValue);e.end&&aob(b,c.end,e.end.oldValue,e.end.newValue);break;default:throw new r(e);}return __c.fr.Ke(a.axis,b.build().Kk)};
kob=function(a){const b=new Map,c=new Map(a.Kk);for(const [f,g]of c){const h=dob(f),k=dr(h);switch(g.type){case 0:var d=l(c.get(k.start)),e=l(c.get(k.end));ka(d.type===g.type);ka(e.type===g.type);ka(d.oldValue!=null===(e.oldValue!=null));ka(d.newValue!=null===(e.newValue!=null));c.delete(k.start);c.delete(k.end);b.set(h,new hob(d.oldValue!=null&&e.oldValue!=null?er.from([d.oldValue,e.oldValue]):void 0,d.newValue!=null&&e.newValue!=null?er.from([d.newValue,e.newValue]):void 0));break;case 1:d=c.get(k.start);
e=c.get(k.end);d&&ka(d.type===g.type);e&&ka(e.type===g.type);c.delete(k.start);c.delete(k.end);b.set(h,new iob(d?gr.from(d):void 0,e?gr.from(e):void 0));break;default:throw new r(g);}}if(c.size)throw Error();return job.create(a.axis,b)};lob=function(a,b){let c=a.items[b];c==null&&(c=a.items[b]={});return c};hr=function(a,b){if(b!=null)return l(a.Jyd.get(b))};__c.qib.prototype.rka=ca(123,function(){return new __c.qib(this.scope,this,!0)});
__c.sib.prototype.rka=ca(122,function(){return new __c.sib(this.scope,this,!0)});__c.tib.prototype.rka=ca(121,function(){return new __c.tib(this.scope,this.WHa,this.defaultValue,!0)});__c.uib.prototype.rka=ca(120,function(){return new __c.uib(this.scope,this.k2d,this.defaultValue,!0)});__c.vib.prototype.Vba=ca(119,function(a,b){const c={};this.copy(a,b,c);return c});mob=/^#[0-9a-f]{6}$|^transparent$/;nob=/^#[0-9a-f]{6}$|^inherit$/;oob=/^[0-9]+(\.[0-9]+)?px$|^inherit$/;pob=/^(([1-9]|10)( ([1-9]|10)){0,9})?$|^inherit$/;
ir=__webpack_require__(186901);qob=ir.Es;jr=__c.jr=ir.EW;__c.Olb=ir.m3;rob=ir.MN;sob=ir.O8;tob=ir.q$;kr=ir.sH;uob=ir.Tx;__c.vob=__webpack_require__(450117).B7;__c.wob=__webpack_require__(268245).p;__c.xob=__webpack_require__(535921).T;var yob;yob=__webpack_require__(536618);__c.zob=yob.Aj;__c.Aob=yob.iB;var lr=class{};var kmb=class{toString(){return`U(${this.delta})`}constructor(a){this.delta=a;this.type=0}},Bob=class{toString(){return`R(${this.oldState}, ${this.newState})`}constructor(a,b){this.oldState=a;this.newState=b;this.type=1}},Cob=class extends lr{update(a){return this.component.isIdentity(a)?void 0:new kmb(a)}replace(a,b){return new Bob(a,b)}isIdentity(a){return a==null||a.type===0&&this.component.isIdentity(a.delta)}constructor(a){super();this.component=a}};var Eob;mr=__c.mr=class extends lr{static equals(a,b){return a?!!b&&a.equals(b):!b}map(a,b,c,d){return new __c.Dob(this,a,b,c,d)}};
__c.Dob=class extends mr{isIdentity(a){return this.component.isIdentity(this.M_(a))}compose(a,b){return this.fV(this.component.compose(this.M_(a),this.M_(b)))}transform(a,b){a=this.component.transform(this.M_(a),this.M_(b));return Ukb(a,c=>this.fV(c))}El(a){return this.fV(this.component.El(this.M_(a)))}identity(a){return this.fV(this.component.identity(this.r9(a)))}apply(a,b){const c=this.r9(a);b=this.component.apply(c,this.M_(b));return c===b?a:this.hq(b)}Xl(a,b){const c=this.r9(a);b=this.component.Xl(c,
this.M_(b));return c===b?a:this.hq(b)}Eh(a){return this.hq(this.component.Eh(this.r9(a)))}Hi(a,b){return a===b||this.component.Hi(this.r9(a),this.r9(b))}equals(a){return this===a}constructor(a,b,c,d,e){super();this.component=a;this.fV=b;this.M_=c;this.hq=d;this.r9=e}};__c.Dob.prototype.Wg=ba(171);__c.Dob.prototype.zf=ba(150);wp=__c.wp=class{static ts(){return new Eob}constructor(a,b,c,d){this.ru=a;this.$u=b;this.RBa=c;this.CIa=d}};
Eob=class{build(a,b){return new wp(a,b,this.RBa,this.CIa)}constructor(){this.CIa=this.RBa=!1}};var Fob=class extends lr{isIdentity(){return!0}};nr=__c.nr=class extends mr{isIdentity(a){return this.base.isIdentity(a)}compose(){}transform(){return xp()}El(){}identity(){}apply(a){return a}Xl(a){return a}Eh(a){return this.copy(a)}Hi(a,b){return this.kv(a,b)}equals(a){return this===a}constructor(a,b){super();this.kv=a;this.copy=b;this.base=new Fob}};nr.prototype.Wg=ba(170);nr.prototype.zf=ba(149);or=__c.or=class extends mr{update(a){return this.base.update(a)}replace(a,b){return this.base.replace(a,b)}isIdentity(a){return this.base.isIdentity(a)}compose(a,b){if(a==null)return b;if(b==null)return a;switch(a.type){case 0:switch(b.type){case 0:return this.update(this.component.compose(a.delta,b.delta));case 1:return this.replace(this.component.Xl(b.oldState,a.delta),b.newState);default:throw new r(b);}case 1:switch(b.type){case 0:return this.replace(a.oldState,this.component.apply(a.newState,
b.delta));case 1:return vp(this.component,a.newState,b.oldState),this.replace(a.oldState,b.newState);default:throw new r(b);}default:throw new r(a);}}transform(a,b){if(a==null||b==null)return xp(b,a);switch(a.type){case 0:switch(b.type){case 0:return Ukb(this.component.transform(a.delta,b.delta),c=>this.update(c));case 1:return a=this.component.apply(b.oldState,a.delta),new wp(this.replace(a,b.newState),void 0,!1,!0);default:throw new r(b);}case 1:switch(b.type){case 0:return b=this.component.apply(a.oldState,
b.delta),yp(this.replace(b,a.newState));case 1:return vp(this.component,a.oldState,b.oldState),yp(this.replace(b.newState,a.newState));default:throw new r(b);}default:throw new r(a);}}El(a){if(a==null)return a;switch(a.type){case 0:return this.update(this.component.El(a.delta));case 1:return this.replace(a.newState,a.oldState);default:throw new r(a);}}identity(){}apply(a,b){if(b==null)return a;switch(b.type){case 0:return this.component.apply(a,b.delta);case 1:return vp(this.component,a,b.oldState),
b.newState;default:throw new r(b);}}Xl(a,b){if(b==null)return a;switch(b.type){case 0:return this.component.Xl(a,b.delta);case 1:return vp(this.component,a,b.newState),b.oldState;default:throw new r(b);}}Eh(a){return this.component.Eh(a)}Hi(a,b){return this.component.Hi(a,b)}equals(a){return this===a||a instanceof or&&this.component.equals(a.component)}constructor(a){super();this.component=a;this.base=new Cob(this.component)}};or.prototype.Wg=ba(169);or.prototype.zf=ba(148);var Gob,Hob,Ykb,Job;Gob={next:()=>{},error:()=>{}};Hob=class{next(a){this.closed||this.o.next(this.f(a))}constructor(a,b){this.o=a;this.f=b;this.closed=!1}};__c.Zkb=class extends Hob{error(a){this.closed||(this.closed=!0,this.o.error(a))}constructor(a,b){super(a,b);this.o=a;this.f=b}};__c.Iob=class extends Hob{complete(){this.closed||(this.closed=!0,this.o.complete())}constructor(a,b){super(a,b);this.o=a;this.f=b}};
Ykb=class{next(a){this.onNext.call(this.kDb,a)}error(a){this.onError.call(this.kDb,a)}constructor(a,b,c){this.kDb=a;this.onNext=b;this.onError=c}};Job=class{next(a){this.onNext.call(this.kDb,a)}complete(){this.onComplete.call(this.kDb)}constructor(a,b,c){this.kDb=a;this.onNext=b;this.onComplete=c}};pr=__c.pr=class{connect(a){ka(this.DL==null);this.DL=a;return new Job(this,this.ndf,this.complete)}ndf(a){this.DL&&this.wR(a)}snapshot(){return this.lX()}complete(){this.DL&&(this.DL=void 0,Xkb(this,"mutable disconnected"))}error(a){this.DL&&(this.DL.error(a),this.DL=void 0,Xkb(this,"mutable failure"))}Zbf(a){this.DL&&(this.Oec&&this.Oec.reportChanged(),$kb(this,a),this.DL.next(a))}wR(a){ka(this.DL!=null,"mutable not connected");try{this.T3(a),this.domain.isIdentity(a)||this.Oec&&this.Oec.reportChanged()}catch(b){throw this.error(b),
b;}$kb(this,a)}xq(a){this.wR(a);this.domain.isIdentity(a)||this.DL?.next(a)}constructor(a){this.context=a;this.clients=this.$vc=this.DL=void 0}};pr.prototype.TB=ba(180);var blb=class{get mutable(){this.ak.Etd||(this.Hvb=this.ak.SVd,this.ak=new Kob(this.context,this.context.metrics?.p3e,this.type,sob(()=>this.ak.snapshot()),this));return this.ak.mutable}snapshot(){return this.ak.snapshot()}wR(a){dlb(this);this.ak.wR(a)}destroy(a){this.ak.destroy(a);this.context.metrics?.jDc.edd(this)}next(a){dlb(this);this.HDa.next(a)}error(a){this.HDa.error(a)}constructor(a,b,c,d){this.context=a;this.type=b;this.HDa=d;this.Hvb=void 0;this.ak=new Lob(b.domain,c);a.metrics?.jDc.Dfd(this)}},
clb=class{get mutable(){let a=this.bvb?.deref();a==null&&(this.Hvb=this.dJa.SVd,a=new Kob(this.context,this.context.metrics?.p3e,this.type,sob(()=>this.dJa.snapshot()),this),this.bvb=flb(this,a));return a.mutable}snapshot(){var a=this.bvb?.deref();return a!=null?(a=a.snapshot(),this.dJa.setState(a),a):this.dJa.snapshot()}wR(a){dlb(this);this.dJa.wR(a);this.bvb?.deref()?.wR(a)}destroy(a){this.bvb?.deref()?.destroy(a);this.dJa.destroy(a);this.context.metrics?.jDc.edd(this)}next(a){dlb(this);this.dJa.wR(a);
this.HDa.next(a)}error(a){this.HDa.error(a)}constructor(a,b,c,d,e=globalThis){this.context=a;this.type=b;this.HDa=d;this.t1c=e;this.Hvb=this.bvb=void 0;this.dJa=new Lob(b.domain,c);this.dJa[Mob]=this;a.metrics?.jDc.Dfd(this)}},Kob=class{snapshot(){return this.type.snapshot(this.mutable)}wR(a){this.TYd.next(a)}destroy(a){var b=this.TYd;this.type.destroy(this.mutable,a);b.complete();this.metric?.edd(this)}next(a){this.HDa.next(a)}error(a){this.HDa.error(a)}get Etd(){return!0}constructor(a,b,c,d,e){this.context=
a;this.metric=b;this.type=c;this.HDa=e;a=__c.Bp(a,this.type,d,this);this.mutable=a.mutable;this.TYd=a.lG;this.metric?.Dfd(this)}},alb=class extends Kob{},Lob=class{get state(){this.OOa&&(this.Q8=this.domain.apply(this.Q8,Tkb(this.domain,this.OOa)),this.OOa=void 0);return this.Q8}setState(a){this.Q8=a;this.OOa=void 0}snapshot(){this.IF==null&&uob()&&(this.IF=rob(""),this.IF[Mob]=this);this.IF?.reportObserved();return this.state}get SVd(){return this.IF}wR(a){this.domain.isIdentity(a)||(this.OOa==null&&
(this.OOa=[]),this.OOa.push(a),this.IF?.reportChanged())}destroy(a){vp(this.domain,this.state,a)}get Etd(){return!1}constructor(a,b){this.domain=a;this.OOa=this.IF=void 0;this.Q8=b}},elb=class{deref(){return this.value}constructor(a){this.value=a}},Mob=Symbol("parentRef");qr=__c.qr=class{get(){this.reportObserved();return this.value}reportObserved(){this.IF||!uob()?this.IF?.reportObserved():(this.IF=rob(""),this.IF.reportObserved(),tob(this.IF,()=>this.IF=void 0))}set(a){__c.Olb.identity(this.value,a)||(this.value=a,this.IF?.reportChanged())}constructor(a){this.value=a;this.IF=rob("")}};var Nob=class extends lr{isIdentity(a){return a==null||this.component.isIdentity(a)}constructor(a){super();this.component=a;ia(!(a instanceof Nob))}};rr=__c.rr=class extends mr{isIdentity(a){return this.base.isIdentity(a)}compose(a,b){ia(a==null===(b==null));return a!=null&&b!=null?this.component.compose(a,b):void 0}transform(a,b){ia(a==null===(b==null));return a!=null&&b!=null?this.component.transform(a,b):xp(b,a)}El(a){return a!=null?this.component.El(a):void 0}identity(a){return a!=null?this.component.identity(a):void 0}apply(a,b){ia(a==null===(b==null));return a!=null&&b!=null?this.component.apply(a,b):void 0}Xl(a,b){ia(a==null===(b==null));
return a!=null&&b!=null?this.component.Xl(a,b):void 0}Eh(a){return a!=null?this.component.Eh(a):void 0}Hi(a,b){return a===b||a!=null&&b!=null&&this.component.Hi(a,b)}equals(a){return this===a||a instanceof rr&&this.component.equals(a.component)}constructor(a){super();this.component=a;this.base=new Nob(this.component);ia(!(a instanceof rr))}};rr.prototype.Wg=ba(168);rr.prototype.zf=ba(147);var glb={type:0,length:1},hlb={type:1,length:1},jlb={type:2,length:1},olb=class{toString(){return this.ops.map(nlb).join("")}constructor(a,b,c,d){this.ops=a;this.pre=b;this.post=c;this.NWa=d}},Oob=new olb([],0,0,0),Pob=class{Yca(a){if(this.mode!==a){switch(this.mode){case void 0:break;case 0:this.ops.push(Dp(this.acc));this.pre+=this.acc;this.post+=this.acc;this.acc=0;break;case 1:this.ops.push(ilb(this.acc));this.post+=this.acc;this.acc=0;break;case 2:this.ops.push(klb(this.acc));this.pre+=this.acc;
this.post+=this.acc;this.acc=0;break;case 3:case 4:break;default:throw new r(this.mode);}this.mode=a}}accumulate(a,b=1){ia(b>=0,"{} < 0",b);b&&(this.Yca(a),this.acc+=b);return this}y2b({Df:a,om:b}){const c=this.ops.length,d=this.eca||(this.eca=new Map),e=this.SHa||(this.SHa=new Map);ia(!d.has(a),"duplicate record: {}",a);ia(!e.has(b),"duplicate recall: {}",b);d.set(a,c);e.set(b,c)}append(a,b){switch(a.type){case 0:return this.retain(a.length);case 1:return this.expand(a.length);case 2:return this.q8(a.length);
case 3:var c=a.shift;if(!b&&(b=a.state,c&&c.Df===c.om&&(c=void 0,a=Ep(b)),b==null&&c==null))return this.expand();this.Yca(a.type);c&&this.y2b(c);this.ops.push(a);this.post++;return this;case 4:c=a.shift;if(!b)if(b=a.delta,c&&c.Df===c.om&&(c=void 0,a=Fp(b)),b==null){if(c==null)return this.retain()}else if(b.type===1&&b.oldState==null&&b.newState==null&&c==null)return this.q8();this.Yca(a.type);c&&this.y2b(c);this.ops.push(a);this.pre++;this.post++;return this;default:throw new r(a);}}retain(a){return a==
null||typeof a==="number"?this.accumulate(0,a):this.append(Fp(void 0,a))}expand(a){return a==null||typeof a==="number"?this.accumulate(1,a):this.append(Ep(void 0,a))}q8(a){return a==null||typeof a==="number"?this.accumulate(2,a):this.append(Fp(this.component.replace(void 0,void 0),a))}insert(a,b){return this.append(Ep(a,b))}update(a,b){return this.append(Fp(a!=null?this.component.update(a):void 0,b))}Pza(a){return this.append(Fp(this.component.replace(void 0,a)))}JM(a){return this.append(Fp(this.component.replace(a,
void 0)))}wo(a,b,c){return this.append(Fp(this.component.replace(a,b),c))}build(a){this.mode!==0&&this.Yca();if(a?.K1c())return a.Puc(this.ops);if(!this.eca&&!this.SHa)return new olb(this.ops,this.pre,this.post,0);a=this.ops;const b=l(this.eca);var c=[...b.keys()];if(c.some((g,h)=>g!==h)){const g=new Map;c.forEach((h,k)=>g.set(h,k));for(const h of b.values())switch(c=a[h],c.type){case 3:var d=c.shift,e=g.get(d.Df),f=g.get(d.om);if(e!==d.Df||f!==d.om)a[h]=Ep(c.state,{Df:e,om:f});break;case 4:d=c.shift;
e=g.get(d.Df);f=g.get(d.om);if(e!==d.Df||f!==d.om)a[h]=Fp(c.delta,{Df:e,om:f});break;case 0:case 1:case 2:throw Error(`INSERT | UPDATE expected: ${nlb(c)}`);default:throw new r(c);}}return new olb(a,this.pre,this.post,b.size)}constructor(a){this.component=a;this.ops=[];this.acc=this.post=this.pre=0;this.SHa=this.eca=this.mode=void 0}},Qob=class{y2b(a,{Df:b,om:c}){const d=this.eca||(this.eca=new Map),e=this.SHa||(this.SHa=new Map);ka(!d.has(b),"already recorded: {}",b);ka(!e.has(c),"already recalled: {}",
c);d.set(b,a);e.set(c,this.length)}append(a,b){b?this.y2b(a,b):a!=null&&(this.list[this.length]=a);this.length++;return this}expand(a=1){ia(a>=0,"{} < 0",a);this.length+=a;return this}build(){const a=this.list;if(this.eca||this.SHa){const c=l(this.eca);var b=l(this.SHa);Bo(c.size,b.size);for(const [d,e]of b)ka(c.has(d),"recall has no record: {}",d),b=c.get(d),b!=null&&(a[e]=b)}this.god!=null&&Bo(this.length,this.god);return a}constructor(a){this.god=a;this.list=[];this.length=0;this.SHa=this.eca=
void 0}},Rob=class extends lr{static of(a){return new Rob(new Cob(new Nob(a)))}le(){return new Pob(this.component)}isIdentity(a){return!a.ops.length||a.ops.every(b=>{switch(b.type){case 0:return!0;case 4:return!b.shift&&this.component.isIdentity(b.delta);case 2:case 1:case 3:return!1}throw new r(b);})}constructor(a){super();this.component=a}};var Sob,slb,rlb,tlb,Tob,Uob,Vob,Wob,Xob;Sob={type:0,length:1};slb=Ep();rlb=Fp();tlb=Fp(new Bob);
Tob=class{static create(a,b,c){ia(b>=0,"{} < 0",b);ia(c>=0,"{} < 0",c);a=(b=Math.max(0,b-a.pre,c-a.post))?[...a.ops,Dp(b)]:a.ops;return new Tob(a)}get head(){return this.Gm}FE(a,b=1){const c=l(this.Gm);if(c.type!==a)throw Error();const d=c.length;ia(0<b&&b<=d,"{} \u2209 (0, {}]",b,d);if(b<d)switch(a){case 0:return this.Gm=Dp(d-b),Dp(b);case 1:return this.Gm=ilb(d-b),ilb(b);case 2:return this.Gm=klb(d-b),klb(b);default:throw new r(a);}else return this.Gm=this.ops[this.i++],c}constructor(a){this.ops=
a;this.i=0;this.Gm=a[this.i++]}};Uob=class{static create(a,b){a.length<b&&(a=a.slice(),a.length=b);return new Uob(a)}finish(){Bo(this.aSa,this.input.length)}constructor(a){this.input=a;this.aSa=0}};
Vob=class{K1c(){return!!this.Sub}Puc(a){const b=new Pob(this.component);for(const c of a)switch(c.type){case 3:b.append(this.Ppd(c));break;case 4:b.append(this.Qpd(c));break;case 0:case 1:case 2:b.append(c);break;default:throw new r(c);}return b.build()}constructor(a){this.component=a;this.oPc=this.pPc=this.Sub=void 0}};
Wob=class extends Vob{Ppd(a){if(!a.shift)return a;const b=a.state,c=a.shift;var d=this.g9b?.get(c.Df);d=this.component.apply(b,d);const e=Alb(this,c);return d!==b||e!==c?Ep(d,e):a}Qpd(a){if(!a.shift)return a;const b=a.delta,c=a.shift;var d=this.g9b?.get(c.Df);d=this.component.compose(b,d);const e=Alb(this,c);return d!==b||e!==c?Fp(d,e):a}constructor(...a){super(...a);this.g9b=void 0}};
Xob=class extends Vob{K1c(){return super.K1c()||!!this.Gcb||!!this.cdb}Ppd(a){if(!a.shift)return a;const b=a.shift,c=Alb(this,b);if(c!==b)throw Error(`${JSON.stringify(c)} != ${JSON.stringify(b)}`);return a}Qpd(a){const b=a.delta,c=a.shift;var d=this.Gcb;if(d){var e=d.get(a);if(e==null)e=a.delta;else{d.delete(a);d=l(this.cdb);var f=d.get(e);d.delete(e);e=f}}else e=a.delta;d=c&&Alb(this,c);return e!==b||d!==c?Fp(e,d):a}Puc(a){a=super.Puc(a);if(this.Gcb?.size)throw Error(`unconsumed setSurrogates: ${[...this.Gcb.values()]}`);
if(this.cdb?.size)throw Error(`unconsumed subSurrogates: ${[...this.cdb.keys()]}`);return a}constructor(...a){super(...a);this.cdb=this.Gcb=void 0}};
sr=__c.sr=class extends mr{static of(a){return new sr(new or(new rr(a)))}le(){return this.base.le()}isIdentity(a){return this.base.isIdentity(a)}compose(a,b){if(!a.ops.length)return b;if(!b.ops.length)return a;const c=this.component,d=this.le(),e=new Wob(c),f=Tob.create(a,0,b.pre),g=Tob.create(plb(b,a.NWa),a.post,0);for(var h=f.head,k=g.head;h||k;){if(k)if(k.type===1)d.append(g.FE(k.type,k.length));else if(k.type===3)d.append(Gp(g,k.type));else if(h)if(h.type===1)switch(k.type){case 2:case 0:var m=
Math.min(h.length,k.length);f.FE(h.type,m);g.FE(k.type,m);d.append(ilb(m));break;case 4:m=Gp(f,h.type);k=Gp(g,k.type);h=k.shift;d.append(Ep(c.apply(m.state,k.delta),h));break;default:throw new r(k);}else if(h.type===3){m=Gp(f,h.type);k=Gp(g,k.type);h=m.shift;var n=k.shift;h==null?d.append(Ep(c.apply(m.state,k.delta),n)):n==null?(d.append(m),Hp(e,h.om,k.delta)):(d.append(Ep(m.state,{Df:h.Df,om:n.om})),Hp(e,h.om,k.delta),zlb(e,n.Df,h.om))}else h.type===4||k.type===4?(k=Gp(f,4),m=Gp(g,4),h=k.shift,n=
m.shift,h==null?d.append(Fp(c.compose(k.delta,m.delta),n)):n==null?(d.append(k),Hp(e,h.om,m.delta)):(d.append(Fp(k.delta,{Df:h.Df,om:n.om})),Hp(e,h.om,m.delta),zlb(e,n.Df,h.om))):(m=Math.min(h.length,k.length),h=f.FE(h.type,m),k=g.FE(k.type,m),d.append(h.type===2||k.type===2?klb(m):Dp(m)));else throw Error(`length mismatch: ${a} ; ${b}`);else throw Error(`length mismatch: ${a} ; ${b}`);h=f.head;k=g.head}return d.build(e)}transform(a,b){if(!a.ops.length||!b.ops.length)return xp(b,a);const c=this.component,
d=Tob.create(a,b.pre,0),e=Tob.create(plb(b,a.NWa),a.pre,0),f=this.le(),g=this.le(),h=wp.ts(),k=new Xob(c),m=new Xob(c);for(var n=d.head,p=e.head;n||p;){if(n?.type===3)if(p=Gp(d,n.type),p.shift){var q=p.shift;n=Fp();g.append(n,"nocollapse");f.append(p);Jp(k,q.om,n);Ip(k,q.Df)}else g.append(Sob),f.append(p);else if(n?.type===1)p=d.FE(n.type,n.length),g.append(Dp(p.length)),f.append(p);else if(p?.type===3)if(p=Gp(e,p.type),p.shift){n=p.shift;q=n.Df;n=n.om;var v=-q-1,x=Fp(void 0,{Df:-n-1,om:n});g.append(p);
f.append(x);Jp(m,n,x);Ip(m,q);ylb(m,v,q)}else g.append(p),f.append(Sob);else if(p?.type===1)q=e.FE(p.type,p.length),g.append(q),f.append(Dp(p.length));else if(n&&p)if(n.type===4||p.type===4){q=Gp(d,n.type);n=Gp(e,p.type);const {ru:y,$u:B}=zp(h,c.transform(q.delta,n.delta));p=q.shift;n=n.shift;if(p)if(n){q=n.Df;n=n.om;v=p.Df;p=p.om;x=-q-1;const C=Fp(void 0,{Df:-n-1,om:n}),D=Fp(void 0,{Df:q,om:n});g.append(D);f.append(C);Jp(k,p,D);Jp(m,n,C);Ip(k,v,y);Ip(m,q,B);ylb(m,x,v);zlb(m,q,p)}else q=p.Df,n=p.om,
v=Fp(),g.append(v,"nocollapse"),f.append(Fp(B,p)),Jp(k,n,v),Ip(k,q,y);else n?(p=n.Df,q=n.om,v=-p-1,x=Fp(void 0,{Df:-q-1,om:q}),g.append(Fp(y,n)),f.append(x),Jp(m,q,x),Ip(m,p,B),ylb(m,v,p)):(g.append(Fp(y)),f.append(Fp(B)))}else q=Math.min(n.length,p.length),n=d.FE(n.type,q),p=e.FE(p.type,q),n.type===2&&p.type===2?g.append(Dp(p.length)):g.append(p),f.append(n);else throw Error(`length mismatch (${a} x ${b})`);n=d.head;p=e.head}return h.build(g.build(k),f.build(m))}El(a){if(!a.ops.length)return a;const b=
this.le(),c=new Wob(this.component);for(const d of a.ops)switch(d.type){case 0:case 1:case 2:b.retain(d.length);break;case 4:a=this.component.El(d.delta);const e=d.shift&&Blb(d.shift);e?(b.retain(e),Hp(c,e.om,a)):b.append(Fp(a));break;case 3:a=d.shift&&Blb(d.shift);d.state!=null?a?(b.retain(a),Hp(c,a.om,this.component.replace(d.state,void 0))):b.JM(d.state):b.retain(a);break;default:throw new r(d);}return b.build(c)}ee(a){return new Qob(a)}identity(){return Oob}apply(a,b){if(!b.ops.length)return a;
const c=Uob.create(a,b.pre),d=new Qob(Math.max(a.length,b.pre)+(b.post-b.pre));a=b.pre<a.length?[...b.ops,Dp(a.length-b.pre)]:b.ops;for(const e of a)switch(e.type){case 0:qlb(d,wlb(c,e.length));break;case 1:d.expand(e.length);break;case 2:ka(ulb(wlb(c,e.length)));d.expand(e.length);break;case 3:d.append(e.state,e.shift);break;case 4:d.append(this.component.apply(vlb(c),e.delta),e.shift);break;default:throw new r(e);}c.finish();return d.build()}Xl(a,b){if(!b.ops.length)return a;const {unshift:c,BGf:d}=
this.unshift(b);b=d;a=this.apply(a,c);const e=Uob.create(a,b.post),f=new Qob(Math.max(a.length,b.post)+(b.pre-b.post));a=b.post<a.length?[...b.ops,Dp(a.length-b.post)]:b.ops;for(const g of a)switch(g.type){case 0:qlb(f,wlb(e,g.length));break;case 1:ka(ulb(wlb(e,g.length)));break;case 2:ka(ulb(wlb(e,g.length)));f.expand(g.length);break;case 3:vp(this.component,g.state,vlb(e));break;case 4:f.append(this.component.Xl(vlb(e),g.delta));break;default:throw new r(g);}e.finish();return f.build()}unshift(a){const b=
this.le(),c=this.le();for(const d of a.ops)switch(d.type){case 0:b.append(d);c.append(d);break;case 1:case 2:b.append(Dp(d.length));c.append(d);break;case 4:d.shift?(b.retain(Blb(d.shift)),c.append(Fp(d.delta))):(b.retain(),c.append(d));break;case 3:d.shift?(b.retain(Blb(d.shift)),c.append(Ep(d.state))):(b.retain(),c.append(d));break;default:throw new r(d);}return{unshift:b.build(),BGf:c.build()}}Eh(a){const b=[];a.forEach((c,d)=>{c=this.component.Eh(c);c!=null&&(b[d]=c)});return Object.freeze(b)}Hi(a,
b){if(a===b)return!0;if(a.length!==b.length)return!1;const c=Object.keys(a),d=Object.keys(b);if(c.length!==d.length)return!1;for(let e=0;e<c.length;e++)if(c[e]!==d[e]||!this.component.Hi(a[c[e]],b[d[e]]))return!1;return!0}equals(a){return this===a||a instanceof sr&&this.component.equals(a.component)}constructor(a){super();this.component=a;this.base=new Rob(this.component)}};sr.prototype.Fwb=ba(182);sr.prototype.Wg=ba(167);sr.prototype.zf=ba(146);var Lp,Elb,Flb,Glb,Xlb,amb,Bmb,cmb,Cmb,Hlb,Jlb,Llb,Mlb,Rlb,Plb,smb,Amb,Yob;Lp=Object.freeze({serialize:a=>a,deserialize:a=>a});$p=__c.$p=Object.freeze({serialize(){throw Error("serialization not implemented");},deserialize(){throw Error("serialization not implemented");}});Elb=class{serialize(a){return this.b.serialize(this.a.serialize(a))}deserialize(a){return this.a.deserialize(this.b.deserialize(a))}constructor(a,b){this.a=a;this.b=b}};
Flb=class{serialize(){return this.to}deserialize(){return this.from}constructor(a,b){this.from=a;this.to=b}};Glb=class{serialize(a){return this.serializer.serialize(a)}deserialize(a){ia(this.narrow(a),"Unsupported deserialization input");return this.serializer.deserialize(a)}constructor(a,b){this.serializer=a;this.narrow=b}};Xlb=class{serialize(a){return this.Vsf[a]}deserialize(a){return this.ADe.get(a)}constructor(a,b){this.Vsf=a;this.ADe=b}};
amb=class{serialize(a){return a.map(b=>this.serializer.serialize(b))}deserialize(a){return a.map(b=>this.serializer.deserialize(b))}constructor(a){this.serializer=a}};Bmb=Object.freeze({serialize(a){let b=0,c=0;const d=__c.Clb(a),e=[];a.forEach((f,g)=>{if(f=g-c)b&&(e.push(b),b=0),e.push(-f);b++;c=g+1});return[d,e]},deserialize([a,b]){const c=[];let d=0;for(const e of b)e<0?d+=-e:e>0&&(a.slice(0,e).forEach(f=>c[d++]=f),a=a.slice(e));a.length&&a.forEach(e=>c[d++]=e);return c}});
cmb=class{serialize(a){return Rkb(a,(b,c)=>[this.Yyd.serialize(b),this.j2d.serialize(c)])}deserialize(a){return Rkb(a,(b,c)=>[this.Yyd.deserialize(b),this.j2d.deserialize(c)])}constructor(a,b){this.Yyd=a;this.j2d=b}};Cmb=class{serialize([a,b]){return[this.gSd.serialize(a),this.hSd.serialize(b)]}deserialize([a,b]){return[this.gSd.deserialize(a),this.hSd.deserialize(b)]}constructor(a){this.gSd=a;this.hSd=Lp}};
Hlb=class{serialize(a){return Kp(this.cpd,(b,c)=>b.serialize(a[c]))}deserialize(a){return Kp(this.cpd,(b,c)=>b.deserialize(a[c]))}constructor(a){this.cpd=a}};Jlb=class{serialize(a){return this.su[this.aFe(a)].serialize(a)}deserialize(a){return this.su[this.$Ee(a)].deserialize(a)}constructor(a,b,c){this.su=a;this.aFe=b;this.$Ee=c}};
Llb=class{serialize(a){return a!=null?this.serializer.serialize(a):this.defaultValue}deserialize(a){return a!==this.defaultValue?this.serializer.deserialize(a):void 0}constructor(a,b){this.serializer=a;this.defaultValue=b}};Mlb=class{serialize(a){return this.construct(a)}deserialize(a){return a}constructor(a){this.construct=a}};Rlb=Object.freeze({serialize:a=>a,deserialize:a=>new kmb(a.delta)});Plb=Object.freeze({serialize:a=>a,deserialize:a=>new Bob(a.oldState,a.newState)});
smb=Object.freeze({serialize:a=>({ops:a}),deserialize:a=>a.ops});
Amb=class{serialize(a){return a.ops.map(b=>{switch(b.type){case 0:return this.wPd.serialize(b);case 1:return this.fod.serialize(b);case 2:return this.xPd.serialize(b);case 3:return this.Yvd.serialize({state:b.state!=null?this.Pk.serialize(b.state):void 0,shift:b.shift&&this.qBb.serialize(b.shift)});case 4:const c=b.shift&&this.qBb.serialize(b.shift);b=b.delta;if(b==null)return this.UZc.serialize({delta:void 0,shift:c});switch(b.type){case 0:return this.UZc.serialize({delta:b.delta!=null?this.SK.serialize(b.delta):
void 0,shift:c});case 1:return this.Gcd.serialize({oldState:b.oldState!=null?this.Pk.serialize(b.oldState):void 0,newState:b.newState!=null?this.Pk.serialize(b.newState):void 0,shift:c});default:throw new r(b);}default:throw new r(b);}})}deserialize(a){const b=this.domain.le();for(const c of a)switch(c.type){case "RETAIN":a=this.wPd.deserialize(c);b.retain(a.length);break;case "EXPAND":a=this.fod.deserialize(c);b.expand(a.length);break;case "RETOMB":a=this.xPd.deserialize(c);b.q8(a.length);break;
case "INSERT":a=this.Yvd.deserialize(c);b.insert(a.state!=null?this.Pk.deserialize(a.state):void 0,a.shift&&this.qBb.deserialize(a.shift));break;case "UPDATE":a=this.UZc.deserialize(c);b.update(a.delta!=null?this.SK.deserialize(a.delta):void 0,a.shift&&this.qBb.deserialize(a.shift));break;case "CHANGE":a=this.Gcd.deserialize(c);b.wo(a.oldState!=null?this.Pk.deserialize(a.oldState):void 0,a.newState!=null?this.Pk.deserialize(a.newState):void 0,a.shift&&this.qBb.deserialize(a.shift));break;default:throw new r(c);
}return b.build()}constructor(a,b,c,d,e,f,g,h,k){var m=Tp(tr);this.domain=a;this.SK=b;this.Pk=c;this.qBb=m;this.wPd=d;this.fod=e;this.xPd=f;this.Yvd=g;this.UZc=h;this.Gcd=k}};Yob=class{serialize(a){return a.value}deserialize(a){return{key:this.key,value:a}}constructor(a){this.key=a}};var Zob=Symbol();ur=__c.ur=class{bMb(a,b,c){a=this.bx({[Zob]:Zob,metrics:{}.metrics},a);c=this.connect(a,c??Gob);b?.subscribe(c);return a}create(a){return this.bMb(a,void 0,Gob)}Eh(a){return this.domain.Eh(a)}};ur.prototype.TB=ba(179);
vr=__c.vr=class extends ur{S$b(a){return this.aw(a,this.Pk)}cH(a,b){return this.aw(Op(this.SK,a),Op(this.Pk,b))}map(a,b,c,d,e,f){c=Vlb(c);d=Vlb(d);return new __c.$ob(this,a,b,c,d,e,f,Mp({serialize:b,deserialize:a},this.SK),Mp({serialize:d,deserialize:c},this.Pk))}constructor(a,b){super();this.SK=a;this.Pk=b}};
__c.$ob=class extends vr{bx(a,b){return this.ht(this.component.bx(a,this.r9(b)))}connect(a,b){b=new __c.Zkb(b,this.fV);a=this.component.connect(this.Deb(a),b);return new __c.Iob(a,this.M_)}snapshot(a){return this.hq(this.component.snapshot(this.Deb(a)))}destroy(a,b){return this.component.destroy(this.Deb(a),this.r9(b))}ki(a,b){return this.component.ki(this.Deb(a),this.r9(b))}aw(a,b){return new __c.$ob(this.component,this.fV,this.M_,this.hq,this.r9,this.ht,this.Deb,a,b)}constructor(a,b,c,d,e,f,g,h,
k){super(h,k);this.component=a;this.fV=b;this.M_=c;this.hq=d;this.r9=e;this.ht=f;this.Deb=g;this.domain=this.component.domain.map(this.fV,this.M_,this.hq,this.r9)}};__c.$ob.prototype.TB=ba(178);var apb,Zlb,Ylb,$lb,bmb,bpb,emb,fmb,gmb,dpb,fpb,gpb,hpb;eq=__c.eq=class{cH(a){return this.XC(Op(this.serializer,a))}constructor(a){this.serializer=a}};apb=class extends eq{kv(a,b){return a===b}Eh(a){return a}stringify(a){return JSON.stringify(a)}};
Zlb=class extends apb{mP(a){return this.values.has(a)}XC(a){return new Zlb(this.values,a)}cH(...a){if(a[0])return this.XC(Op(this.serializer,a[0]));const b=this.values;return this.XC(Op(this.serializer,c=>b.has(c)))}constructor(a,b){super(b);this.values=a}};Ylb=class extends apb{XC(a){return new Ylb(this.mP,a)}constructor(a,b){super(b);this.mP=a}};
$lb=class extends eq{mP(a){return a.every(b=>this.type.mP(b))&&(!this.JLa||this.JLa(a))}kv(a,b){return a.length===b.length&&a.every((c,d)=>d in b&&this.type.kv(c,b[d]))&&a.reduce(c=>c+1,0)===b.reduce(c=>c+1,0)}Eh(a){return Object.freeze(a.map(b=>this.type.Eh(b)))}stringify(a){return a.length?"[ "+a.map(b=>this.type.stringify(b)).join(", ")+" ]":"[]"}XC(a){return new $lb(this.type,this.JLa,a)}constructor(a,b,c){super(c);this.type=a;this.JLa=b}};
bmb=class extends eq{mP(a){return[...a].every(this.h0e)}kv(a,b){if(a.size!==b.size)return!1;for(const [c,d]of a)if(a=b.get(c),a==null||!this.valueType.kv(d,a))return!1;return!0}Eh(a){const b=new Map;for(const [c,d]of a)b.set(c,this.valueType.Eh(d));return b}stringify(a){return a.size?`{ ${[...a].map(([b,c])=>`${this.keyType.stringify(b)} => ${this.valueType.stringify(c)}`).join(", ")} }`:"{}"}XC(a){return new bmb(this.keyType,this.valueType,a)}constructor(a,b,c){super(c);this.keyType=a;this.valueType=
b;this.h0e=([d,e])=>bpb.every(f=>!d.includes(f))&&this.keyType.mP(d)&&this.valueType.mP(e)}};bpb=["$",".","\x00"];
emb=class extends eq{mP(a){return this.keys.every(b=>this.fields[b].mP(a[b]))&&(!this.JLa||this.JLa(a))}kv(a,b){return this.keys.every(c=>this.fields[c].kv(a[c],b[c]))}Eh(a){return Object.freeze(Kp(this.fields,(b,c)=>b.Eh(a[c])))}stringify(a){return this.keys.length?"{ "+this.keys.map(b=>`${b}: ${this.fields[b].stringify(a[b])}`).join(", ")+" }":"{}"}XC(a){return new emb(this.fields,this.JLa,a)}jb(a){var b=Kp(this.fields,c=>c.serializer);b=Ilb(b);return this.XC(Mp(b,a))}constructor(a,b,c){super(c);
this.fields=a;this.JLa=b;this.keys=Object.keys(this.fields)}};fmb=class extends eq{mP(a){return this.su[this.gPa(a)].mP(a)}kv(a,b){const c=this.gPa(a),d=this.gPa(b);return c===d&&this.su[c].kv(a,b)}Eh(a){return this.su[this.gPa(a)].Eh(a)}stringify(a){return this.su[this.gPa(a)].stringify(a)}XC(a){return new fmb(this.su,this.gPa,a)}hv(a,b){const c=Kp(this.su,e=>e.serializer),d=Dlb(a);return this.XC(Klb(c,this.gPa,e=>d[b(e)]))}constructor(a,b,c){super(c);this.su=a;this.gPa=b}};
__c.imb=class extends eq{mP(a){return a==null||this.type.mP(a)}kv(a,b){return a!=null?b!=null&&this.type.kv(a,b):b==null}Eh(a){return a!=null?this.type.Eh(a):void 0}stringify(a){return a!=null?this.type.stringify(a):"undefined"}XC(a){return new __c.imb(this.type,a)}constructor(a,b){super(b);this.type=a}};gmb=class extends apb{mP(a){return typeof a==="string"&&this.regexp.test(a)}XC(a){return new gmb(this.regexp,a)}constructor(a,b){super(b);this.regexp=a}};xr=__c.xr=Xp(a=>typeof a==="boolean");
mq=__c.mq=Xp(a=>typeof a==="string");__c.cpb=Xp(a=>a.length===1);__c.yr=hmb(-2147483648,2147483647);dpb=Xp(a=>Number.isSafeInteger(a));zr=__c.zr=hmb(0,2147483647);__c.epb=hmb(1,2147483647);Ar=__c.Ar=hmb(0,Number.MAX_SAFE_INTEGER);Br=__c.Br=Xp(a=>Number.isFinite(a));Cr=__c.Cr=dq(0,Number.MAX_VALUE);fpb=Xp(a=>Number.isFinite(a)&&0<a&&a<=Number.MAX_VALUE);gpb=Zp(Cr);hpb=Zp(mq);var ipb,jmb;ipb={next:a=>ia(a==null),complete:()=>{}};
jmb=class extends vr{bx(a,b){return b!=null?this.type.bx(a,b):void 0}connect(a,b){if(a==null)return ipb;a=this.type.connect(a,b);return new __c.Iob(a,l)}snapshot(a){return a!=null?this.type.snapshot(a):void 0}destroy(a,b){if(a!=null&&b!=null)this.type.destroy(a,b);else if(a!=null||b!=null)throw Error(`${this.snapshot(a)} != ${b}`);}ki(a,b){return a!=null?b!=null&&this.type.ki(a,b):b==null}aw(a,b){return new jmb(this.type,a,b)}constructor(a,b,c){super(b,c);this.type=a;this.domain=new rr(this.type.domain)}};
__c.Dr=fq(mq);__c.jpb=fq(xr);fq(__c.yr);fq(dpb);__c.Er=fq(Br);__c.kpb=fq(zr);__c.lpb=fq(Ar);__c.mpb=fq(Cr);var opb,nmb,ppb,tpb;__c.npb=class extends pr{T3(a){if(a!=null)switch(a.type){case 1:ia(this.g2d.kv(this._value.get(),a.oldState));this._value.set(a.newState);break;case 0:ia(a.delta==null);break;default:throw new r(a);}}get value(){return this._value.get()}set value(a){Vp(this.g2d,a);const b=this._value.get();this.xq(this.domain.replace(b,a))}lX(){return this.value}constructor(a,b,c,d){super(a);this.g2d=b;this.domain=c;this._value=new qr(d)}};
__c.mmb=class extends vr{bx(a,b){b=Vp(this.type,b);return new __c.npb(a,this.type,this.domain,b)}connect(a,b){return a.connect(b)}snapshot(a){return a.snapshot()}destroy(a,b){Wlb(this.type,a.value,b)}ki(a,b){this.type.kv(a.value,b)||(a.value=b);return!0}aw(a,b){return new __c.mmb(this.type,a,b)}constructor(a,b,c){super(b,c);this.type=a;this.domain=new or(new nr((d,e)=>this.type.kv(d,e),d=>this.type.Eh(d)))}};
opb=class extends pr{instantiate(a){this.ak.set(Cp(this.context,this.type,a,Ap(this,lmb)))}destroy(a){this.ak.get().destroy(a)}T3(a){if(a!=null)switch(a.type){case 0:this.ak.get().wR(a.delta);break;case 1:this.destroy(a.oldState);this.instantiate(a.newState);break;default:throw Error();}}lX(){return this.ak.get().snapshot()}get ref(){return this.ak.get().mutable}set(a){this.xq(new Bob(this.ak.get().snapshot(),a))}constructor(a,b,c,d){super(a);this.type=b;this.domain=c;this.ak=new qr(Cp(this.context,
this.type,d,Ap(this,lmb)))}};nmb=class extends vr{bx(a,b){return new opb(a,this.type,this.domain,b)}connect(a,b){return a.connect(b)}snapshot(a){return a.snapshot()}destroy(a,b){this.type.destroy(a.ref,b)}ki(a,b){this.type.ki(a.ref,b)||a.set(b);return!0}aw(a,b){return new nmb(this.type,a,b)}constructor(a,b,c){super(b,c);this.type=a;this.domain=new or(this.type.domain)}};ppb=iq(mq);__c.qpb=iq(xr);__c.rpb=iq(Br);__c.spb=iq(Cr);tpb=iq(fpb);__c.upb=iq(gpb);__c.vpb=iq(hpb);__c.Fr=kq(mq);kq(xr);kq(Br);
__c.wpb=kq(zr);kq(Ar);__c.xpb=kq(Cr);var omb;omb=new Map;
__c.Gr=class extends mr{create(a,b){return pmb(this,a,this.component.replace(void 0,b))}update(a,b){return pmb(this,a,this.component.update(b))}replace(a,b,c){return pmb(this,a,this.component.replace(b,c))}delete(a,b){return pmb(this,a,this.component.replace(b,void 0))}identity(){return omb}isIdentity(a){return!a.size||Array.from(a.values()).every(b=>this.component.isIdentity(b))}El(a){if(!a.size)return a;const b=new Map;for(const [c,d]of a)a=this.component.El(d),a!=null&&b.set(c,a);return b}compose(a,
b){if(!a.size)return b;if(!b.size)return a;const c=new Map;for(const d of __c.qmb(a,b)){const e=this.component.compose(a.get(d),b.get(d));e!=null&&c.set(d,e)}return c}transform(a,b){if(!a.size||!b.size)return xp(b,a);const c=new Map,d=new Map,e=wp.ts();for(const f of __c.qmb(a,b)){const g=zp(e,this.component.transform(a.get(f),b.get(f)));g.$u!=null&&c.set(f,g.$u);g.ru!=null&&d.set(f,g.ru)}return e.build(d,c)}apply(a,b){if(!b.size)return a;const c=new Map(a);b.forEach((d,e)=>{d=this.component.apply(a.get(e),
d);d!=null?c.set(e,d):c.delete(e)});return c}Xl(a,b){if(!b.size)return a;const c=new Map(a);b.forEach((d,e)=>{d=this.component.Xl(a.get(e),d);d!=null?c.set(e,d):c.delete(e)});return c}Eh(a){const b=new Map;for(const [c,d]of a)a=this.component.Eh(d),a!=null&&b.set(c,a);return b}Hi(a,b){return a===b||a.size===b.size&&Array.from(__c.qmb(a,b)).every(c=>{const d=a.get(c);c=b.get(c);return d!=null&&c!=null&&this.component.Hi(d,c)})}equals(a){return this===a||a instanceof __c.Gr&&this.component.equals(a)}constructor(a){super();
this.component=new or(new rr(a))}};__c.Gr.prototype.Wg=ba(166);__c.Gr.prototype.zf=ba(145);var ypb;ypb=Symbol.iterator;
var zpb=class extends pr{static C(a){M(a,{nD:kr.shallow})}get size(){return this.nD.size}set(a,b){Vp(this.keyType,a);var c=this.nD.get(a);c=c!=null?this.domain.replace(a,c.snapshot(),b):this.domain.create(a,b);this.xq(c);c=this.nD.get(a);if(c==null)throw Error(`Unable to set key "${a}" to value "${b}"`);return c.mutable}get(a){return this.nD.get(a)?.mutable}has(a){return this.nD.has(a)}delete(a){const b=this.nD.get(a);b!=null&&(a=this.domain.delete(a,b.snapshot()),this.xq(a))}forEach(a){this.nD.forEach((b,c)=>
a(b.mutable,c))}map(a){return[...this.nD].map(([b,c])=>a(c.mutable,b))}every(a){return[...this.nD.entries()].every(([b,c])=>a(c.mutable,b))}*entries(){for(const [a,b]of this.nD)yield[a,b.mutable]}keys(){return this.nD.keys()}*values(){for(const a of this.nD.values())yield a.mutable}RC(){return Tg(this.nD,a=>a.mutable)}[ypb](){return this.RC()[Symbol.iterator]()}lX(){return Tg(this.nD,a=>a.snapshot())}destroy(a){ia(this.nD.size===a.size);this.forEach((b,c)=>{b=l(a.get(c));l(this.nD.get(c)).destroy(b)})}ki(a){for(const [b,
c]of this.nD)if(a.has(b)){const d=a.get(b);this.valueType.ki(c.mutable,d)||this.set(b,d)}else this.delete(b);for(const [b,c]of a)this.nD.has(b)||this.set(b,c);return!0}T3(a){a.forEach((b,c)=>{if(b!=null)switch(b.type){case 0:b.delta!=null&&l(this.nD.get(c)).wR(b.delta);break;case 1:if(b.oldState!=null){var d=b.oldState;l(this.nD.get(c)).destroy(d);this.nD.delete(c)}else ia(!this.nD.has(c));b.newState!=null&&this.nD.set(c,rmb(this,c,b.newState));break;default:throw new r(b);}})}constructor(a,b,c,d,
e){super(a);this.keyType=b;this.valueType=c;this.domain=d;this.nD=(zpb.C(this),new Map);e.forEach((f,g)=>{Vp(this.keyType,g);this.nD.set(g,rmb(this,g,f))})}},tmb=class extends vr{bx(a,b){return new zpb(a,this.keyType,this.valueType,this.domain,b)}Um(a){return a}connect(a,b){return this.Um(a).connect(b)}snapshot(a){return this.Um(a).snapshot()}destroy(a,b){return this.Um(a).destroy(b)}ki(a,b){return this.Um(a).ki(b)}S$b(a){return new tmb(this.keyType,this.valueType,a,this.Pk)}aw(a,b){return new tmb(this.keyType,
this.valueType,a,b)}constructor(a,b,c,d){super(c,d);this.keyType=a;this.valueType=b;this.domain=new __c.Gr(this.valueType.domain)}};var Apb={next:()=>{},complete:()=>{}},umb=class extends vr{bx(a,b){return Vp(this.type,b)}connect(){return Apb}snapshot(a){return a}destroy(a,b){Wlb(this.type,a,b)}ki(a,b){return this.type.kv(a,b)}aw(a,b){return new umb(this.type,a,b)}constructor(a,b,c){super(b,c);this.type=a;this.domain=new nr((d,e)=>this.type.kv(d,e),d=>this.type.Eh(d))}};var Bpb=class extends lr{static of(a){return new Bpb(a)}isIdentity(a){return a===this.id||Object.entries(a).every(([b,c])=>c==null||this.components[b].isIdentity(c))}constructor(a){super();this.components=a;this.id={}}};pq=__c.pq=class extends mr{static of(a){return new pq(a)}update(a,b){const c={};l(this.components[a]).isIdentity(b)||(c[a]=b);return c}identity(){return this.id}isIdentity(a){return this.base.isIdentity(a)}El(a){const b={};var c=Object.keys(a);if(!c.length)return a;for(const e of c){var d=a[e];d!=null&&(c=this.components[e],d=c.El(d),c.isIdentity(d)||(b[e]=d))}return b}compose(a,b){const c={};var d=Object.keys(a),e=Object.keys(b);if(!d.length)return b;if(!e.length)return a;for(const f of new Set([...d,
...e])){e=a[f];const g=b[f];e!=null&&g!=null?(d=this.components[f],e=d.compose(e,g),d.isIdentity(e)||(c[f]=e)):e!=null?c[f]=e:g!=null&&(c[f]=g)}return c}transform(a,b){const c={},d={};var e=Object.keys(a),f=Object.keys(b);if(!e.length||!f.length)return xp(b,a);const g=wp.ts();for(const h of new Set([...e,...f])){f=a[h];const k=b[h];f!=null&&k!=null?(e=this.components[h],f=zp(g,e.transform(f,k)),e.isIdentity(f.$u)||(c[h]=f.$u),e.isIdentity(f.ru)||(d[h]=f.ru)):f!=null?c[h]=f:k!=null&&(d[h]=k)}return g.build(d,
c)}apply(a,b){var c=Object.keys(b);if(!c.length)return a;const d={...a};for(const e of c)c=b[e],c!=null&&(d[e]=this.components[e].apply(a[e],c));return d}Xl(a,b){var c=Object.keys(b);if(!c.length)return a;const d={...a};for(const e of c)c=b[e],c!=null&&(d[e]=this.components[e].Xl(a[e],c));return d}Eh(a){return Object.freeze(Co(this.components,(b,c)=>b.Eh(a[c])))}Hi(a,b){return a===b||Object.keys(this.components).every(c=>this.components[c].Hi(a[c],b[c]))}equals(a){return this===a?!0:a instanceof pq?
Object.keys(this.components).length===Object.keys(a.components).length&&Object.keys(this.components).every(b=>b in a.components&&this.components[b].equals(a.components[b])):!1}constructor(a){super();this.components=a;this.base=new Bpb(this.components);this.id={}}};pq.prototype.Wg=ba(165);pq.prototype.zf=ba(144);var Dpb;
__c.Cpb=class extends pr{lX(){const a=this.tda,b=this.Vyb,c=this.F0a,d={};for(const e in a)d[e]=this.values[e];for(const e in b)d[e]=this.hb[e].snapshot();for(const e in c)d[e]=this.attributes[e].snapshot();return d}destroy(a){const b=this.tda,c=this.Vyb,d=this.F0a,e=this.gla;for(const f in b)Wlb(b[f],this.values[f],a[f]);for(const f in c)this.hb[f].destroy(a[f]);for(const f in d)this.attributes[f].destroy(a[f]);if(e?.FP)try{e.FP()}catch(f){Promise.reject(f)}}ki(a){const b=this.tda,c=this.Vyb,d=this.F0a;
for(const e in b)if(!b[e].kv(this.values[e],a[e]))return!1;for(const e in c)if(!c[e].ki(this.hb[e].mutable,a[e]))return!1;for(const e in d)if(!d[e].ki(this.attributes[e].mutable,a[e]))return!1;return!0}T3(a){for(const b in a)a[b]!=null&&(b in this.Vyb?this.hb[b].wR(a[b]):b in this.F0a&&this.attributes[b].wR(a[b]))}getAttribute(a){return this.attributes[a].snapshot()}setAttribute(a,b){this.attributes[a].mutable.value=b}constructor(a,b,c,d,e,f,g,h,k){super(a);this.domain=b;this.tda=c;this.Vyb=d;this.F0a=
e;this.computed=f;this.VOc=g;this.bhc=h;this.gla=void 0;this.values=Kp(c,(m,n)=>Vp(m,k[n]));this.hb=Kp(d,(m,n)=>Cp(this.context,m,k[n],Ap(this,this.VOc[n]),{Eud:"eager"}));this.attributes=Kp(e,(m,n)=>Cp(this.context,m,k[n],Ap(this,this.bhc[n]),{Eud:"eager"}))}};__c.Cpb.prototype.MP=ba(184);Hr=__c.Hr=Symbol("$impl");Dpb=class extends vr{};
Ir=__c.Ir=class extends Dpb{bx(a,b){a=new __c.Cpb(a,this.domain,this.values,this.hb,this.attributes,this.computed,this.VOc,this.bhc,b);b={...a.values};Object.defineProperties(b,this.bmf);Object.defineProperty(b,Hr,{enumerable:!1,writable:!1,value:a});return b}connect(a,b){return a[Hr].connect(b)}snapshot(a){return a[Hr].snapshot()}destroy(a,b){a[Hr].destroy(b)}ki(a,b){return a[Hr].ki(b)}aw(a,b){return new Ir(this.values,this.hb,this.attributes,this.computed,a,b)}jb(a,b){const c=Ilb({...Kp(this.hb,
e=>e.SK),...Kp(this.attributes,e=>e.SK)}),d=Ilb({...Kp(this.values,e=>e.serializer),...Kp(this.hb,e=>e.Pk),...Kp(this.attributes,e=>e.Pk)});return this.aw(Mp(c,a),Mp(d,b))}Zf({values:a={},hb:b={},attributes:c={},computed:d}){return new Ir({...this.values,...a},{...this.hb,...b},{...this.attributes,...c},ymb(this.computed,d),$p,$p)}constructor(a,b,c,d,e,f){super(e,f);this.values=a;this.hb=b;this.attributes=c;this.computed=d;this.domain=vmb(Kp(this.values,g=>new nr((h,k)=>g.kv(h,k),h=>g.Eh(h))),Kp(this.hb,
g=>g.domain),Kp(this.attributes,g=>g.domain));this.VOc=Kp(this.hb,(g,h)=>k=>({[h]:k}));this.bhc=Kp(this.attributes,(g,h)=>k=>({[h]:k}));wmb(a,{...b,...d?.hb},{...c,...d?.attributes});a=Kp(b,(g,h)=>({enumerable:!0,configurable:!0,get(){return this[Hr].hb[h].mutable}}));c=Kp(c,(g,h)=>({enumerable:!0,configurable:!0,get(){return this[Hr].getAttribute(h)},set(k){this[Hr].setAttribute(h,k)}}));b=Kp(d?.hb||{},(g,h)=>({enumerable:!0,configurable:!0,get(){var k=this[Hr];k.gla==null&&(k.gla=xmb(k));return k.gla.hb[h]}}));
d=Kp(d?.attributes||{},(g,h)=>({enumerable:!0,configurable:!0,get(){var k=this[Hr];k.gla==null&&(k.gla=xmb(k));return k.gla.attributes[h].value},set(k){var m=this[Hr];m.gla==null&&(m.gla=xmb(m));m.gla.attributes[h].value=k}}));this.bmf={...a,...b,...c,...d}}};Ir.prototype.MP=ba(183);Ir.prototype.TB=ba(177);var zmb=new Ir({},{},{},void 0,$p,$p);__c.Jr=class extends mr{increment(a){return a}isIdentity(a){return a===0}compose(a,b){return a+b}transform(a,b){return xp(b,a)}identity(){return 0}apply(a,b){return a+b}Xl(a,b){return a-b}Eh(a){return a}Hi(a,b){return a===b}};__c.Jr.prototype.Wg=ba(164);__c.Jr.prototype.zf=ba(143);
var Epb=class extends __c.Jr{El(a){return 0-a}equals(a){return this===a||a instanceof Epb}},Fpb=class extends __c.Jr{increment(a){ia(a>=0);return super.increment(a)}compose(a,b){ia(a>=0);ia(b>=0);return super.compose(a,b)}transform(a,b){ia(a>=0);ia(b>=0);return super.transform(a,b)}El(a){ia(a>=0);return 0}apply(a,b){ia(b>=0);return super.apply(a,b)}Xl(a,b){ia(b>=0);return super.Xl(a,b)}equals(a){return this===a||a instanceof Fpb}},Gpb=new Epb,Hpb=new Fpb;var Ipb=class extends pr{T3(a){this._value.set(this.domain.apply(this._value.get(),a))}get value(){return this._value.get()}increment(a){this.xq(this.domain.increment(a))}lX(){return this.value}constructor(a,b,c){super(a);this.domain=b;this._value=new qr(c)}},Jpb=class extends vr{bx(a,b){return new Ipb(a,this.domain,b)}connect(a,b){return a.connect(b)}snapshot(a){return a.snapshot()}destroy(a,b){vp(this.domain,a.value,b)}ki(a,b){a.increment(b-a.value);return!0}},Kpb=class extends Jpb{aw(a,b){return new Kpb(a,
b)}constructor(...a){super(...a);this.domain=Gpb}},Lpb=class extends Jpb{ki(a,b){return b<a.value?!1:super.ki(a,b)}aw(a,b){return new Lpb(a,b)}constructor(...a){super(...a);this.domain=Hpb}};new Kpb(Lp,Lp);new Lpb(Lp,Lp);var Mpb;Mpb=Symbol.iterator;
__c.Kr=class{static C(a){M(a,{empty:jr})}get empty(){return this.first()==null}count(){return this.reduce(a=>a+1,0)}toArray(){return this.base.filter(this.predicate)}RC(){return new Map(this.map((a,b)=>[b,a]))}[Mpb](){return this.toArray()[Symbol.iterator]()}first(a){const b=this.predicate;return this.base.first(c=>b(c)&&(!a||a(c)))}last(a){const b=this.predicate;return this.base.last(c=>b(c)&&(!a||a(c)))}next(a,b){ia(this.has(a));const c=this.predicate;return this.base.next(a,d=>c(d)&&(!b||b(d)))}previous(a,
b){ia(this.has(a));const c=this.predicate;return this.base.previous(a,d=>c(d)&&(!b||b(d)))}Yp(a,b){const c=this.predicate;ia(c(a));ia(c(b));return this.base.Yp(a,b)}has(a){const b=this.predicate;return b(a)&&this.base.has(a)}map(a){const b=this.predicate,c=[];this.base.forEach((d,e)=>{b(d)&&c.push(a(d,e))});return c}flatMap(a){const b=this.predicate,c=[];this.base.forEach((d,e)=>{b(d)&&c.push(...a(d,e))});return c}filter(a){const b=this.predicate;return this.base.filter((c,d)=>b(c)&&a(c,d))}forEach(a){const b=
this.predicate;this.base.forEach((c,d)=>b(c)&&a(c,d))}reduce(a,b){const c=this.predicate;return this.base.reduce((d,e)=>c(e)?a(d,e):d,b)}some(a){const b=this.predicate;return this.base.some(c=>b(c)&&a(c))}every(a){const b=this.predicate;return this.base.every(c=>b(c)&&a(c))}constructor(a,b){this.base=a;this.predicate=b;__c.Kr.C(this)}};__c.Kr.prototype.n1=ba(188);__c.Kr.prototype.wY=ba(186);__c.Npb=Symbol.iterator;var Opb;Opb=Symbol.iterator;
__c.Lr=class extends pr{static C(a){M(a,{kR:jr,empty:jr,FQa:jr,nTa:jr})}wUa(a){const b=Ap(this,d=>rq(this).retain(this.ZH(c.mutable)).update(d).build()),c=Cp(this.context,this.type,a,b);return{ak:c,id:String(this.kZb++)}}Mlb(a,b){b.ak.destroy(a)}get kR(){return this.cells.filter(__c.Ya)}get(a){return this.cells[a]?.ak.mutable}ZH(a){return l(this.MU.get().get(a),"ref not found")}T3(a){const b=this.cells,c=new Map,d=new Map;var e=0;b.length<a.pre&&(b.length=a.pre);for(var f of a.ops)switch(f.type){case 0:case 2:e+=f.length;
break;case 1:b.spliceWithArray(e,0,Array(f.length));e+=f.length;break;case 3:var g=f.state,h=f.shift;b.splice(e,0,g!=null?this.wUa(g):void 0);h&&(d.set(h.Df,b[e]),c.set(h.om,e));e++;break;case 4:var k=f.delta;g=f.shift;if(k)switch(k.type){case 0:h=k.delta;h!=null&&l(b[e]).ak.wR(h);break;case 1:h=k.oldState;k=k.newState;h==null?ka(b[e]==null):this.Mlb(h,l(b[e]));b[e]=k!=null?this.wUa(k):void 0;break;default:throw new r(k);}g&&(d.set(g.Df,b[e]),c.set(g.om,e));e++;break;default:throw new r(f);}ka(d.size===
a.NWa);ka(c.size===a.NWa);for(e=0;e<a.NWa;e++)ka(d.has(e)),f=l(c.get(e)),b[f]=d.get(e);for(;b.length&&b[b.length-1]==null;)b.length--}lX(){const a=[];this.cells.forEach((b,c)=>{b!=null&&(a[c]=b.ak.snapshot())});return a}destroy(a){let b=0;this.cells.forEach((d,e)=>{d!=null&&(ia(e in a),d.ak.destroy(a[e]),b++)});const c=a.reduce(d=>d+1,0);ia(b===c)}ki(a){const b=this.cells,c=rq(this);for(let e=0;e<b.length;e++){const f=b[e];f!=null&&a[e]!=null&&this.type.ki(f.ak.mutable,a[e])||f==null&&a[e]==null?
c.retain():c.wo(f&&f.ak.snapshot(),a[e])}let d=b.length;a.forEach((e,f)=>{f>=b.length&&(c.retain(f-d),c.insert(e),d=f+1)});a=c.build();this.domain.isIdentity(a)||this.xq(c.build());return!0}get empty(){return!this.kR.length}count(){return this.kR.length}toArray(){return this.kR.map(a=>a.ak.mutable)}RC(){return new Map(this.map((a,b)=>[b,a]))}[Opb](){return this.toArray()[Symbol.iterator]()}get FQa(){return this.kR[0]?.ak.mutable}get nTa(){return this.kR[this.kR.length-1]?.ak.mutable}first(a){return a?
this.kR.find(b=>a(b.ak.mutable))?.ak.mutable:this.FQa}last(a){if(!a)return this.nTa;const b=this.kR;for(let c=b.length-1;c>=0;c--){const d=b[c];if(a(d.ak.mutable))return d.ak.mutable}}next(a,b){const c=this.cells;for(a=this.ZH(a)+1;a<c.length;a++){const d=c[a];if(d&&(!b||b(d.ak.mutable)))return d.ak.mutable}}previous(a,b){const c=this.cells;for(a=this.ZH(a)-1;a>=0;a--){const d=c[a];if(d&&(!b||b(d.ak.mutable)))return d.ak.mutable}}Yp(a,b){a=this.ZH(a);b=this.ZH(b);return a<b?-1:a>b?1:0}has(a){return this.MU.get().has(a)}insertAt(a,
b){this.xq(rq(this).retain(a).insert(b).build());return this.cells[a].ak.mutable}set(a,b){ia(a>=0);a>=this.cells.length&&(this.cells.length=a+1);var c=this.cells[a];c=c!=null?c.ak.snapshot():void 0;this.xq(rq(this).retain(a).wo(c,b).build());return this.cells[a].ak.mutable}replace(a,b){a=this.ZH(a);return this.set(a,b)}append(a){return this.insertBefore(void 0,a)}prepend(a){return this.tva(void 0,a)}tva(a,b){return this.insertAt(a?this.ZH(a)+1:0,b)}insertBefore(a,b){return this.insertAt(a?this.ZH(a):
this.cells.length,b)}delete(a){a=rq(this).retain(this.ZH(a)).JM(this.type.snapshot(a)).build();this.xq(a)}moveTo(a,b){const c=this.ZH(b);if(c===a)return b;this.xq(c<a?rq(this).retain(c).retain({Df:0,om:1}).retain(a-c-1).expand({Df:1,om:0}).build():rq(this).retain(a).expand({Df:0,om:1}).retain(c-a).retain({Df:1,om:0}).build());return b}map(a){return this.kR.map(b=>a(b.ak.mutable,b.id))}flatMap(a){return this.kR.flatMap(b=>a(b.ak.mutable,b.id))}filter(a){return this.kR.filter(b=>a(b.ak.mutable,b.id)).map(b=>
b.ak.mutable)}forEach(a){this.kR.forEach(b=>b!=null&&a(b.ak.mutable,b.id))}reduce(a,b){return this.kR.reduce((c,d)=>a(c,d.ak.mutable,d.id),b)}some(a){return this.kR.some(b=>a(b.ak.mutable,b.id))}every(a){return this.kR.every(b=>a(b.ak.mutable,b.id))}constructor(a,b,c,d){super(a);this.type=b;this.domain=c;this.cells=(__c.Lr.C(this),void 0);this.kZb=0;this.MU=jr(()=>{const e=new Map;this.cells.forEach((f,g)=>f&&e.set(f.ak.mutable,g));return e});ia(!d.length||d[d.length-1]!=null);this.cells=kr.array([...d.map(e=>
this.wUa(e))],{deep:!1})}};__c.aa=__c.Lr.prototype;__c.aa.rG=ba(198);__c.aa.I0=ba(193);__c.aa.cSb=ba(189);__c.aa.n1=ba(187);__c.aa.wY=ba(185);
tq=__c.tq=class extends vr{le(){return this.domain.le()}Um(a){return a}bx(a,b){return new __c.Lr(a,this.type,this.domain,b)}connect(a,b){return this.Um(a).connect(b)}snapshot(a){return this.Um(a).snapshot()}destroy(a,b){this.Um(a).destroy(b)}ki(a,b){return this.Um(a).ki(b)}aw(a,b){return new tq(this.type,a,b)}constructor(a,b,c){super(b,c);this.type=a;this.domain=sr.of(this.type.domain)}};tq.prototype.TB=ba(176);tq.prototype.zf=ba(142);__c.Ppb=Symbol.iterator;__c.Mr=class extends mr{isIdentity(a){throw new r(a);}compose(a){throw new r(a);}transform(a){throw new r(a);}El(a){throw new r(a);}identity(a){throw new r(a);}apply(a){throw new r(a);}Xl(a){throw new r(a);}Eh(a){throw new r(a);}Hi(a){throw new r(a);}equals(a){return this===a||a instanceof __c.Mr}};__c.Mr.prototype.Wg=ba(163);__c.Mr.prototype.zf=ba(141);__c.Qpb=new __c.Mr;var Rpb,Spb,Wpb,Xpb,Ypb,Zpb,Qr,aqb,bqb,$pb;Rpb=class{};Nr=__c.Nr=class extends Rpb{get length(){return this.state.length}K9b(a){Dmb(this,a);return this.state.charAt(a)}fW(a){Emb(this,a);return[new Nr(this.state.substring(0,a)),new Nr(this.state.substring(a))]}BJ(){return this}toString(){return this.state}constructor(a){super();this.state=a;this.type=0;ia(!!a)}};
Aq=__c.Aq=class extends Rpb{get length(){return 1}K9b(a){Dmb(this,a);return this.state}fW(a){Emb(this,a);throw Error();}BJ(a){return new Aq(a(this.state))}toString(){return`[${this.state}]`}constructor(a){super();this.state=a;this.type=1}};
Or=__c.Or=class extends Rpb{get length(){return this.state}K9b(a){Dmb(this,a)}fW(a){Emb(this,a);return[new Or(a),new Or(this.state-a)]}BJ(){return this}toString(){return this.state<=7?"\u00b7".repeat(this.state):`\u00b7\u00b7(${this.state})\u00b7\u00b7`}constructor(a){super();this.state=a;this.type=2;ia(!!a)}};
Pr=__c.Pr=class{get length(){return this.zea+this.Kq+this.IDb}zd(a){return new Spb(this,a)}cursor(a,b){return new __c.Tpb(this,a,b)}BJ(a){const b=this.Ox.map(c=>c.BJ(a));return new Pr(b,this.zea,this.Kq,this.IDb)}Qa(){return this.Ox.map(a=>a.type===0?a.state:"").join("")}forEach(a,b){for(const c of this.Ox)switch(c.type){case 0:b.Qa&&b.Qa(c.state);break;case 1:b.item(c.state);break;case 2:b.Qi&&b.Qi(c.state);break;default:throw new r(c);}(a=Math.max(0,a-this.length))&&b.Qi&&b.Qi(a)}map(a,b){const c=
this.Ox.map(d=>{switch(d.type){case 0:return b.Qa(d.state);case 1:return b.item(d.state);case 2:return b.Qi(d.state);default:throw new r(d);}});(a=Math.max(0,a-this.length))&&c.push(b.Qi(a));return c}reduce(a,b){return this.Ox.reduce((c,d)=>{switch(d.type){case 0:return a.Qa(c,d.state);case 1:return a.item(c,d.state);case 2:return a.Qi?a.Qi(c,d.state):c;default:throw new r(d);}},b)}slice(a,b){ia(0<=a&&a<=b,"invalid range: [{}, {})",a,b);var c=this.length;if(0===a&&b>=c)return this;if(a===b||a>=c)return __c.Upb;
const d=new __c.Vpb;c=this.cursor(b);c.DJ(a);c.DJ(b-a,{item:e=>d.item(e),Qa:e=>d.Ad(e),Qi:e=>d.h9(e)});return d.build()}toString(){return this.Ox.join("")}constructor(a,b,c,d){this.Ox=a;this.zea=b;this.Kq=c;this.IDb=d;a=a.length?a[a.length-1]:void 0;ia(!a||a.type!==2)}};Pr.prototype.lWb=ba(199);__c.Upb=new Pr([],0,0,0);
__c.Vpb=class{fqa(a){this.mode!==a&&(this.flush(),this.mode=a)}flush(){if(this.mode!=null){switch(this.mode){case 0:this.Ox.push(new Nr(this.azb));this.HKb+=this.azb.length;this.azb="";break;case 2:this.Ox.push(new Or(this.bzb));this.$7b+=this.bzb;this.bzb=0;break;default:throw new r(this.mode);}this.mode=void 0}}region(a){switch(a.type){case 0:return this.Ad(a.state);case 1:return this.item(a.state);case 2:return this.h9(a.state);default:throw new r(a);}}Ad(a){a&&(this.fqa(0),this.azb+=a);return this}item(a){this.flush();
this.Ox.push(new Aq(a));this.PCc++;return this}h9(a){a>0&&(this.fqa(2),this.bzb+=a);return this}append(a,b=0){a.forEach(b,{Qa:c=>this.Ad(c),item:c=>this.item(c),Qi:c=>this.h9(c)});return this}get length(){return this.HKb+this.PCc+this.$7b}build(){this.mode!==2&&this.flush();return this.length?new Pr(this.Ox,this.HKb,this.PCc,this.$7b):__c.Upb}constructor(){this.Ox=[];this.mode=void 0;this.azb="";this.$7b=this.PCc=this.HKb=this.bzb=0}};
Spb=class{get head(){return this.Gm}get prevValue(){return this.Zxb&&this.Zxb.K9b(this.Zxb.length-1)}eo(a){const b=l(this.Gm),c=b.length;ia(0<a&&a<=c,"{} \u2209 (0, {}]",a,c);if(a<c)return a=b.fW(a),this.Gm=a[1],this.Zxb=a[0];this.Gm=this.Ox[this.i++];return this.Zxb=b}finish(){ka(this.Gm==null,"unconsumed reader head: {}",this.Gm)}constructor(a,b=0){this.i=0;this.Zxb=void 0;this.Ox=(b=Math.max(0,b-a.length))?[...a.Ox,new Or(b)]:a.Ox;this.Gm=this.Ox.length?this.Ox[this.i++]:void 0}};
__c.Tpb=class{get prevValue(){return this.zd.prevValue}move(a,b,c){for(c=__c.Fmb(this.nub,c);a;){var d=this.zd.head;if(d)switch(d=this.zd.eo(b||d.type!==2?Math.min(d.length,a):d.length),d.type){case 0:c&&c.Qa&&c.Qa(d.state);a-=d.length;break;case 1:c&&c.item&&c.item(d.state);a-=d.length;break;case 2:c&&c.Qi&&c.Qi(d.state);b&&(a-=d.length);break;default:throw new r(d);}else ia(b,"not enough characters or items: {}",a),c&&c.Qi&&c.Qi(a),a-=a}}DJ(a,b){this.move(a,!0,b)}Bn(a,b){this.move(a,!1,b)}finish(){this.zd.finish()}constructor(a,
b,c){this.nub=c;this.zd=a.zd(b)}};__c.Tpb.prototype.mUa=ba(200);__c.Tpb.prototype.rG=ba(197);Wpb=class{};Xpb=class extends Wpb{get lha(){return this.length}get p7(){return this.length}g6b(a){Gmb(this,a);return this.fW(a)}f6b(a){Hmb(this,a);return this.fW(a)}fW(a){return[new Xpb(a),new Xpb(this.length-a)]}map(){return this}toString(){return`R${this.length}`}constructor(a){super();this.length=a;this.type=0}};
Ypb=class extends Wpb{get lha(){return 1}get p7(){return 1}g6b(a){Gmb(this,a);throw Error();}f6b(a){Hmb(this,a);throw Error();}map(a){return new Ypb(a(this.delta))}toString(){return`U[${this.delta}]`}constructor(a){super();this.delta=a;this.type=1}};
Zpb=class extends Wpb{get lha(){return 0}get p7(){return this.state.length}g6b(a){Gmb(this,a);throw Error();}f6b(a){Hmb(this,a);const [b,c]=this.state.fW(a);return[new Zpb(b),new Zpb(c)]}map(a,b){return new Zpb(this.state.BJ(b))}toString(){switch(this.state.type){case 0:case 1:return`I${this.state}`;case 2:return`X${this.state.length}`;default:throw new r(this.state);}}constructor(a){super();this.state=a;this.type=2}};
Qr=class extends Wpb{get lha(){return this.oldState.length}get p7(){return this.newState.length}g6b(a){Gmb(this,a);return this.fW(a)}f6b(a){Hmb(this,a);return this.fW(a)}fW(a){const [b,c]=this.oldState.fW(a),[d,e]=this.newState.fW(a);return[new Qr(b,d),new Qr(c,e)]}map(a,b){return new Qr(this.oldState.BJ(b),this.newState.BJ(b))}toString(){return this.oldState.type===2?this.newState.type===2?`\u25e0${this.oldState.state}`:`\u2191${this.newState}`:this.newState.type===2?`\u2193${this.oldState}`:`\u25e1[${this.oldState}|${this.newState}]`}constructor(a,
b){super();this.oldState=a;this.newState=b;this.type=3;Bo(a.length,b.length)}};
aqb=class{zd(a,b){return new $pb(this,a,b)}forEach(a,b=this.pre,c=this.post){for(const d of this.ops)switch(d.type){case 0:a.retain&&a.retain(d.length);break;case 1:a.update&&a.update(d.delta);break;case 2:a.insert&&a.insert(d.state);break;case 3:a.wo&&a.wo(d.oldState,d.newState);break;default:throw new r(d);}(b=Math.max(0,b-this.pre,c-this.post))&&a.retain&&a.retain(b)}map(a){return this.ops.map(b=>{switch(b.type){case 0:return a.retain(b.length);case 1:return a.update(b.delta);case 2:return a.insert(b.state);
case 3:return a.wo(b.oldState,b.newState);default:throw new r(b);}})}BJ(a,b){const c=this.ops.map(d=>d.map(a,b));return new aqb(c,this.pre,this.post)}toString(){return`[${this.ops.toString()}]`}constructor(a,b,c){this.ops=a;this.pre=b;this.post=c}};bqb=new aqb([],0,0);
__c.cqb=class{fqa(a,b,c){if(this.H7!==a||this.XHc!==b||this.mHc!==c)switch(this.flush(),this.H7=a,this.XHc=b,this.mHc=c,a){case 0:break;case 2:c===0&&(this.q2="");break;case 3:b===0&&(this.FGa="");c===0&&(this.q2="");break;default:throw new r(a);}}flush(){if(this.H7!=null){switch(this.H7){case 0:this.push(new Xpb(this.acc));this.acc=0;break;case 2:var a=this.q2!=null?new Nr(this.q2):new Or(this.acc);this.push(new Zpb(a));this.q2=void 0;this.acc=0;break;case 3:a=this.FGa!=null?new Nr(this.FGa):new Or(this.acc);
const b=this.q2!=null?new Nr(this.q2):new Or(this.acc);this.push(new Qr(a,b));this.q2=this.FGa=void 0;this.acc=0;break;default:throw new r(this.H7);}this.mHc=this.XHc=this.H7=void 0}}push(a){this.ops.push(a);this.pre+=a.lha;this.post+=a.p7}op(a){switch(a.type){case 0:return this.retain(a.length);case 1:return this.update(a.delta);case 2:return this.Zma(a.state);case 3:return yq(this,a.oldState,a.newState);default:throw new r(a);}}Zma(a){switch(a.type){case 0:return this.insert(a.state);case 1:return this.insert(a.state);
case 2:return this.expand(a.state);default:throw new r(a);}}retain(a){ia(a>=0);a&&(this.fqa(0),this.acc+=a);return this}update(a){if(this.isIdentity(a))return this.retain(1);this.flush();this.ops.push(new Ypb(a));this.pre++;this.post++;return this}expand(a){ia(a>=0);a&&(this.fqa(2,void 0,2),this.acc+=a);return this}insert(a){typeof a==="string"?a&&(this.fqa(2,void 0,0),this.q2+=a):(this.flush(),this.push(new Zpb(new Aq(a))));return this}q8(a){ia(a>=0);a&&(this.fqa(3,2,2),this.acc+=a);return this}Pza(a){typeof a===
"string"?a&&(this.fqa(3,2,0),this.acc+=a.length,this.q2+=a):(this.flush(),this.push(new Qr(new Or(1),new Aq(a))));return this}JM(a){typeof a==="string"?a&&(this.fqa(3,0,2),this.acc+=a.length,this.FGa+=a):(this.flush(),this.push(new Qr(new Aq(a),new Or(1))));return this}wo(a,b){typeof a==="string"?typeof b==="string"?(Bo(a.length,b.length),a&&(this.fqa(3,0,0),this.FGa+=a,this.q2+=b)):(Bo(a.length,1),this.flush(),this.push(new Qr(new Nr(a),new Aq(b)))):typeof b==="string"?(Bo(1,b.length),this.flush(),
this.push(new Qr(new Aq(a),new Nr(b)))):(this.flush(),this.push(new Qr(new Aq(a),new Aq(b))));return this}build(){this.H7!==0&&this.flush();return new aqb(this.ops,this.pre,this.post)}constructor(a){this.isIdentity=a;this.ops=[];this.post=this.pre=0;this.mHc=this.XHc=this.H7=void 0;this.acc=0;this.q2=this.FGa=void 0}};__c.cqb.prototype.FEa=ba(203);
$pb=class{get head(){return this.Gm}finish(){ka(this.Gm==null)}constructor(a,b=0,c=0){this.ops=(b=Math.max(0,b-a.pre,c-a.post))?[...a.ops,new Xpb(b)]:a.ops;this.i=0;this.Gm=this.ops[this.i++]}};
Rr=__c.Rr=class extends mr{le(){return new __c.cqb(a=>this.component.isIdentity(a))}ee(){return new __c.Vpb}id(){return bqb}OX(){return __c.Upb}isIdentity(a){return!a.ops.length||a.ops.every(b=>b.type===0)}compose(a,b){if(!a.ops.length)return b;if(!b.ops.length)return a;const c=a.zd(0,b.pre),d=b.zd(a.post,0),e=this.le();for(;;){let g=c.head;var f=d.head;if(!f)break;f.type===2?(g=void 0,f=zq(d)):g&&(f=Math.min(g.p7,f.lha),g=Jmb(c,f),f=__c.Imb(d,f));if(f.type===2)e.Zma(f.state);else if(g)g.type===2?
e.Zma(Lmb(this,g.state,f)):f.type===0?e.op(g):g.type===0?e.op(f):g.type===1?f.type===1?e.update(this.component.compose(g.delta,f.delta)):yq(e,Mmb(this,f.oldState,g),f.newState):yq(e,g.oldState,Lmb(this,g.newState,f));else throw Error(`length mismatch: ${a} ; ${b}`);}c.finish();d.finish();return e.build()}transform(a,b){if(!a.ops.length||!b.ops.length)return xp(b,a);const c=this.le(),d=this.le(),e=a.zd(b.pre,0),f=b.zd(a.pre,0),g=wp.ts();for(;;){var h=e.head,k=f.head;if(!h&&!k)break;h&&h.type===2?(h=
zq(e),k=void 0):k&&k.type===2?(h=void 0,k=zq(f)):h&&k&&(k=Math.min(h.lha,k.lha),h=__c.Imb(e,k),k=__c.Imb(f,k));if(h&&h.type===2)d.retain(h.p7),c.op(h);else if(k&&k.type===2)d.op(k),c.retain(k.p7);else if(h&&k)h.type===0||k.type===0?(d.op(k),c.op(h)):h.type===3?(d.retain(h.p7),yq(c,Lmb(this,h.oldState,k),h.newState),Vkb(g,k.type===3?!__c.Bq(this,h.newState,k.newState):!this.component.isIdentity(k.delta))):k.type===3?(yq(d,Lmb(this,k.oldState,h),k.newState),c.retain(k.p7),Wkb(g,!this.component.isIdentity(h.delta))):
(h=zp(g,this.component.transform(h.delta,k.delta)),d.update(h.ru),c.update(h.$u));else throw Error(`length mismatch (${a} x ${b})`);}e.finish();f.finish();return g.build(d.build(),c.build())}El(a){if(!a.ops.length)return a;const b=this.le();for(const c of a.ops)switch(c.type){case 0:b.retain(c.length);break;case 1:b.update(this.component.El(c.delta));break;case 2:a=c.state;a.type===2?b.retain(a.length):b.JM(a.state);break;case 3:a=c.oldState;const d=c.newState;a.type===2&&d.type===2?b.retain(a.length):
yq(b,d,a);break;default:throw new r(c);}return b.build()}identity(){return bqb}apply(a,b){if(!b.ops.length)return a;const c=this.ee(),d=a.zd(b.pre);for(a=b.zd(a.length,0);;){b=d.head;var e=a.head;if(!e)break;e.type===2?(b=void 0,e=zq(a)):b&&(e=Math.min(b.length,e.lha),b=d.eo(e),e=__c.Imb(a,e));if(e.type===2)c.region(e.state);else if(b)c.region(Lmb(this,b,e));else break}d.finish();a.finish();return c.build()}Xl(a,b){if(!b.ops.length)return a;const c=this.ee(),d=a.zd(b.post);for(a=b.zd(0,a.length);;){b=
d.head;var e=a.head;if(!b||!e)break;e.type===2?(b=d.eo(e.p7),e=zq(a)):(e=Math.min(b.length,e.p7),b=d.eo(e),e=Jmb(a,e));if(e.type===2)__c.Kmb(this,b,e.state);else if(b)c.region(Mmb(this,b,e));else break}d.finish();a.finish();return c.build()}Eh(a){return this.component===__c.Qpb&&a instanceof Pr?a:a.BJ(b=>this.component.Eh(b))}Hi(a,b){if(a===b)return!0;if(a.length!==b.length)return!1;a=a.zd();b=b.zd();let c=a.head,d=b.head;for(;c||d;){if(!c||!d||!__c.Bq(this,c,d))return!1;a.eo(c.length);b.eo(d.length);
c=a.head;d=b.head}return!0}equals(a){return this===a||a instanceof Rr&&this.component.equals(a.component)}constructor(a){super();this.component=a}};Rr.prototype.UB=ba(205);Rr.prototype.Fwb=ba(181);Rr.prototype.Wg=ba(162);Rr.prototype.zf=ba(140);__c.Cq=new Rr(__c.Qpb);Dq=__c.Dq={item:a=>{throw new r(a);}};var dqb;dqb=class{forEach(a,b=this.pre,c=this.post){this.ops.forEach(d=>{switch(d.type){case 0:a.retain?.(d.Qa);break;case 2:a.insert?.(d.Qa);break;case 1:a.delete?.(d.Qa);break;default:throw new r(d);}});(b=Math.max(0,b-this.pre,c-this.post))&&a.retain?.(b)}static ts(){return new Eq}constructor(a,b,c){this.pre=a;this.post=b;this.ops=c}};
Eq=__c.Eq=class{static insert(a,b){return(new Eq).retain(a).insert(b).build()}static delete(a,b){return(new Eq).retain(a).delete(b).build()}retain(a){ia(a>=0);a>0&&(this.Yca(0),this.Gbb+=a);return this}insert(a){a.length>0&&(this.Yca(2),this.hsb+=a);return this}delete(a){a>0&&(this.Yca(1),this.M2a+=a);return this}Yca(a){if(this.mode!==a){switch(this.mode){case 0:var b=this.ops,c=b.push,d=this.Gbb;ia(d>0);c.call(b,{type:0,Qa:d});this.pre+=this.Gbb;this.post+=this.Gbb;this.Gbb=0;break;case 2:b=this.ops;
c=b.push;d=this.hsb;ia(d.length>0);c.call(b,{type:2,Qa:d});this.post+=this.hsb.length;this.hsb="";break;case 1:b=this.ops;c=b.push;d=this.M2a;ia(d>0);c.call(b,{type:1,Qa:d});this.pre+=this.M2a;this.post+=this.M2a;this.M2a=0;break;case void 0:break;default:throw new r(this.mode);}this.mode=a}}build(){this.mode!==0&&this.Yca();return new dqb(this.pre,this.post,this.ops)}constructor(){this.ops=[];this.post=this.pre=0;this.mode=void 0;this.Gbb=0;this.hsb="";this.M2a=0}};__c.eqb=class extends pr{static C(a){M(a,{Qa:jr})}get Qa(){return this.state.get().Qa()}insert(a,b){this.xq(__c.Nmb(this.state.get(),Eq.insert(a,b)))}delete(a,b){this.xq(__c.Nmb(this.state.get(),Eq.delete(a,b)))}T3(a){const b=Omb(this.state.get(),a);this.state.set(__c.Cq.apply(this.state.get(),a));this.subject.next(b)}lX(){return this.state.get()}destroy(a){ia(__c.Cq.Hi(this.state.get(),a))}ki(a){return __c.Cq.Hi(this.state.get(),a)}constructor(a,b,c){super(a);this.domain=b;this.state=(__c.eqb.C(this),
void 0);this.subject=new __c.vob;this.state=new qr(c)}};__c.eqb.prototype.EE=ba(212);var fqb=class extends ur{Um(a){return a}bx(a,b){return new __c.eqb(a,this.domain,b)}connect(a,b){return this.Um(a).connect(b)}snapshot(a){return this.Um(a).snapshot()}destroy(a,b){this.Um(a).destroy(b)}ki(a,b){return this.Um(a).ki(b)}constructor(){super();this.domain=__c.Cq}};new fqb;var gqb,mqb,hqb,iqb;gqb=Qmb({},{});
__c.lqb=class{zd(a){return new hqb(this,a)}cursor(a,b){return new iqb(this,a,b)}forEach(a,{grad:b,Bc:c}){for(const d of this.items)switch(d.type){case 0:b&&b(d.XF,d.BH);break;case 1:c&&c(d.length);break;default:throw new r(d);}(a=Math.max(0,a-this.length))&&c&&c(a)}map(a,{grad:b,Bc:c}){const d=this.items.map(e=>{switch(e.type){case 0:return b(e.XF,e.BH);case 1:return c(e.length);default:throw new r(e);}});(a=Math.max(0,a-this.length))&&d.push(c(a));return d}reduce({grad:a,Bc:b},c){return this.items.reduce((d,
e)=>{switch(e.type){case 0:return a?a(d,e.XF,e.BH):d;case 1:return b?b(d,e.length):d;default:throw new r(e);}},c)}slice(a,b){ia(0<=a&&a<=b,"invalid range: [{}, {})",a,b);var c=this.length;if(0===a&&b>=c)return this;if(a===b||a>=c)return __c.jqb;const d=new __c.kqb;c=this.cursor(b);c.move(a);d.attrs(c.SP,c.Xoa);c.move(b-a,{cells:(e,f,g,h)=>d.attrs(f,h).Bc(e)});return d.build()}toString(){return`${this.items.map(a=>{switch(a.type){case 0:const b=[];for(const [c,d]of Object.entries(a.BH))b.push(`${c}:${d!=
null?`<${d}|`:""}`);return`G{${b.join(",")}}`;case 1:return`R${a.length}`;default:throw new r(a);}}).join("")}`}constructor(a,b,c={}){this.items=a;this.length=b;this.attributes=c;a=a.length?a[a.length-1]:void 0;ia(!a||a.type!==1)}};__c.lqb.prototype.DXb=ba(213);__c.jqb=new __c.lqb([],0);
__c.nqb=class{zd(a,b){return new mqb(this,a,b)}forEach(a){for(const b of this.ops)switch(b.type){case 0:a.retain(b.length,b.UI);break;case 1:a.insert(b.length,b.UI);break;default:throw new r(b);}}map(a){return this.ops.map(b=>{switch(b.type){case 0:return a.retain(b.length,b.UI);case 1:return a.insert(b.length,b.UI);default:throw new r(b);}})}equals(a){if(this===a)return!0;if(this.pre!==a.pre||this.post!==a.post||this.ops.length!==a.ops.length)return!1;for(let b=0;b<this.ops.length;b++){const c=this.ops[b],
d=a.ops[b];if(c!==d)switch(c.type){case 0:case 1:if(c.type!==d.type||c.length!==d.length||!Umb(c.UI,d.UI))return!1;break;default:throw new r(c);}}return!0}toString(){return`[${this.ops.map(a=>{let b;switch(a.type){case 0:b="R";break;case 1:b="I";break;default:throw new r(a);}const c=[];__c.Tmb(a.UI,({r:e},f)=>{e?c.push(`+"${f.toString()}":${e.RN!=null?`"${e.RN}"`:"null"}=>${e.$L!=null?`"${e.$L}"`:"null"}`):c.push(`-"${f.toString()}"`)});const d=c.length?`{${c.join(",")}}`:"";return`${b}${a.length}${d}`}).toString()}]`}constructor(a,
b,c){this.ops=a;this.pre=b;this.post=c}};__c.oqb=new __c.nqb([],0,0);
mqb=class{get TP(){return this.PHb}get next(){return this._next}uu(a,b){const c=l(this._next);ka(c.type===a,"{} != {}",c.type,a);ia(0<b&&b<=c.length,"{} \u2209 ({}, {}]",b,0,c.length);for(const [d,e]of Object.entries(c.UI)){const f=e&&e.r;f?this.PHb[d]=f:delete this.PHb[d]}b<c.length?this._next={type:a,length:c.length-b,UI:{}}:(this._next=this.i<this.input.length?this.input[this.i++]:void 0,!this._next&&this.pdb&&(this._next=Vmb(this.pdb,Co(this.PHb,()=>({r:void 0}))),this.pdb=0));return c.UI}GA(a){return this.uu(0,
a)}hla(a){return this.uu(1,a)}finish(){ka(!this._next)}constructor(a,b=0,c=0){this.i=0;this.PHb={};this.input=a.ops;this._next=this.i<this.input.length?this.input[this.i++]:void 0;this.pdb=Math.max(0,b-a.pre,c-a.post);!this._next&&this.pdb&&(this._next=Vmb(this.pdb),this.pdb=0)}};
hqb=class{get head(){return this.Gm}get SP(){return this.xK}get Xoa(){return this.Tec}eo(a){var b=this.Gm;if(!b||b.type!==1)throw Error(`expected cell, found: ${b&&b.type}`);b=b.length;a=Math.min(a,b);this.Gm=a<b?Rmb(b-a):this.input[this.i++];return a}apply(a){__c.Gq(a.XF,a.BH,(b,c,d)=>{c!=null&&d!=null?(this.xK[b]=c,this.Tec[b]=d):(delete this.xK[b],delete this.Tec[b])})}ov(){const a=this.Gm;if(!a||a.type===1)return gqb;this.Gm=this.input[this.i++];this.apply(a);return a}finish(){ka(!this.Gm)}constructor(a,
b=0){this.i=0;this.xK={};this.Tec={};b=Math.max(0,b-a.length);this.length=a.length+b;this.input=b?[...a.items,Rmb(b)]:a.items;this.Gm=this.input.length?this.input[this.i++]:void 0}};
iqb=class{get CC(){return this.zd.length-this.bka}get SP(){return this.zd.SP}get Xoa(){return this.zd.Xoa}move(a,b){var c=this.nub;b=c?b?{cells:__c.xq(c.cells,b.cells)}:c:b;ia(a>=0,"{} < 0",a);a=this.bka+a;for(ia(a<=this.zd.length,"{} > {}",a,this.zd.length);this.bka<a;){c=this.zd.ov();const d=this.zd.eo(a-this.bka);this.bka+=d;b&&b.cells&&b.cells(d,c.XF,this.SP,c.BH,this.Xoa)}}finish(){this.zd.ov();this.zd.finish()}constructor(a,b,c){this.nub=c;this.bka=0;this.zd=new hqb(a,b)}};
__c.kqb=class{uk(a,b,c){this.eqa[a]!==c?(this.XF[a]=b,this.BH[a]=c):(delete this.XF[a],delete this.BH[a]);return this}attrs(a,b){__c.Gq(a,b,(c,d,e)=>this.uk(c,d,e));return this}Bc(a){a>0&&(Object.keys(this.XF).length&&(this.length&&(this.items.push(Rmb(this.length)),this.length=0),this.items.push(Qmb(this.XF,this.BH)),__c.Gq(this.XF,this.BH,(b,c,d)=>{c!=null?(this.as[b]=c,this.eqa[b]=d,(this.attributes[b]??(this.attributes[b]=new Set)).add(c)):(delete this.as[b],delete this.eqa[b])}),this.XF={},this.BH=
{}),this.length+=a,this.k9+=a);return this}append(a,b=0){a.forEach(b,{grad:(c,d)=>this.attrs(c,d),Bc:c=>this.Bc(c)});return this}build(){for(const a of __c.Fq(this.as))this.uk(a,void 0,void 0);for(const a of __c.Fq(this.XF))this.uk(a,void 0,void 0);Object.keys(this.XF).length?(ka(!!this.length,"attributes still open: {}",this.XF),this.items.push(Rmb(this.length)),this.items.push(Qmb(this.XF,this.BH)),this.length=0,this.XF={},this.BH={}):this.k9-=this.length;return new __c.lqb(this.items,this.k9,this.attributes)}constructor(){this.items=
[];this.attributes={};this.as={};this.eqa={};this.length=this.k9=0;this.XF={};this.BH={}}};var Iq,pqb,qqb,rqb,Zmb,tqb,sqb,vqb,wqb,uqb;Iq=class{static from(a){if(a instanceof Iq)return a;if(Array.isArray(a)){const [b,c]=a;return new Iq(b,c)}return new Iq(a.from,a.to)}toString(){return`[${this.from},${this.to}]`}constructor(a,b){this.from=a;this.to=b}};
pqb=class{get isEmpty(){return!this.We.size}slice(a,b){ia(0<=a&&a<=b,"invalid range: [{}, {})",a,b);const c=new Map;for(const [e,f]of this.We){var d=b<f.from||f.to<a?void 0:new Iq(Math.max(f.from,a)-a,Math.min(f.to,b)-a);d&&c.set(e,d)}return new pqb(c)}toString(){return[...this.We].map(([a,b])=>`"${a}":${b}`).join(",")}constructor(a=new Map){this.We=a}};qqb=new pqb;
rqb=class{range(a,b){b?this.Vda.set(a,Iq.from(b)):this.Vda.delete(a);return this}We(a){a.forEach((b,c)=>this.Vda.set(c,Iq.from(b)));return this}build(){return this.Vda.size?new pqb(this.Vda):qqb}constructor(){this.Vda=new Map}};Zmb=class{toString(){return`${this.mha||"_"}->${this.eha||"_"}`}constructor(a,b){this.mha=a;this.eha=b}};tqb=class{toString(){return`${sqb[this.type]}${this.length}`}constructor(a,b){this.type=a;this.length=b}};sqb={[0]:"R",[1]:"I"};
vqb=class{zd(a,b){return new uqb(this,a,b)}toString(){const a=this.Ska.join(""),b=[...this.We].map(([c,d])=>`"${c}":${d}`).join(",");return`{${a}|${b}}`}constructor(a,b,c,d){this.Ska=a;this.We=b;this.pre=c;this.post=d}};wqb=new vqb([],new Map,0,0);
__c.xqb=class{append(a,b){ia(b>=0,"{} < 0",b);if(!b)return this;this.H7===a?this.length+=b:(this.H7!=null&&this.ops.push(new tqb(this.H7,this.length)),this.H7=a,this.length=b);switch(a){case 0:this.pre+=b;this.post+=b;break;case 1:this.post+=b;break;default:throw new r(a);}return this}retain(a){return this.append(0,a)}insert(a){return this.append(1,a)}createRange(a,b){return this.bya(a,void 0,b)}bya(a,b,c){b=new Zmb(b&&Iq.from(b),c&&Iq.from(c));this.We.set(a,b);return this}cya(a){a.forEach((b,c)=>
this.We.set(c,b));return this}build(){const a=this.H7,b=this.length;a===0?(this.pre-=b,this.post-=b):a!=null&&this.ops.push(new tqb(a,b));return this.ops.length||this.We.size?new vqb(this.ops,this.We,this.pre,this.post):wqb}constructor(){this.ops=[];this.H7=void 0;this.post=this.pre=this.length=0;this.We=new Map}};__c.xqb.prototype.SOa=ba(216);
uqb=class{get next(){return this._next}get SMc(){return this.OHb}get p1b(){return this.R_a}get qSa(){return this.R_a-this.OHb}uu(a,b){const c=l(this._next);ka(c.type===a,"{} != {}",c.type,a);ia(0<b&&b<=c.length,"{} \u2209 ({}, {}]",b,0,c.length);this._next=b<c.length?new tqb(a,c.length-b):this.i<this.input.length?this.input[this.i++]:void 0}GA(a){this.uu(0,a);this.OHb+=a;this.R_a+=a}hla(a){this.uu(1,a);this.R_a+=a}finish(){ka(!this._next)}constructor(a,b=0,c=0){this.R_a=this.OHb=this.i=0;this.input=
(b=Math.max(0,b-a.pre,c-a.post))?[...a.Ska,new tqb(0,b)]:a.Ska;this._next=this.i<this.input.length?this.input[this.i++]:void 0}};
Sr=__c.Sr=class extends mr{ee(){return new rqb}le(){return new __c.xqb}isIdentity(a){return!a.Ska.length&&!a.We.size}compose(a,b){if(this.isIdentity(a))return b;if(this.isIdentity(b))return a;const c=new Map,d=new Map,e=new Map;for(var f of $mb(a.We,b.We)){var g=a.We.get(f),h=b.We.get(f);g&&h?(ia(Hq(g.eha,h.mha)),e.set(f,new Zmb(g.mha,h.eha))):g?c.set(f,g):h&&d.set(f,h)}f=this.le();g=a.zd(0,b.pre);a=b.zd(a.post,0);b=g.next;for(h=a.next;h;){if(h.type===1)b=h.length,Jq(c,void 0,g.p1b+a.qSa,b),a.hla(b),
f.insert(b);else if(b)b.type===1?(b=Math.min(b.length,h.length),Jq(d,a.SMc-g.qSa,void 0,-b),g.hla(b),a.GA(b),f.insert(b)):(b=Math.min(b.length,h.length),g.GA(b),a.GA(b),f.retain(b));else throw Error("length mismatch");b=g.next;h=a.next}g.finish();a.finish();f.cya(e);f.cya(c);f.cya(d);return f.build()}transform(a,b){if(this.isIdentity(a)||this.isIdentity(b))return xp(b,a);var c=new Map,d=new Map;const e=new Map,f=wp.ts();for(var g of $mb(a.We,b.We)){var h=a.We.get(g),k=b.We.get(g);h&&k?(ia(Hq(h.mha,
k.mha)),e.set(g,new Zmb(k.eha,h.eha)),Vkb(f)):h?c.set(g,h):k&&d.set(g,k)}h=a.zd(b.pre,0);k=b.zd(a.pre,0);g=this.le();const m=this.le();var n=h.next;let p=k.next;for(;n||p;){if(n&&n.type===1)n=n.length,Jq(d,k.SMc+h.qSa,k.p1b+h.qSa,n),h.hla(n),m.retain(n),g.insert(n);else if(p&&p.type===1)n=p.length,Jq(c,h.SMc+k.qSa,h.p1b+k.qSa,n),Jq(e,void 0,h.p1b+k.qSa,n),k.hla(n),m.insert(n),g.retain(n);else if(n&&p)n=Math.min(n.length,p.length),h.GA(n),k.GA(n),m.retain(n),g.retain(n);else throw Error(`unreachable case: ${n} x ${p}`);
n=h.next;p=k.next}h.finish();k.finish();d=m.cya(d).build();c=g.cya(c).cya(e).build();Bo(d.post-d.pre,b.post-b.pre);Bo(c.post-c.pre,a.post-a.pre);return f.build(d,c)}El(a){if(!a.We.size)return wqb;const b=new Map(a.We);Wmb(a,{insert:(c,d,e)=>Jq(b,e,void 0,c)});a=Tg(b,c=>new Zmb(c.eha,c.mha));return new vqb([],a,0,0)}id(){return wqb}identity(){return wqb}apply(a,b){if(this.isIdentity(b)||!a.We.size&&!b.We.size)return a;const c=this.ee(),d=new Map(a.We);for(const [e,f]of b.We)ia(Hq(a.We.get(e),f.mha)),
d.delete(e),c.range(e,f.eha);Wmb(b,{insert:(e,f,g)=>Ymb(d,g,e)});return c.We(d).build()}Xl(a,b){if(this.isIdentity(b)||!a.We.size&&!b.We.size)return a;const c=this.ee(),d=new Map(a.We);for(const [e,f]of b.We)ia(Hq(a.We.get(e),f.eha)),d.delete(e),c.range(e,f.mha);Wmb(b,{insert:(e,f)=>Ymb(d,f,-e)});return c.We(d).build()}Eh(a){if(a instanceof pqb)return a;const b=this.ee();for(const [c,d]of a.We)b.range(c,[d.from,d.to]);return b.build()}Hi(a,b){const c=a.We,d=b.We;return a===b||c===d?!0:c.size===d.size&&
[...c.keys()].every(e=>Hq(c.get(e),d.get(e)))}equals(a){return this===a||a instanceof Sr}constructor(){super();this.OX=qqb}};Sr.prototype.UB=ba(204);Sr.prototype.Wg=ba(161);Sr.prototype.zf=ba(139);__c.yqb=new Sr;var zqb=class extends lr{isIdentity(a){return this.components[a.key].isIdentity(a.value)}constructor(a){super();this.components=a}};__c.Aqb=class extends mr{isIdentity(a){return this.base.isIdentity(a)}compose(a,b){const c=anb(a.key,b.key);return{key:c,value:this.components[c].compose(a.value,b.value)}}transform(a,b){const c=anb(a.key,b.key);a=this.components[c].transform(a.value,b.value);return Ukb(a,d=>({key:c,value:d}))}El(a){return{key:a.key,value:this.components[a.key].El(a.value)}}identity(a){return{key:a.key,value:this.components[a.key].identity(a.value)}}apply(a,b){const c=anb(a.key,b.key);return{key:c,value:this.components[c].apply(a.value,
b.value)}}Xl(a,b){const c=anb(a.key,b.key);return{key:c,value:this.components[c].Xl(a.value,b.value)}}Eh(a){return Object.freeze({key:a.key,value:this.components[a.key].Eh(a.value)})}Hi(a,b){return a===b?!0:a.key===b.key&&this.components[a.key].Hi(a.value,b.value)}equals(a){if(this===a)return!0;const b=this.components,c=a.components;a=Object.keys(b);const d=Object.keys(c);return a.length===d.length&&a.every(e=>e in c&&b[e].equals(c[e]))}constructor(a){super();this.components=a;this.base=new zqb(this.components)}};
__c.Aqb.prototype.Wg=ba(160);__c.Aqb.prototype.zf=ba(138);__c.Tr=class extends mr{isIdentity(a){return this.sum.isIdentity(a)}compose(a,b){return this.sum.compose(a,b)}transform(a,b){return this.sum.transform(a,b)}El(a){return this.sum.El(a)}identity(a){return this.sum.identity(Kq(this,a))}apply(a,b){return this.sum.apply(Kq(this,a),b).value}Xl(a,b){return this.sum.Xl(Kq(this,a),b).value}Eh(a){return this.sum.Eh(Kq(this,a)).value}Hi(a,b){return a===b||this.sum.Hi(Kq(this,a),Kq(this,b))}equals(a){return this===a||a instanceof __c.Tr&&this.sum.equals(a.sum)}constructor(a,
b){super();this.components=a;this.FCa=b;this.sum=new __c.Aqb(this.components)}};__c.Tr.prototype.Wg=ba(159);__c.Tr.prototype.zf=ba(137);__c.bnb=class extends vr{bMb(a,b,c){return super.bMb(a,b,c)}create(a){return super.create(a)}cH(a,b){return this.aw(Op(this.SK,a),Op(this.Pk,b))}bx(a,b){const c=this.FCa(b);return this.su[c].bx(a,b)}connect(a,b){const c=this.g3a(a);a=this.su[c].connect(a,new __c.Zkb(b,this.fJd[c]));return new __c.Iob(a,this.svd[c])}snapshot(a){const b=this.g3a(a);return this.su[b].snapshot(a)}destroy(a,b){const c=this.g3a(a),d=this.FCa(b);ia(c===d);this.su[c].destroy(a,b)}ki(a,b){const c=this.g3a(a),d=this.FCa(b);
return c===d&&this.su[c].ki(a,b)}aw(a,b){return new __c.bnb(this.su,this.FCa,this.g3a,a,b)}hv(a,b,c){const d=Co(this.su,(g,h)=>Mp(new Yob(h),g.SK)),e=Co(this.su,g=>g.Pk),f=Dlb(a);return this.aw(Klb(d,this.ZEe,g=>f[b(g)]),Klb(e,this.FCa,g=>f[c(g)]))}ZEe(a){return a.key}constructor(a,b,c,d,e){super(d,e);this.su=a;this.FCa=b;this.g3a=c;this.domain=new __c.Tr(Co(this.su,f=>f.domain),this.FCa);this.fJd=Co(this.su,(f,g)=>h=>({key:g,value:h}));this.svd=Co(this.su,(f,g)=>h=>{Bo(g,h.key);return h.value})}};
__c.bnb.prototype.TB=ba(175);__c.Ur=class extends mr{isIdentity(){return!0}compose(){return 1}transform(){return xp(1,1)}El(){return 1}identity(){return 1}apply(){return 1}Xl(){return 1}Eh(){return 1}Hi(){return!0}equals(a){return this===a||a instanceof __c.Ur}constructor(){super();this.unit=1}};__c.Ur.prototype.Wg=ba(158);__c.Ur.prototype.zf=ba(136);var Bqb=new __c.Ur;var Cqb;Cqb=class extends vr{bx(a,b){return b}connect(){return{next:()=>{},complete:()=>{}}}snapshot(a){return a}destroy(){}ki(){return!0}aw(a,b){return new Cqb(a,b)}constructor(...a){super(...a);this.domain=Bqb}};__c.Dqb=new Cqb(Lp,Lp);var Eqb;Eqb=new Map;__c.Vr=class extends mr{isIdentity(a){return!a.size||Array.from(a.values()).every(b=>b===0)}compose(a,b){return dnb(a,b)}transform(a,b){return xp(b,a)}El(a){return a.size?Tg(a,b=>-b):a}identity(){return Eqb}apply(a,b){return dnb(a,b)}Xl(a,b){return dnb(a,this.El(b))}Eh(a){return new Map(a)}Hi(a,b){return __c.cnb(a,b)}equals(a){return this===a||a instanceof __c.Vr}};__c.Vr.prototype.Wg=ba(157);__c.Vr.prototype.zf=ba(135);var Fqb;Fqb=Symbol.iterator;
var Gqb=class extends pr{static C(a){M(a,{values:jr.struct})}T3(a){for(const [b,c]of a)(a=(this.map.get(b)||0)+c)?this.map.set(b,a):this.map.delete(b)}lX(){return new Map(this.map)}ki(a){const b=this.map,c=new Map;for(const [d,e]of b){const f=a.get(d)||0;e!==f&&c.set(d,f-e)}for(const [d,e]of a)!b.has(d)&&e&&c.set(d,e);this.xq(c);return!0}add(a){const b=this.map.get(a)||0;b>0||this.xq(new Map([[a,-b+1]]))}delete(a){const b=this.map.get(a)||0;b&&this.xq(new Map([[a,-b]]))}has(a){return(this.map.get(a)||0)>
0}get values(){return[...enb(this.map,a=>a>0).keys()]}[Fqb](){return this.values[Symbol.iterator]()}constructor(a,b,c){super(a);this.domain=b;this.map=(Gqb.C(this),void 0);this.map=new qob(c)}},Hqb=class extends vr{bx(a,b){return new Gqb(a,this.domain,b)}connect(a,b){return a.connect(b)}snapshot(a){return a.snapshot()}destroy(a,b){ia(this.domain.Hi(a.snapshot(),b))}ki(a,b){return a.ki(b)}aw(a,b){return new Hqb(a,b)}constructor(...a){super(...a);this.domain=new __c.Vr}},Iqb=new Hqb($p,$p);Wr=__c.Wr=E(()=>({oldState:__c.V(1),newState:__c.V(2)}));Mq=__c.Mq=E(()=>({oldState:__c.Ph(1),newState:__c.Ph(2)}));Xr=__c.Xr=E(()=>({oldState:__c.Sh(1),newState:__c.Sh(2)}));Yr=__c.Yr=E(()=>({oldState:Qh(1),newState:Qh(2)}));__c.Jqb=E(()=>({oldState:__c.Th(1),newState:__c.Th(2)}));var Zr=E(()=>({oldState:__c.Rh(1),newState:__c.Rh(2)}));var Kqb=E(()=>({oldState:__c.Uh(1),newState:__c.Uh(2)}));__c.Lqb=E(()=>({oldState:__c.Vh(1),newState:__c.Vh(2)}));__c.$r=E(()=>({oldState:__c.P(1),newState:__c.P(2)}));as=__c.as=E(()=>({oldState:__c.S(1),newState:__c.S(2)}));__c.Mqb=E(()=>({oldState:__c.$h(1),newState:__c.$h(2)}));bs=__c.bs=E(()=>({oldState:__c.Zh(1),newState:__c.Zh(2)}));__c.Nqb=E(()=>({oldState:(0,__c.di)(1),newState:(0,__c.di)(2)}));var Oqb=E(()=>({oldState:w(1,__c.So),newState:w(2,__c.So)}));__c.Pqb=E(()=>({ska:w(2,__c.Nqb)}));__c.Qqb=E(()=>({oldState:__c.Wh(1),newState:__c.Wh(2)}));var Rqb=E(()=>({type:t("A?",1,"UPDATE")}));var Sqb=E(()=>({type:t("A?",2,"REPLACE"),oldState:__c.S(1),newState:__c.S(2)}));var Tqb=Ja(()=>({type:[1,Rqb,2,Sqb]}),()=>({}));__c.Uqb=E(()=>({ops:(0,__c.gi)(1,Tqb)}));__c.Vqb=E(()=>({uvd:(0,__c.ci)(1)}));var Wqb=E(()=>({}));var Xqb=E(()=>({type:t("A?",1,"UPDATE"),delta:w(1,Wqb)}));var Yqb=E(()=>({type:t("A?",2,"REPLACE"),oldState:w(1,__c.Wo),newState:w(2,__c.Wo)}));var Zqb=Ja(()=>({type:[1,Xqb,2,Yqb]}),()=>({}));var $qb=E(()=>({ops:(0,__c.gi)(1,Zqb)}));__c.arb=E(()=>({oldState:A(1,__c.Nib),newState:A(2,__c.Nib)}));__c.brb=E(()=>({oldState:w(1,__c.Yo),newState:w(2,__c.Yo)}));__c.crb=E(()=>({oldState:A(1,__c.No),newState:A(2,__c.No)}));var drb=E(()=>({oldState:u(1,ep),newState:u(2,ep)}));__c.erb=E(()=>({oldState:w(1,ep),newState:w(2,ep)}));__c.frb=E(()=>({oldState:u(1,__c.Ro),newState:u(2,__c.Ro)}));var irb,jrb,orb,qrb,trb,urb,xrb,yrb,zrb,Arb,Brb,ls,Erb,Mrb,Wrb,Xrb,$rb,bsb,csb;cs=__c.cs=gq(iq(xr),Tp(Wr));__c.ds=gq(iq(Br),Tp(Mq));__c.es=gq(kq(Br),Tp(Xr));__c.fs=gq(iq(zr),Tp(Yr));gq(kq(zr),Tp(__c.Jqb));var grb=gq(iq(Ar),Tp(Zr)),hrb=gq(kq(Ar),Tp(Kqb));gq(iq(Br),Tp(Zr));irb=gq(kq(Br),Tp(Kqb));__c.gs=gq(iq(Cr),Tp(Mq));jrb=gq(iq(fpb),Tp(Mq));__c.hs=gq(kq(Cr),Tp(Xr));__c.krb=gq(iq(gpb),Tp(__c.Lqb));__c.is=gq(iq(mq),Tp(__c.$r));__c.js=gq(kq(mq),Tp(as));__c.lrb=gq(kq(xr),Tp(__c.Mqb));
__c.ks=gq(iq(hpb),Tp(bs));__c.mrb=gq(iq(__c.dmb(mq,mq)),Tp(__c.Nqb));__c.nrb=aq({id:mq,version:zr}).jb(Tp(__c.So));orb=__c.Wp(Yp("font","media","video","audio","embed","scene","blueprint"),{font:1,media:2,video:3,audio:4,embed:5,scene:6,blueprint:7});__c.prb=aq({type:orb,id:mq,version:zr}).jb(Tp(__c.Qib));qrb=gq(kq(__c.nrb),Tp(Oqb));__c.rrb=qq({values:{app:__c.nrb},attributes:{ska:__c.mrb}}).jb(Tp(__c.Pqb),Tp(__c.To));__c.srb=dq(-1,1);trb=dq(0,100);urb=dq(-100,100);__c.vrb=dq(0,1);
__c.wrb=dq(-180,180);xrb=Tp(Mq);yrb=Tp(Xr);zrb=Tp(as);Arb=Tp(__c.Qqb);gq(iq(__c.srb),xrb);Brb=gq(iq(trb),xrb);ls=gq(iq(urb),xrb);ns=__c.ns=gq(iq(__c.vrb),xrb);__c.Crb=gq(iq(__c.wrb),xrb);gq(kq(__c.wrb),yrb);os=__c.os=cq(__c.yib);__c.Drb=gq(iq(os),Tp(__c.$r));Erb=gq(iq(Zp(os)),Tp(bs));__c.Frb=fq(os);__c.Grb=gq(iq(__c.Frb),zrb);__c.Hrb=cq(/^100%$/);__c.Irb=cq(/^[0-9]+(\.[0-9]+)?%$/);__c.Jrb=cq(/^[0-9]+(\.[0-9]+)?px/);__c.Krb=__c.lq(nq(oq(mq)),Tp(__c.Uqb),Np({delta:void 0},new Rqb({})),Tp(Sqb));
__c.Lrb=Iqb.aw({serialize:a=>new __c.Vqb({uvd:a}),deserialize:a=>a.uvd},Lp);__c.lq(nq(__c.Dqb),Tp($qb),Np({delta:void 0},new Xqb({})),Np({oldState:void 0,newState:void 0},new Yqb({})));Mrb=hmb(0,10);__c.Nrb=Zp(Mrb,a=>a.length<=10);__c.Orb=gq(iq(__c.Nrb),Arb);__c.Prb=cq(Skb("L"));__c.Qrb=cq(Skb("T"));__c.Rrb=cq(Skb("X"));__c.Srb=gq(iq(Yp(1,2,3)),Tp(__c.arb));__c.Trb=aq({text:mq,Sea:xr}).jb(Tp(__c.Yo));__c.Urb=gq(kq(__c.Trb),Tp(__c.brb));__c.Vrb=gq(iq(Yp(1,2)),Tp(__c.crb));Wrb=aq({top:Br,left:Br}).jb(Tp(ep));
Xrb=gq(iq(Wrb),Tp(drb));__c.Yrb=gq(kq(Wrb),Tp(__c.erb));__c.Zrb=aq({width:Cr,height:Cr}).jb(Tp(__c.Uo));$rb=aq({top:Br,left:Br,height:Cr,width:Cr}).jb(Tp(__c.Ro));__c.asb=gq(iq($rb),Tp(__c.frb));bsb=aq({text:mq,user:mq,brand:mq}).jb(Tp(__c.Vo));csb=aq({text:mq,url:mq}).jb(Tp(__c.Oib));__c.dsb=E(()=>({oldState:w(1,__c.Xo),newState:w(2,__c.Xo)}));var esb,fsb,gsb,hsb,isb,jsb,ksb,lsb,msb;esb=aq({type:Yp("google-sheets"),url:mq,$ab:fq(Ar),hC:mq,range:__c.Dr}).jb(Tp(__c.Sib));fsb={n2b:cq(/^([A-Z]+:[A-Z]+|[1-9]\d*:[1-9]\d*|[A-Z]+[1-9]\d*:[A-Z]+[1-9]\d*)$/)};gsb=aq(fsb).jb(Tp(__c.Tib));hsb=aq({type:Yp("copy-sheets"),$ab:fq(Ar),uf:mq,Kca:mq,We:Zp(gsb)}).jb(Tp(__c.Uib));isb=aq({...fsb}).jb(Tp(__c.Vib));jsb=aq({type:Yp("live-sheets"),$ab:fq(Ar),Kca:mq,We:Zp(isb)}).jb(Tp(__c.Wib));ksb=aq({app:__c.nrb,source:mq,title:__c.Dr}).jb(Tp(__c.Xib));
lsb=aq({type:Yp("app"),Qle:ksb,$ab:fq(Ar)}).jb(Tp(__c.Yib));msb=bq({"google-sheets":esb,"copy-sheets":hsb,"live-sheets":jsb,app:lsb},a=>a.type).hv({"google-sheets":"GOOGLE_SHEETS","copy-sheets":"COPY_SHEETS","live-sheets":"LIVE_SHEETS",app:"APP"},a=>a.type);__c.nsb=gq(kq(msb),Tp(__c.dsb));tr=__c.tr=E(()=>({Df:Qh(1),om:Qh(2)}));var osb=E(()=>({oldState:A(1,__c.Hib),newState:A(2,__c.Hib)}));var psb=E(()=>({mga:w(1,osb),value:w(2,Mq)}));var qsb=E(()=>({type:t("A?",1,"UPDATE"),delta:w(1,psb)}));var rsb=E(()=>({type:t("A?",2,"REPLACE"),oldState:w(1,__c.Po),newState:w(2,__c.Po)}));var ssb=Ja(()=>({type:[1,qsb,2,rsb]}),()=>({}));var tsb=E(()=>({ops:(0,__c.bi)(1,ssb)}));var usb=E(()=>({oldState:A(1,__c.mjb),newState:A(2,__c.mjb)}));var vsb=E(()=>({oldState:__c.Ea(1,__c.njb),newState:__c.Ea(2,__c.njb)}));var ps=()=>({lQ:w(1,Yr),Yg:w(2,Yr),lA:w(3,tsb)});var wsb=E(()=>({...ps(),type:t("A?",4,"BRIGHTNESS_EFFECT")}));var xsb=E(()=>({...ps(),type:t("A?",5,"CONTRAST_EFFECT")}));var ysb=E(()=>({...ps(),type:t("A?",6,"HIGHLIGHTS_EFFECT")}));var zsb=E(()=>({...ps(),type:t("A?",7,"SHADOWS_EFFECT")}));var Asb=E(()=>({...ps(),type:t("A?",8,"WHITES_EFFECT")}));var Bsb=E(()=>({...ps(),type:t("A?",9,"BLACKS_EFFECT")}));var Csb=E(()=>({...ps(),type:t("A?",10,"SATURATION_EFFECT")}));var Dsb=E(()=>({...ps(),type:t("A?",11,"VIBRANCE_EFFECT")}));var Esb=E(()=>({...ps(),type:t("A?",12,"TEMPERATURE_EFFECT")}));var Fsb=E(()=>({...ps(),type:t("A?",13,"TINT_EFFECT")}));var Gsb=E(()=>({oldState:u(1,__c.jjb),newState:u(2,__c.jjb)}));var Hsb=E(()=>({...ps(),type:t("A?",14,"LUT_EFFECT"),GTa:w(51,Gsb)}));var Isb=E(()=>({...ps(),type:t("A?",15,"FISHEYE_EFFECT"),FOa:w(52,Mq),backgroundColor:w(53,as),SZa:w(54,Mq)}));var Jsb=E(()=>({...ps(),type:t("A?",16,"VHS_EFFECT"),d3:w(55,Yr),POa:w(56,Mq),NMa:w(57,usb),oVa:w(58,vsb)}));var Ksb=E(()=>({...ps(),type:t("A?",17,"LIGHT_LEAK_EFFECT"),za:w(59,bs),seed:w(60,Yr),angle:w(61,Mq),stretch:w(62,Mq)}));var Lsb=E(()=>({...ps(),type:t("A?",18,"OLD_TV_EFFECT"),lPa:w(63,Mq),$bb:w(64,usb),d3:w(65,Mq)}));var Msb=E(()=>({type:t("A?",1,"RETAIN"),length:Qh(1)}));var Nsb=E(()=>({type:t("A?",2,"EXPAND"),length:Qh(1)}));var Osb=E(()=>({type:t("A?",3,"RETOMB"),length:Qh(1)}));var Psb=E(()=>({type:t("A?",4,"INSERT"),state:w(1,__c.rjb),shift:w(2,tr)}));var Qsb=Ja(()=>({type:[4,wsb,5,xsb,6,ysb,7,zsb,8,Asb,9,Bsb,10,Csb,11,Dsb,12,Esb,13,Fsb,14,Hsb,15,Isb,16,Jsb,17,Ksb,18,Lsb]}),ps);var Rsb=E(()=>({type:t("A?",5,"UPDATE"),delta:w(1,Qsb),shift:w(2,tr)}));var Ssb=E(()=>({type:t("A?",6,"CHANGE"),oldState:w(1,__c.rjb),newState:w(2,__c.rjb),shift:w(3,tr)}));var Tsb=Ja(()=>({type:[1,Msb,2,Nsb,3,Osb,4,Psb,5,Rsb,6,Ssb]}),()=>({}));__c.Usb=E(()=>({ops:z(1,Tsb)}));var Vsb,Wsb,Xsb,Ysb,Zsb,$sb,qs,atb,btb,ctb,dtb,etb,ftb,gtb,htb,itb,jtb,ktb,ltb,mtb,ntb,otb,ptb,qtb;Vsb=gq(iq(Yp(1,2,3,4)),Tp(osb));Wsb=gq(iq(Yp(2,1)),Tp(usb));Xsb=gq(iq(Yp(2,1)),Tp(usb));Ysb=gq(kq(Yp(1,2)),Tp(vsb));Zsb=qq({attributes:{mga:Vsb,value:__c.ds}}).jb(Tp(psb),Tp(__c.Po));$sb=__c.lq(nq(zr,Zsb),Tp(tsb),Tp(qsb),Tp(rsb));qs=qq({attributes:{lQ:__c.fs,Yg:__c.fs},hb:{lA:$sb}});atb=qs.Zf({values:{type:Yp("brightness")}}).jb(Tp(wsb),Tp(__c.$ib));
btb=qs.Zf({values:{type:Yp("contrast")}}).jb(Tp(xsb),Tp(__c.ajb));ctb=qs.Zf({values:{type:Yp("highlights")}}).jb(Tp(ysb),Tp(__c.bjb));dtb=qs.Zf({values:{type:Yp("shadows")}}).jb(Tp(zsb),Tp(__c.cjb));etb=qs.Zf({values:{type:Yp("whites")}}).jb(Tp(Asb),Tp(__c.djb));ftb=qs.Zf({values:{type:Yp("blacks")}}).jb(Tp(Bsb),Tp(__c.ejb));gtb=qs.Zf({values:{type:Yp("saturation")}}).jb(Tp(Csb),Tp(__c.fjb));htb=qs.Zf({values:{type:Yp("vibrance")}}).jb(Tp(Dsb),Tp(__c.gjb));
itb=qs.Zf({values:{type:Yp("temperature")}}).jb(Tp(Esb),Tp(__c.hjb));jtb=qs.Zf({values:{type:Yp("tint")}}).jb(Tp(Fsb),Tp(__c.ijb));ktb=aq({id:mq}).jb(Tp(__c.jjb));ltb=qs.Zf({values:{type:Yp("lut"),GTa:ktb}}).jb(Tp(Hsb),Tp(__c.kjb));mtb=qs.Zf({values:{type:Yp("fisheye")},attributes:{FOa:ns,backgroundColor:__c.js,SZa:ns}}).jb(Tp(Isb),Tp(__c.ljb));ntb=qs.Zf({values:{type:Yp("vhs")},attributes:{d3:__c.fs,POa:ns,NMa:Xsb,oVa:Ysb}}).jb(Up(Jsb),Up(__c.ojb));
otb=qs.Zf({values:{type:Yp("light_leak")},attributes:{seed:__c.fs,angle:__c.Crb,stretch:fnb(10),za:Erb}}).jb(Up(Ksb),Up(__c.pjb));ptb=qs.Zf({values:{type:Yp("old_tv")},attributes:{lPa:ns,$bb:Wsb,d3:jrb}}).jb(Up(Lsb),Up(__c.qjb));
qtb=Lq({brightness:atb,contrast:btb,highlights:ctb,shadows:dtb,whites:etb,blacks:ftb,saturation:gtb,vibrance:htb,temperature:itb,tint:jtb,lut:ltb,fisheye:mtb,vhs:ntb,light_leak:otb,old_tv:ptb},a=>a.type,a=>a.type).hv({brightness:"BRIGHTNESS_EFFECT",contrast:"CONTRAST_EFFECT",highlights:"HIGHLIGHTS_EFFECT",shadows:"SHADOWS_EFFECT",whites:"WHITES_EFFECT",blacks:"BLACKS_EFFECT",saturation:"SATURATION_EFFECT",vibrance:"VIBRANCE_EFFECT",temperature:"TEMPERATURE_EFFECT",tint:"TINT_EFFECT",lut:"LUT_EFFECT",
fisheye:"FISHEYE_EFFECT",vhs:"VHS_EFFECT",light_leak:"LIGHT_LEAK_EFFECT",old_tv:"OLD_TV_EFFECT"},a=>a.type,a=>a.type);__c.rtb=__c.sq(wq(qtb),Tp(__c.Usb),Tp(Msb),Tp(Nsb),Tp(Osb),Tp(Psb),Tp(Rsb),Tp(Ssb));var stb=E(()=>({ops:(0,__c.aEa)(1,ssb)}));var ttb=()=>({yc:w(1,Zr),Ja:w(2,Kqb),lA:w(3,stb)});var utb=E(()=>({...ttb(),type:t("A?",4,"GAIN"),O8a:w(51,Mq)}));var vtb=E(()=>({...ttb(),type:t("A?",5,"DUCKING"),C0a:w(52,Mq),B0a:w(53,Zr),gbb:w(54,Zr),v6a:w(55,Zr),mga:w(56,osb)}));var wtb=E(()=>({type:t("A?",1,"RETAIN"),length:Qh(1)}));var xtb=E(()=>({type:t("A?",2,"EXPAND"),length:Qh(1)}));var ytb=E(()=>({type:t("A?",3,"RETOMB"),length:Qh(1)}));var ztb=E(()=>({type:t("A?",4,"INSERT"),state:w(1,__c.Lib),shift:w(2,tr)}));var Atb=Ja(()=>({type:[4,utb,5,vtb]}),ttb);var Btb=E(()=>({type:t("A?",5,"UPDATE"),delta:w(1,Atb),shift:w(2,tr)}));var Ctb=E(()=>({type:t("A?",6,"CHANGE"),oldState:w(1,__c.Lib),newState:w(2,__c.Lib),shift:w(3,tr)}));var Dtb=Ja(()=>({type:[1,wtb,2,xtb,3,ytb,4,ztb,5,Btb,6,Ctb]}),()=>({}));var Etb=E(()=>({ops:z(1,Dtb)}));var Ftb,Gtb,Htb,Itb,Jtb;Ftb=__c.lq(nq(Ar,Zsb),Tp(tsb),Tp(qsb),Tp(rsb));Gtb=qq({attributes:{yc:grb,Ja:hrb},hb:{lA:Ftb}});Htb=Gtb.Zf({values:{type:Yp("gain")},attributes:{O8a:__c.gs}}).jb(Tp(utb),Tp(__c.Jib));Itb=Gtb.Zf({values:{type:Yp("ducking")},attributes:{C0a:__c.gs,B0a:grb,gbb:grb,v6a:grb,mga:Vsb}}).jb(Tp(vtb),Tp(__c.Kib));Jtb=Lq({gain:Htb,ducking:Itb},a=>a.type,a=>a.type).hv({gain:"GAIN",ducking:"DUCKING"},a=>a.type,a=>a.type);
__c.Ktb=__c.sq(wq(Jtb),Tp(Etb),Tp(wtb),Tp(xtb),Tp(ytb),Tp(ztb),Tp(Btb),Tp(Ctb));var Ltb=E(()=>({oldState:w(1,__c.Eib),newState:w(2,__c.Eib)}));var Mtb=E(()=>({oldState:w(1,__c.Oo),newState:w(2,__c.Oo)}));var Ntb=E(()=>({QE:w(1,Mtb),RE:w(2,Mtb)}));var Otb=E(()=>({trim:w(2,Ltb),loop:w(3,__c.crb),volume:w(4,Mq),yc:w(5,Xr),Ja:w(6,Xr),QE:w(7,Mtb),RE:w(8,Mtb),Gt:w(10,Etb)}));var Ptb=E(()=>({type:t("A?",1,"RETAIN"),length:Qh(1)}));var Qtb=E(()=>({type:t("A?",2,"EXPAND"),length:Qh(1)}));var Rtb=E(()=>({type:t("A?",3,"RETOMB"),length:Qh(1)}));var Stb=E(()=>({type:t("A?",4,"INSERT"),state:w(1,__c.Qo),shift:w(2,tr)}));var Ttb=E(()=>({type:t("A?",5,"UPDATE"),delta:w(1,Otb),shift:w(2,tr)}));var Utb=E(()=>({type:t("A?",6,"CHANGE"),oldState:w(1,__c.Qo),newState:w(2,__c.Qo),shift:w(3,tr)}));var Vtb=Ja(()=>({type:[1,Ptb,2,Qtb,3,Rtb,4,Stb,5,Ttb,6,Utb]}),()=>({}));var Wtb=E(()=>({ops:z(1,Vtb)}));var Xtb=E(()=>({tracks:w(1,Wtb)}));var Ytb,Ztb,$tb,aub,bub,cub,eub,fub;Ytb=aq({yc:Cr,ox:Cr}).jb(Tp(__c.Eib));Ztb=gq(kq(Ytb),Tp(Ltb));$tb=aq({type:Yp("logistic_sigmoid")}).jb(Tp(__c.Fib));aub=bq({logistic_sigmoid:$tb},a=>a.type).hv({logistic_sigmoid:"LOGISTIC_SIGMOID"},a=>a.type);bub=aq({Ja:Cr,easing:aub}).jb(Tp(__c.Oo));cub=gq(kq(bub),Tp(Mtb));__c.dub=new __c.tjb({});eub=qq({attributes:{QE:cub,RE:cub}}).jb(Tp(Ntb),Tp(__c.tjb)).jb(Tp(Ntb),Tp(__c.tjb,__c.dub));
fub=qq({values:{audio:mq,id:__c.Dr},attributes:{trim:Ztb,loop:__c.Vrb,volume:fnb(4),yc:__c.hs,Ja:__c.hs,QE:cub,RE:cub},hb:{Gt:__c.Ktb}}).jb(Tp(Otb),Mp({serialize:({Gt:[a,b],...c})=>({...c,Gt:a,esa:b}),deserialize:({Gt:a,esa:b,...c})=>({...c,Gt:[a,b]})},Tp(__c.Qo)));__c.gub=__c.sq(wq(fub),Tp(Wtb),Tp(Ptb),Tp(Qtb),Tp(Rtb),Tp(Stb),Tp(Ttb),Tp(Utb));
__c.hub=qq({hb:{tracks:__c.gub}}).jb(Tp(Xtb),Mp({serialize:({tracks:[a,b],...c})=>({...c,tracks:a,s8b:b}),deserialize:({tracks:a,s8b:b,...c})=>({...c,tracks:[a,b]})},Tp(__c.Mib)));var iub=E(()=>({oldState:A(1,__c.Ijb),newState:A(2,__c.Ijb)}));var jub=E(()=>({oldState:A(1,__c.Hjb),newState:A(2,__c.Hjb)}));var rs=()=>({Ja:w(2,Mq)});var kub=E(()=>({...rs(),type:t("A?",33,"CHOP"),origin:w(27,jub),direction:w(28,iub)}));var lub=E(()=>({oldState:A(1,__c.Kjb),newState:A(2,__c.Kjb)}));var mub=E(()=>({...rs(),type:t("A?",34,"COLOR_WIPE"),za:w(27,bs),direction:w(28,lub)}));var nub=E(()=>({...rs(),type:t("A?",27,"CROSS_DISSOLVE")}));var oub=E(()=>({...rs(),type:t("A?",31,"MATCH")}));var pub=E(()=>({oldState:A(1,__c.Mjb),newState:A(2,__c.Mjb)}));var qub=E(()=>({...rs(),type:t("A?",35,"FLOW"),direction:w(27,pub)}));var rub=E(()=>({oldState:A(1,__c.yjb),newState:A(2,__c.yjb)}));var sub=E(()=>({...rs(),type:t("A?",28,"SLIDE"),direction:w(27,rub)}));var tub=E(()=>({oldState:A(1,__c.Fjb),newState:A(2,__c.Fjb)}));var uub=E(()=>({...rs(),type:t("A?",32,"STACK"),direction:w(27,tub)}));var vub=E(()=>({oldState:A(1,__c.Ajb),newState:A(2,__c.Ajb)}));var wub=E(()=>({...rs(),type:t("A?",29,"WIPE_CIRCLE"),direction:w(27,vub)}));var xub=E(()=>({oldState:A(1,__c.Cjb),newState:A(2,__c.Cjb)}));var yub=E(()=>({...rs(),type:t("A?",30,"WIPE_LINE"),direction:w(27,xub)}));var zub=E(()=>({...rs(),type:t("A?",36,"RESERVED_36")}));var Aub=E(()=>({...rs(),type:t("A?",37,"RESERVED_37")}));var Bub=E(()=>({...rs(),type:t("A?",38,"RESERVED_38")}));var Cub=E(()=>({...rs(),type:t("A?",39,"RESERVED_39")}));var Dub=E(()=>({...rs(),type:t("A?",40,"RESERVED_40")}));var Eub=E(()=>({...rs(),type:t("A?",41,"RESERVED_41")}));var Fub=E(()=>({...rs(),type:t("A?",42,"RESERVED_42")}));var Gub=E(()=>({...rs(),type:t("A?",43,"RESERVED_43")}));var Iub=E(()=>({...rs(),type:t("A?",44,"RESERVED_44")}));var Jub=E(()=>({...rs(),type:t("A?",45,"RESERVED_45")}));var Kub=E(()=>({...rs(),type:t("A?",46,"RESERVED_46")}));var Lub=Ja(()=>({type:[27,nub,28,sub,29,wub,30,yub,31,oub,32,uub,33,kub,34,mub,35,qub,36,zub,37,Aub,38,Bub,39,Cub,40,Dub,41,Eub,42,Fub,43,Gub,44,Iub,45,Jub,46,Kub]}),rs);var Mub=E(()=>({type:t("A?",2,"UPDATE"),delta:w(1,Lub)}));var Nub=E(()=>({type:t("A?",1,"REPLACE"),oldState:w(1,__c.gp),newState:w(2,__c.gp)}));var ss,Oub,Pub,Qub,Rub,Sub,Tub,Uub,Vub,Wub,Xub;ss=qq({attributes:{Ja:__c.gs}});Oub=ss.Zf({values:{type:Yp("chop")},attributes:{direction:gq(iq(Yp(1,2)),Tp(iub)),origin:gq(iq(Yp(1,2,3,4)),Tp(jub))}}).jb(Tp(kub),Tp(__c.Jjb));Pub=ss.Zf({values:{type:Yp("color-wipe")},attributes:{za:gq(iq(Zp(os,a=>a.length<=6)),Tp(bs)),direction:gq(iq(Yp(1,2,3,4,5,6,7,8)),Tp(lub))}}).jb(Tp(mub),Tp(__c.Ljb));Qub=ss.Zf({values:{type:Yp("cross-dissolve")}}).jb(Tp(nub),Tp(__c.xjb));
Rub=ss.Zf({values:{type:Yp("match")}}).jb(Tp(oub),Tp(__c.Ejb));Sub=ss.Zf({values:{type:Yp("flow")},attributes:{direction:gq(iq(Yp(1,2,3,4)),Tp(pub))}}).jb(Tp(qub),Tp(__c.Njb));Tub=ss.Zf({values:{type:Yp("slide")},attributes:{direction:gq(iq(Yp(1,2,3,4)),Tp(rub))}}).jb(Tp(sub),Tp(__c.zjb));Uub=ss.Zf({values:{type:Yp("stack")},attributes:{direction:gq(iq(Yp(1,2,3,4)),Tp(tub))}}).jb(Tp(uub),Tp(__c.Gjb));
Vub=ss.Zf({values:{type:Yp("wipe-circle")},attributes:{direction:gq(iq(Yp(1,2)),Tp(vub))}}).jb(Tp(wub),Tp(__c.Bjb));Wub=ss.Zf({values:{type:Yp("wipe-line")},attributes:{direction:gq(iq(Yp(1,2,3,4)),Tp(xub))}}).jb(Tp(yub),Tp(__c.Djb));
Xub=Lq({chop:Oub,"color-wipe":Pub,"cross-dissolve":Qub,flow:Sub,match:Rub,slide:Tub,stack:Uub,"wipe-circle":Vub,"wipe-line":Wub},a=>a.type,a=>a.type).hv({chop:"CHOP","color-wipe":"COLOR_WIPE","cross-dissolve":"CROSS_DISSOLVE",flow:"FLOW",match:"MATCH",slide:"SLIDE",stack:"STACK","wipe-circle":"WIPE_CIRCLE","wipe-line":"WIPE_LINE"},a=>a.type,a=>a.type).cH(a=>a.type!=="RESERVED_36"&&a.type!=="RESERVED_37"&&a.type!=="RESERVED_38"&&a.type!=="RESERVED_39"&&a.type!=="RESERVED_40"&&a.type!=="RESERVED_41"&&
a.type!=="RESERVED_42"&&a.type!=="RESERVED_43"&&a.type!=="RESERVED_44"&&a.type!=="RESERVED_45"&&a.type!=="RESERVED_46",a=>a.type!=="RESERVED_36"&&a.type!=="RESERVED_37"&&a.type!=="RESERVED_38"&&a.type!=="RESERVED_39"&&a.type!=="RESERVED_40"&&a.type!=="RESERVED_41"&&a.type!=="RESERVED_42"&&a.type!=="RESERVED_43"&&a.type!=="RESERVED_44"&&a.type!=="RESERVED_45"&&a.type!=="RESERVED_46");__c.Yub=hq(jq(fq(Xub)),Tp(Mub),Tp(Nub));var Zub=E(()=>({oldState:u(1,Zo),newState:u(2,Zo)}));var $ub=E(()=>({oldState:w(1,Zo),newState:w(2,Zo)}));var avb=E(()=>({oldState:w(1,__c.Zib),newState:w(2,__c.Zib)}));var bvb=E(()=>({R2:w(9,avb),brightness:w(1,Mq),contrast:w(2,Mq),saturation:w(3,Mq),B_:w(4,Mq),SYa:w(5,Mq),blur:w(6,Mq),Fja:w(8,Mq),lAa:w(10,Mq),Yka:w(11,Mq),Rqa:w(12,Mq),highlights:w(13,Mq),D8:w(14,Mq),R_:w(7,Mq),kua:w(15,Mq)}));var cvb=E(()=>({type:t("A?",2,"UPDATE"),delta:w(1,bvb)}));var dvb=E(()=>({type:t("A?",1,"REPLACE"),oldState:w(1,__c.$o),newState:w(2,__c.$o)}));var evb=E(()=>({oldState:(0,__c.di)(1),newState:(0,__c.di)(2)}));var fvb=Ja(()=>({type:[1,dvb,2,cvb]}),()=>({}));var gvb=E(()=>({ME:w(9,Oqb),vf:w(2,$ub),eb:w(5,Mq),ng:w(3,evb),filter:w(4,fvb),altText:w(10,__c.brb)}));var hvb=E(()=>({type:t("A?",2,"UPDATE"),delta:w(1,gvb)}));var ivb=E(()=>({type:t("A?",1,"REPLACE"),oldState:w(1,__c.ap),newState:w(2,__c.ap)}));var jvb=E(()=>({oldState:w(1,__c.sjb),newState:w(2,__c.sjb)}));var kvb=E(()=>({vf:w(2,Zub),eb:w(3,Mq),ng:w(10,evb),filter:w(4,fvb),hh:w(14,__c.Usb),Gt:w(17,Etb),trim:w(5,jvb),Woa:w(6,__c.crb),autoplay:w(9,Wr),playbackRate:w(11,Xr),volume:w(7,Mq),altText:w(12,__c.brb),CMa:w(16,Ntb)}));var lvb=E(()=>({type:t("A?",2,"UPDATE"),delta:w(1,kvb)}));var mvb=E(()=>({type:t("A?",1,"REPLACE"),oldState:w(1,__c.cp),newState:w(2,__c.cp)}));var nvb=E(()=>({oldState:z(1,__c.dp),newState:z(2,__c.dp)}));var ovb=E(()=>({type:t("A?",1,"LINEAR"),Fl:w(1,nvb),rotation:w(2,Mq)}));var pvb=E(()=>({type:t("A?",2,"RADIAL"),Fl:w(1,nvb),center:w(2,drb)}));var qvb=Ja(()=>({type:[1,ovb,2,pvb]}),()=>({}));var rvb=E(()=>({type:t("A?",2,"UPDATE"),delta:w(1,qvb)}));var svb=E(()=>({type:t("A?",1,"REPLACE"),oldState:w(1,__c.wjb),newState:w(2,__c.wjb)}));var tvb=Ja(()=>({type:[1,ivb,2,hvb]}),()=>({}));var uvb=Ja(()=>({type:[1,mvb,2,lvb]}),()=>({}));var vvb=Ja(()=>({type:[1,svb,2,rvb]}),()=>({}));var wvb=Ja(()=>({type:[1,Nub,2,Mub]}),()=>({}));__c.ts=E(()=>({dropTarget:w(1,__c.Mqb),image:w(2,tvb),video:w(9,uvb),gradient:w(11,vvb),color:w(3,as),eb:w(4,Mq),locked:w(6,Wr),ot:w(10,Wr),kD:w(5,as),Gk:w(12,as),Ja:w(14,Kqb),transition:w(13,wvb),flipX:w(7,Wr),flipY:w(8,Wr)}));__c.xvb=E(()=>({weight:w(1,Mq),color:w(2,as),fill:w(5,__c.ts),Rj:w(3,__c.Qqb),io:w(4,Wr)}));__c.yvb=E(()=>({type:t("A?",2,"UPDATE"),delta:w(1,__c.xvb)}));__c.zvb=E(()=>({type:t("A?",1,"REPLACE"),oldState:w(1,__c.ip),newState:w(2,__c.ip)}));var Avb,Bvb,Cvb,Dvb,Evb,Gvb,Ivb,Jvb,Kvb,Mvb,Nvb,Ovb,Pvb,Qvb,Rvb,Svb,Tvb;Avb=aq({top:Br,left:Br,width:Cr,height:Cr,rotation:__c.wrb}).jb(Tp(Zo));Bvb=gq(iq(Avb),Tp(Zub));Cvb=gq(kq(Avb),Tp($ub));Dvb=aq({id:mq,Vd:Br}).jb(Tp(__c.Zib));Evb=gq(kq(Dvb),Tp(avb));__c.Fvb=qq({attributes:{R2:Evb,brightness:ls,contrast:ls,saturation:ls,B_:ls,SYa:Brb,blur:ls,Fja:ls,lAa:ls,Yka:Brb,Rqa:Brb,highlights:ls,D8:ls,R_:Brb,kua:Brb}}).jb(Tp(bvb),Tp(__c.$o));Gvb=hq(jq(fq(__c.Fvb)),Tp(cvb),Tp(dvb));
__c.Hvb=qq({values:{media:__c.nrb},hb:{filter:Gvb},attributes:{ME:qrb,vf:Cvb,eb:ns,ng:gq(iq(__c.dmb(os,os)),Tp(__c.Nqb)),altText:__c.Urb}}).jb(Tp(gvb),Tp(__c.ap));Ivb=hq(jq(fq(__c.Hvb)),Tp(hvb),Tp(ivb));Jvb=aq({yc:Cr,ox:Cr}).jb(Tp(__c.sjb));Kvb=gq(kq(Jvb),Tp(jvb));
__c.Lvb=qq({values:{video:mq,id:__c.Dr},hb:{CMa:eub,filter:Gvb,hh:__c.rtb,Gt:__c.Ktb},attributes:{vf:Bvb,eb:ns,ng:gq(iq(__c.dmb(os,os)),Tp(__c.Nqb)),altText:__c.Urb,trim:Kvb,Woa:__c.Vrb,autoplay:cs,playbackRate:gq(kq(dq(.25,4)),Tp(Xr)),volume:fnb(4)}}).jb(Tp(kvb),Mp({serialize:({hh:[a,b],Gt:[c,d],...e})=>({...e,hh:a,xT:b,Gt:c,esa:d}),deserialize:({hh:a,xT:b,Gt:c,esa:d,...e})=>({...e,hh:[a,b],Gt:[c,d]})},Tp(__c.cp)));Mvb=hq(jq(fq(__c.Lvb)),Tp(lvb),Tp(mvb));
Nvb=aq({color:os,eb:__c.vrb,position:Br},a=>a.position>=-1&&a.position<=2).jb(Tp(__c.dp));Ovb=Zp(Nvb,a=>a.length>=2&&a.every((b,c,d)=>c===0||d[c-1].position<=b.position));Pvb=gq(iq(Ovb),Tp(nvb));Qvb=qq({values:{type:Yp("linear")},attributes:{Fl:Pvb,rotation:__c.Crb}}).jb(Tp(ovb),Tp(__c.ujb));Rvb=qq({values:{type:Yp("radial")},attributes:{Fl:Pvb,center:Xrb}}).jb(Tp(pvb),Tp(__c.vjb));__c.us=Lq({linear:Qvb,radial:Rvb},a=>a.type,a=>a.type).hv({linear:"LINEAR",radial:"RADIAL"},a=>a.type,a=>a.type);
Svb=hq(jq(fq(__c.us)),Tp(rvb),Tp(svb));__c.vs=qq({hb:{image:Ivb,video:Mvb,gradient:Svb,transition:__c.Yub},attributes:{dropTarget:__c.lrb,color:__c.Grb,eb:ns,locked:cs,ot:cs,kD:__c.js,Gk:__c.js,Ja:irb,flipX:cs,flipY:cs}}).jb(Tp(__c.ts),Tp(__c.hp));Tvb=new __c.hp({eb:0});__c.Uvb=__c.vs.jb(Tp(__c.ts),Tp(__c.hp,Tvb));__c.Vvb=wq(__c.vs);__c.ws=qq({hb:{fill:__c.Uvb},attributes:{weight:__c.gs,color:__c.Grb,Rj:__c.Orb,io:cs}}).jb(Tp(__c.xvb),Tp(__c.ip));__c.xs=hq(jq(fq(__c.ws)),Tp(__c.yvb),Tp(__c.zvb));var Wvb=RegExp("^\\[\\$[^\\]-]{1,10}(-[a-z]{2,3}(-[A-Z]{2}|-\\d{3})?)?\\]\\s?(#,##0|0)(\\.\\d{1,5})?$|^(#,##0|0)(\\.\\d{1,5})?\\s?\\[\\$[^\\]-]{1,10}(-[a-z]{2,3}(-[A-Z]{2}|-\\d{3})?)?\\]$"),Xvb=Xp(a=>Wvb.test(a));var Zvb;
__c.Yvb=class{static parse(a){a==="dd mmm yyyy"&&(a="dd MMM yyyy");const b=new __c.Yvb;if((a=b.bAf(a))&&a.s===""&&b.isValid())return a.value}isValid(){return this.Xnc<=1&&this.uGc<=1&&this.V1c<=1&&this.Xnc+this.uGc+this.V1c!==0}uu(a){return b=>{var c=a.exec(b);if(c&&c.index===0)return[c]=c,{s:b.substring(c.length),value:[{type:0,value:c}]}}}compose(a,...b){return c=>{const d=[];for(const e of b){const f=e(c);if(!f)return;c=f.s;d.push(...f.value)}return{s:c,value:a(...d)}}}constructor(){this.V1c=this.uGc=
this.Xnc=0;this.wCe=this.compose(a=>{a=a.value;this.Xnc++;ka(a==="d"||a==="dd");return[{type:1,value:a}]},this.uu(/^d{1,2}(?!d)/));this.S9e=this.compose(a=>{a=a.value;this.uGc++;switch(a){case "M":case "MM":case "MMM":case "MMMM":return[{type:1,value:a}];default:ka(!1)}},this.uu(/^M{1,4}(?!M)/));this.iLf=this.compose(a=>{a=a.value;this.V1c++;ka(a==="yyyy"||a==="yy");return[{type:1,value:a}]},this.uu(/^(yyyy|yy)(?!y)/));this.zhd=this.uu(/^"/);this.cjf=this.uu(/^[^\\"]+/);this.separator=this.uu(/^[^a-zA-Z\\"]+/);
this.symbol=gnb(this.wCe,this.S9e,this.iLf);this.uaf=hnb(gnb(this.symbol,this.separator));this.bAf=hnb(gnb(this.compose((a,b)=>[b],this.zhd,this.cjf,this.zhd),this.uaf))}};Zvb=Xp(a=>a.length<=20&&__c.Yvb.parse(a)!=null);var $vb=new Set("0% 0.0% 0.00% 0.000% 0.0000% 0.00000% #,##0% #,##0.0% #,##0.00% #,##0.000% #,##0.0000% #,##0.00000%".split(" ")),awb=Xp(a=>$vb.has(a));var bwb=new Set("# 0 0.0 0.00 0.000 0.0000 0.00000 #,##0 #,##0.0 #,##0.00 #,##0.000 #,##0.0000 #,##0.00000".split(" ")),cwb=Xp(a=>bwb.has(a));var hwb,iwb,jwb;__c.dwb="normal thin extralight light medium semibold bold ultrabold heavy".split(" ");__c.ewb=/^Y[A-Za-z0-9_-]{10},\d+$/;__c.fwb=["normal","italic"];__c.gwb=["none","underline"];hwb=["start","center","end","justify"];
ys=__c.ys={fontFamily:Lo("inline",__c.ewb,"YACgEZ1cb1Q,0"),fontSize:Ho("inline",{min:0,defaultValue:16,units:"px"}),fontWeight:Mo("inline",__c.dwb),fontStyle:Mo("inline",__c.fwb),TO:Lo("inline",__c.Aib,"1"),verticalAlign:Lo("inline",__c.Bib,"0%"),color:Lo("inline",__c.yib,"#000000"),backgroundColor:Lo("inline",mob,"transparent"),J4:Ho("inline",{min:0,max:.2,units:"em"}),I4:Ho("inline",{min:0,max:.16,units:"em"}),Nl:Mo("inline",__c.gwb),dv:Mo("inline",["none","strikethrough"]),link:Lo("inline",__c.xib,
""),letterSpacing:Ho("inline",{min:-.2,max:.8,units:"em"}),lineHeight:Ho("block",{min:.5,max:2.5,defaultValue:1.4}),direction:Mo("block",["ltr","rtl"]),textAlign:Mo("block",hwb),Ev:Mo("block","none disc circle square decimal lower-alpha lower-roman checked unchecked".split(" ")),xJ:__c.rib({min:0}),Lna:Lo("block",__c.Cib,"none"),marginInlineStart:__c.rib({min:0,max:200,units:"px"}),textIndent:__c.rib({min:0,max:32,units:"px"}),AIa:Mo("block","p h1 h2 h3 h4 h5 h6 blockquote".split(" ")),uEb:Lo("inline",
/^$/,""),vEb:Lo("inline",/^$/,""),S8b:Lo("inline",/^$/,"")};iwb={Wm:Lo("inline",/^(K[a-zA-Z0-9_-]{10}|)$/,"")};jwb={...Co(ys,a=>a.rka()),KC:Mo("inline",["add","delete"]).rka()};__c.zs=__c.wib({static:ys,Zd:iwb,Qk:jwb});__c.kwb=`${Object.keys({Wm:0})[0]}/`;__c.lwb=Object.keys({KC:0})[0];__c.As=E(()=>({oldState:u(1,__c.jp),newState:u(2,__c.jp)}));__c.mwb=aq({Ze:Zp(zr)}).jb(Tp(__c.jp));__c.nwb=gq(iq(__c.mwb),Tp(__c.As));var qwb,rwb,owb,pwb,jnb;
qwb=class{Yca(a){if(this.mode!==a){switch(this.mode){case void 0:break;case 0:this.ops.push(Nq(this.acc));this.pre+=this.acc;this.post+=this.acc;this.acc=0;break;case 1:this.ops.push(inb(this.acc));this.post+=this.acc;this.acc=0;break;default:throw new r(this.mode);}this.mode=a}}accumulate(a,b=1){ia(b>=0,"{} < 0",b);b&&(this.Yca(a),this.acc+=b);return this}retain(a){return this.accumulate(0,a)}expand(a){return this.accumulate(1,a)}append(a){switch(a.type){case 0:return this.accumulate(0,a.length);
case 1:return this.accumulate(1,a.length);default:throw new r(a);}}build(){this.mode!==0&&this.Yca();return this.ops?new owb(this.ops,this.pre,this.post):pwb}constructor(){this.ops=[];this.acc=this.post=this.pre=0;this.mode=void 0}};
rwb=class{static create(a,b,c,d=0,e=0){ia(d>=0,"{} < 0",d);ia(e>=0,"{} < 0",e);b=Math.max(0,d-b,e-c);return new rwb(b?[...a,Nq(b)]:a)}get head(){return this.Gm}GA(a){return this.FE(0,a).length}FE(a,b=1){const c=l(this.Gm);if(c.type!==a)throw Error();const d=c.length;ia(0<b&&b<=d,"{} \u2209 (0, {}]",b,d);if(b<d)switch(a){case 0:return this.Gm=Nq(d-b),Nq(b);case 1:return this.Gm=inb(d-b),inb(b);default:throw new r(a);}else return this.Gm=this.ops[this.i++],c}finish(){ka(this.Gm==null)}constructor(a){this.ops=
a;this.i=0;this.Gm=a[this.i++]}};owb=class{isEmpty(){return this.pre===0&&this.post===0&&this.ops.length===0}zd(a,b){return rwb.create(this.ops,this.pre,this.post,a,b)}toString(){return this.ops.map(a=>{switch(a.type){case 0:return`R(${a.length})`;case 1:return`X(${a.length})`;default:throw new r(a);}}).join("")}constructor(a,b,c){this.ops=a;this.pre=b;this.post=c}};pwb=new owb([],0,0);
__c.Bs=class extends mr{le(){return new qwb}isIdentity(a){return a.isEmpty()}compose(a,b){if(this.isIdentity(a))return b;if(this.isIdentity(b))return a;const c=this.le(),d=a.zd(0,b.pre),e=b.zd(a.post,0);let f=d.head,g=e.head;for(;f||g;){if(g)if(g.type===1)c.append(e.FE(g.type,g.length));else if(f)if(f.type===1){var h=Math.min(f.length,g.length);d.FE(f.type,h);e.FE(g.type,h);c.append(inb(h))}else h=Math.min(f.length,g.length),d.FE(f.type,h),e.FE(g.type,h),c.append(Nq(h));else throw Error(`length mismatch: ${a} ; ${b}`);
else throw Error(`length mismatch: ${a} ; ${b}`);f=d.head;g=e.head}d.finish();e.finish();return c.build()}transform(a,b){if(this.isIdentity(a)||this.isIdentity(b))return xp(b,a);const c=a.zd(b.pre,0),d=b.zd(a.pre,0),e=this.le(),f=this.le();for(var g=c.head,h=d.head;g||h;){if(g?.type===1)h=c.FE(g.type,g.length),f.append(Nq(h.length)),e.append(h);else if(h?.type===1){var k=d.FE(h.type,h.length);f.append(k);e.append(Nq(h.length))}else if(g&&h)k=Math.min(g.length,h.length),g=c.FE(g.type,k),h=d.FE(h.type,
k),f.append(h),e.append(g);else throw Error(`length mismatch (${a} x ${b})`);g=c.head;h=d.head}c.finish();d.finish();return xp(f.build(),e.build())}El(){return pwb}identity(){return pwb}apply(a){return a}Xl(a){return a}Eh(){}Hi(a,b){return a===b}equals(a){return this===a||a instanceof __c.Bs}};__c.Bs.prototype.Wg=ba(156);__c.Bs.prototype.zf=ba(134);jnb=new Map;Sq=__c.Sq=new __c.Bs;var twb,swb;
Cs=__c.Cs=class extends mr{ee(){return new mnb(this.eD)}OX(){return Uq.empty}Ke(a={}){return{x:a.x||Sq.le().build(),y:a.y||Sq.le().build(),attrs:a.attrs||Qq(this).build()}}isIdentity(a){return Sq.isIdentity(a.x)&&Sq.isIdentity(a.y)&&a.attrs.items.isEmpty()}compose(a,b){const c=Sq.compose(a.x,b.x),d=Sq.compose(a.y,b.y);a=qnb(this,a.attrs,b.x,b.y);if(b.attrs.items.isEmpty())return this.Ke({x:c,y:d,attrs:a});const e=Qq(this);onb(a,b.attrs,e,(f,g,h)=>{g?h?(ka(this.eD(f,g.n,h.o)),f={o:g.o,n:h.n}):f=g:
f=h;return f});return{x:c,y:d,attrs:e.build()}}iQa(a,b,c,d){return Sq.isIdentity(c)&&Sq.isIdentity(d)||b.items.isEmpty()?b:pnb(a,this.eD,b,c,d)}transform(a,b){const c=wp.ts(),{ru:d,$u:e}=zp(c,Sq.transform(a.x,b.x)),{ru:f,$u:g}=zp(c,Sq.transform(a.y,b.y));a=qnb(this,a.attrs,d,f);b=qnb(this,b.attrs,e,g);if(a.items.isEmpty()||b.items.isEmpty()){var h=this.Ke({x:d,y:f,attrs:b});a=this.Ke({x:e,y:g,attrs:a});return c.build(h,a)}var k=Math.max(a.lr,b.lr),m=Math.max(a.GB,b.GB);a=a.zd(void 0,k,m);k=b.zd(void 0,
k,m);b=Qq(this);m=Qq(this);for(var n=a.head,p=k.head;n||p;){if(n&&n.type===0||p&&p.type===0){n=a.Hv();p=k.Hv();const y=b.Hv(),B=m.Hv();for(var q=n.head,v=p.head;q||v;){if(q&&q.type===0||v&&v.type===0){q=n.ov();v=p.ov();for(h of nnb(q,v)){q=h;v=n.attrs[h];var x=p.attrs[h];v&&x?(ka(this.eD(q,v.o,x.o)),q=yp({o:x.n,n:v.n})):q=xp(x,v);const {ru:C,$u:D}=zp(c,q);y.uk(h,D);B.uk(h,C)}}else if(q&&v)q=Math.min(q.length,v.length),n.eo(q),p.eo(q),y.SB(q),B.SB(q);else if(q)q=q.length,n.eo(q),y.SB(q),B.SB(q);else if(v)q=
v.length,p.eo(q),y.SB(q),B.SB(q);else throw Error();q=n.head;v=p.head}n.finish();p.finish();y.finish();B.finish()}else if(n&&p)n=Math.min(n.length,p.length),Rq(a,n),Rq(k,n),b.rows(n),m.rows(n);else if(n)n=n.length,Rq(a,n),b.rows(n),m.rows(n);else if(p)n=p.length,Rq(k,n),b.rows(n),m.rows(n);else throw Error();n=a.head;p=k.head}a.finish();k.finish();h=this.Ke({x:d,y:f,attrs:m.build()});a=this.Ke({x:e,y:g,attrs:b.build()});return c.build(h,a)}El(a){a=a.attrs.zd();const b=Qq(this);for(var c=a.head;c;){if(c.type===
0){c=a.Hv();const e=b.Hv();for(var d=c.head;d;){if(d.type===0){d=c.ov();for(const f of Vq(d))d=c.attrs[f],e.uk(f,d&&{o:d.n,n:d.o})}else d=d.length,c.eo(d),e.SB(d);d=c.head}c.finish();e.finish()}else c=c.length,Rq(a,c),b.rows(c);c=a.head}return this.Ke({attrs:b.build()})}identity(){return{x:Sq.le().build(),y:Sq.le().build(),attrs:Qq(this).build()}}apply(a,b){a=this.iQa("apply",a,b.x,b.y);if(b.attrs.items.isEmpty())return a;const c=this.ee();onb(a,b.attrs,c,(d,e,f)=>this.dme(d,e,f));return c.build()}Xl(a,
b){if(b.attrs.items.isEmpty())return this.iQa("unapply",a,b.x,b.y);const c=this.ee();onb(a,b.attrs,c,(d,e,f)=>this.aGf(d,e,f));return this.iQa("unapply",c.build(),b.x,b.y)}Eh(a,b){if(a instanceof Uq&&b==null)return a;a=a.zd(b);const c=this.ee();for(var d=a.head;d;){if(d.type===0){d=a.Hv();const f=c.Hv();for(var e=d.head;e;){if(e.type===0){e=d.ov();for(const g of Vq(e))(b==null||b(g))&&f.uk(g,d.attrs[g])}else e=e.length,d.eo(e),f.SB(e);e=d.head}d.finish();f.finish()}else d=d.length,Rq(a,d),c.rows(d);
d=a.head}return c.build()}Hi(a,b){return a.equals(b)}equals(a){return this===a?!0:a instanceof Cs?this.eD===a.eD:!1}constructor(a){super();this.eD=a;this.zYd=(b,c,d)=>{if(c===d)return!0;if(c&&d){const e=c.n,f=d.n;return this.eD(b,c.o,d.o)&&this.eD(b,e,f)}return!c&&!d};this.dme=(b,c,d)=>d!=null?(ka(this.eD(b,c,d.o),"{}: {} != {}",b,c,d.o),d.n):c;this.aGf=(b,c,d)=>d!=null?(ka(this.eD(b,c,d.n)),d.o):c}};Cs.prototype.Wg=ba(155);Cs.prototype.zf=ba(133);
twb=class{isEmpty(){return!this.items.length}zd(a){return new swb(this.items,this.length,a)}forEach(a,{grad:b,Bc:c}){for(const d of this.items)switch(d.type){case 0:b&&b(d.value);break;case 1:c&&c(d.length);break;default:throw new r(d);}(a=Math.max(0,a-this.length))&&c&&c(a)}equals(a,b){if(this===a)return!0;if(this.length!==a.length)return!1;const c=this.zd();a=a.zd();for(var d=c.head,e=a.head;d||e;){if(!d||!e)return!1;switch(d.type){case 0:if(e.type!==0)return!1;d=c.ov();e=a.ov();if(d!=null?e==null||
!b(d,e):e!=null)return!1;break;case 1:if(e.type!==1||d.length!==e.length)return!1;c.eo(d.length);a.eo(e.length);break;default:throw new r(d);}d=c.head;e=a.head}return!0}toString(a="C",b="G",c=JSON.stringify){return this.items.map(d=>{switch(d.type){case 1:return`${a}${d.length}`;case 0:return`${b}${c(d.value)}`;default:throw new r(d);}}).join()}constructor(a,b){this.items=a;this.length=b}};__c.uwb=new twb([],0);
swb=class{get head(){return this.Gm}eo(a){var b=this.Gm;if(!b||b.type!==1)throw Error(`expected cell, found: ${b&&b.type}`);b=b.length;a=Math.min(a,b);this.Gm=a<b?rnb(b-a):this.input[this.i++];return a}ov(){const a=this.Gm;if(a&&a.type!==1)return this.Gm=this.input[this.i++],a.value}finish(){ka(this.Gm==null,"stream not empty: {}",this.Gm)}constructor(a,b,c=0){this.i=0;c=Math.max(0,c-b);this.length=b+c;this.input=c?[...a,rnb(c)]:a;this.Gm=this.input.length?this.input[this.i++]:void 0}};
Tq=__c.Tq=class{grad(a){if(a==null)return this;ka(this.ywa==null,"nextGrad already set: {}",this.ywa);this.ywa=a;return this}Bc(a){if(a<=0)return this;this.ywa!=null&&(this.xwa&&(this.items.push(rnb(this.xwa)),this.xwa=0),this.items.push({type:0,value:this.ywa}),this.ywa=void 0);this.xwa+=a;this.k9+=a;return this}build(){this.ywa!=null?(ka(this.xwa!==0),this.items.push(rnb(this.xwa)),this.items.push({type:0,value:this.ywa}),this.xwa=0,this.ywa=void 0):this.k9-=this.xwa;return new twb(this.items,this.k9)}constructor(){this.items=
[];this.xwa=this.k9=0;this.ywa=void 0}};
Uq=__c.Uq=class{static of(a,b,c,d){return b.isEmpty()?Uq.empty:new Uq(a,b,c,d)}zd(a=()=>!0,b=0,c=0){b=Math.max(this.lr,b);c=Math.max(this.GB,c);const d=this.items.zd(c);return new vwb(this.eD,d,a,b,c)}serialize(a){const b=a.Hv;this.items.forEach(this.items.length,{Bc:a.rows,grad:c=>{const {SB:d,grad:e,Job:f}=b();c.forEach(c.length,{Bc:d,grad:e});f()}})}equals(a){return this===a?!0:a instanceof Uq&&this.GB===a.GB&&this.lr===a.lr?this.items.equals(a.items,(b,c)=>b.equals(c,(d,e)=>xnb(this.eD,d,e))):
!1}toString(){return this.items.toString("R","G",a=>a.toString("C","G",lnb))}constructor(a,b,c,d){this.eD=a;this.items=b;this.lr=c;this.GB=d}};Uq.empty=new Uq((a,b,c)=>b===c,__c.uwb,0,0);
var vwb=class{get head(){return this.t3a.head}Ilc(a){ka(this.z_==null);const b=this.Hv();var c=b.head;let d=0;for(;c;){if(c.type===0)b.ov();else{c=b.eo(c.length);if(!Wq(b.attrs)){const e={...b.attrs};for(let f=0;f<c;f++)a(e,d+f)}d+=c}c=b.head}b.finish();return this.head?Rq(this,1):0}get gaf(){ka(this.head!=null);ka(this.z_==null);return this.head.type===1&&this.wC.isEmpty()}Hv(){ka(this.z_==null);var a=this.t3a.ov();if(a){a=a.zd(this.lr);for(var b=this.wC.zd(this.lr),c=new Tq,d=a.head,e=b.head;d||
e;){if(d&&d.type===0||e&&e.type===0){const g=a.ov(),h=b.ov();b:{d=this.SNa;e=this.Nva;if(!g){d=h;break b}const k={...h};for(f in g){if(e&&!e(f))continue;const m=g[f];ia(tnb(d,f,h?.[f],m.t));m.b?k[f]=m.b:delete k[f]}d=Wq(k)?void 0:k}c.grad(d)}else if(d&&e)d=Math.min(d.length,e.length),a.eo(d),b.eo(d),c.Bc(d);else throw Error("length mismatch");d=a.head;e=b.head}var f=c.build()}else f=this.wC;this.z_=f;return new wwb(this.SNa,this.Nva,this.z_.zd(this.lr),this.KJc)}finish(){ka(this.z_==null);this.t3a.finish()}constructor(a,
b,c,d,e){this.SNa=a;this.t3a=b;this.Nva=c;this.lr=d;this.GB=e;this.wC=__c.uwb;this.z_=void 0;this.KJc=()=>{ka(this.z_!=null);this.wC=this.z_;this.z_=void 0}}},mnb=class{Hv(){ka(this.jDb==null);return this.jDb=new xwb(this.eD,this.Cue)}rows(a){this.Zpc.Bc(a);return this}build(){ka(this.jDb==null);ka(this.wC.isEmpty(),"prevDxs not empty: {}",this.wC);const a=this.Zpc.build();return Uq.of(this.eD,a,this.lr,a.length)}constructor(a){this.eD=a;this.Zpc=new Tq;this.lr=0;this.wC=__c.uwb;this.jDb=void 0;this.Cue=
b=>{ka(this.jDb!=null);this.lr=Math.max(this.lr,b.length);var c=this.wC.zd(this.lr);const d=b.zd(this.lr),e=new Tq;for(var f=c.head,g=d.head;f||g;){if(f&&f.type===0||g&&g.type===0)f=c.ov(),g=d.ov(),f=__c.wnb(this.eD,f,g),e.grad(f);else if(f&&g)f=Math.min(f.length,g.length),c.eo(f),d.eo(f),e.Bc(f);else throw Error("length mismatch");f=c.head;g=d.head}c=e.build();c.isEmpty()||this.Zpc.grad(c);this.wC=b;this.jDb=void 0}}},wwb=class{get attrs(){return this.xK}get head(){return this.jOb.head}eo(a){return this.jOb.eo(a)}ov(){const a=
this.jOb.ov();this.Xra(a);return a}finish(){this.jOb.finish();this.Zk()}Xra(a){if(a)for(const b in a){if(!this.Nva(b))continue;const c=__c.unb(this.SNa,b,this.xK[b],a[b]);c==null?delete this.xK[b]:this.xK[b]=c}}constructor(a,b,c,d){this.SNa=a;this.Nva=b;this.jOb=c;this.Zk=d;this.xK={}}},xwb=class{uk(a,b){var c=this.SNa,d=this.xK[a];(b=c(a,d,b)?void 0:{oc:d,r:b})?(this.IL||(this.IL={}),this.IL[a]=b):this.IL&&(delete this.IL[a],Wq(this.IL)&&(this.IL=void 0));return this}attrs(a){for(const b of Vq(a))this.uk(b,
a[b]);return this}SB(a){if(a<=0)return this;this.Xra();this.MCa.Bc(a);return this}Xra(){if(this.IL){var a=this.IL;this.IL=void 0;for(const b in a){const c=__c.unb(this.SNa,b,this.xK[b],a[b]);c==null?delete this.xK[b]:this.xK[b]=c}this.MCa.grad(a)}}finish(){this.Xra();ka(Wq(this.xK));const a=this.MCa.build();this.Zk(a)}constructor(a,b){this.SNa=a;this.Zk=b;this.xK={};this.IL=void 0;this.MCa=new Tq}};var ywb=class{static C(a){M(a,{DQc:jr,Ukc:jr})}get lr(){return this.cols.length}get GB(){return this.rows.length}get DQc(){const a=new Map;this.rows.forEach((b,c)=>a.set(b,c));return a}get Ukc(){const a=new Map;this.cols.forEach((b,c)=>a.set(b,c));return a}get(a,b){a=this.rows[a];b=this.cols[b];if(a!=null&&b!=null){var c=this.values.get(this.K3(a,b));c==null&&uob()&&(c=new qr,this.values.set(this.K3(a,b),c));return c?.get()}}set(a,b,c){a=ynb(this,a);b=znb(this,b);const d=this.values.get(this.K3(a,
b));d?d.set(c):this.values.set(this.K3(a,b),new qr(c))}delete(a,b){a=this.rows[a];b=this.cols[b];a!=null&&b!=null&&(this.values.get(this.K3(a,b))?.set(void 0),this.values.delete(this.K3(a,b)))}forEach(a){for(const c of this.rows)for(const d of this.cols){var b=this.values.get(this.K3(c,d));b!=null&&(b=b.get(),b!=null&&a(b,c,d))}}K3(a,b){return`${a}:${b}`}constructor(){this.faf=(ywb.C(this),0);this.caf=0;this.rows=kr.array([],{deep:!1});this.cols=kr.array([],{deep:!1});this.values=new Map}};var zwb=class extends pr{get lr(){return this.grid.lr}get GB(){return this.grid.GB}get(a,b,c){b=this.grid.get(b,c);if(b!=null&&(a=this.tf.Vba(a,b),Object.keys(a).length!==0))return a}set(a,b,c){const {fyf:d,Sxf:e,APb:f=d,WKe:g=e}=b;b=new Set;const h=Qq(this.domain);h.rows(d);for(let n=d;n<=f;n++){const p=h.Hv();p.SB(e);for(let q=e;q<=g;q++){var k=this.grid.get(n,q);k=Cnb(this,a,k,c);for(const v of b)p.uk(v,void 0);p.attrs(k);for(const v of Object.keys(k))b.add(v);p.SB(1)}for(const q of b)p.uk(q,void 0);
p.finish();h.rows(1)}a=h.Hv();a.SB(e);for(c=e;c<=g;c++){for(var m of b)a.uk(m,void 0);a.SB(1)}for(const n of b)a.uk(n,void 0);a.finish();m=this.domain.Ke({attrs:h.build()});this.xq(m)}lX(){const a=this.domain.ee();for(let b=0;b<=this.GB;b++){const c=a.Hv();let d={};for(let e=0;e<=this.lr;e++){const f=this.grid.get(b,e);for(const g of Fnb(d,f))c.uk(g,f?.[g]);d=f;c.SB(1)}c.finish();a.rows(1)}return a.build()}destroy(a){const b=this.snapshot();vp(this.domain,b,a)}ki(a){const b=this.snapshot(),c=Qq(this.domain);
onb(b,a,c,(d,e,f)=>e==null&&f==null?void 0:{o:e,n:f});this.xq(this.domain.Ke({attrs:c.build()}));return!0}T3(a){this.Dgc(a.x);this.Egc(a.y);Enb(this,a.attrs)}Dgc(a){if(a.pre!==0||a.post!==0){var b=0;a=a.zd();for(var c=a.head;c;)c.type===0?b+=a.GA(c.length):(c=Oq(a,c.length),Anb(this.grid,b,c),b+=c),c=a.head}}Egc(a){let b=0;a=a.zd();for(var c=a.head;c;)c.type===0?b+=a.GA(c.length):(c=Oq(a,c.length),Bnb(this.grid,b,c),b+=c),c=a.head}write(a,b,c){c==null||Object.keys(c).length===0?this.grid.delete(a,
b):this.grid.set(a,b,c)}constructor(a,b,c,d){super(a);this.tf=b;this.domain=c;this.grid=new ywb;__c.snb(d,b.Rt,(e,f,g)=>{this.grid.set(f,g,e)});vp(this.domain,d,this.lX())}},Awb=class extends ur{ee(){return this.domain.ee()}bx(a,b){return new zwb(a,this.tf,this.domain,b)}Um(a){return a}connect(a,b){return this.Um(a).connect(b)}snapshot(a){return this.Um(a).snapshot()}destroy(a,b){this.Um(a).destroy(b)}Eh(a){return this.domain.Eh(a,b=>this.tf.Rt(b))}ki(a,b){return this.Um(a).ki(b)}constructor(){var a=
__c.Ds;super();this.tf=a;this.domain=new Cs(a.kKa)}};var Bwb,Gwb,Hwb,Zq,Jwb,Iwb,Ewb,Dwb,Fwb,Kwb,Lwb;
__c.Cwb=class{get lr(){return this.grid.lr}get GB(){return this.grid.GB}get rows(){return this.grid.rows}forEach(a){this.grid.forEach((b,c,d)=>{a(d.state,Xq(b,c,d.right,d.bottom))})}map(a){const b=new Bwb;this.forEach((c,d)=>{b.add(d,a(c,d))});return b.build()}get(a,b){var c=this.grid.rows[b];if(c!=null&&(c=c.cells[a],c!=null))return __c.Gnb(Xq(a,b,c.right,c.bottom),c.state)}values(){const a=[];this.forEach((b,c)=>{a.push(__c.Gnb(c,b))});return a}zd(){return this.grid.zd()}constructor(a){this.grid=a}};
__c.Cwb.prototype.kBc=ba(217);Bwb=class{add(a,b){Rnb(this.fue,a);this.YPd.add(a.left,a.top,a.right,a.bottom,{right:a.right,bottom:a.bottom,state:b});return this}build(){const a=this.YPd.build();return a.isEmpty?Dwb:new __c.Cwb(a)}constructor(){this.YPd=new Ewb;this.fue=new Fwb}};Gwb=class{constructor(a,b){this.type=0;this.o=a&&{right:a.right,bottom:a.bottom,state:a.state};this.n=b&&{right:b.right,bottom:b.bottom,state:b.state}}};Hwb=class{constructor(a,b){this.bounds=a;this.delta=b;this.type=1}};
Zq=class{add(a,b,c){if(c==null)return this;switch(c.type){case 1:return this.addUpdate(a,b,c);case 0:let e=a,f=b;if(c.o){var d=Xq(a,b,c.o.right,c.o.bottom);Rnb(this.iGd,d);e=Math.max(e,c.o.right);f=Math.max(f,c.o.bottom)}c.n&&(d=Xq(a,b,c.n.right,c.n.bottom),Rnb(this.oFd,d),e=Math.max(e,c.n.right),f=Math.max(f,c.n.bottom));this.Y5a.add(a,b,e,f,c);return this;default:throw new r(c);}}addUpdate(a,b,c){let d=a,e=b;if(c.bounds?.o){var f=Xq(a,b,c.bounds.o.right,c.bounds.o.bottom);Rnb(this.iGd,f);d=Math.max(d,
c.bounds.o.right);e=Math.max(e,c.bounds.o.bottom)}c.bounds?.n&&(f=Xq(a,b,c.bounds.n.right,c.bounds.n.bottom),Rnb(this.oFd,f),d=Math.max(d,c.bounds.n.right),e=Math.max(e,c.bounds.n.bottom));this.Y5a.add(a,b,d,e,c);return this}build(){return this.Y5a.build()}constructor(){this.Y5a=new Ewb;this.iGd=new Fwb;this.oFd=new Fwb}};
Jwb=class{get isEmpty(){return this.rows.length===0}forEach(a){this.rows.forEach(({cells:b},c)=>{b.forEach((d,e)=>{a(e,c,d)})})}values(){const a=[];this.forEach((b,c,d)=>a.push([b,c,d]));return a}zd(){return new Iwb(this.rows)}constructor(a,b,c){this.rows=a;this.lr=b;this.GB=c}};
Iwb=class{get head(){const a=this.rows[this.y];return a?.cells[this.x]&&{x:this.x,y:this.y,value:a.cells[this.x]}}uu(){const a=l(this.head),b=l(this.rows[this.y]);this.x++;Hnb(this);b.cells[this.x]==null&&(this.y++,this.x=0,Inb(this),Hnb(this));return a}finish(){ka(this.head==null)}constructor(a){this.rows=a;this.x=this.y=0;Inb(this);Hnb(this)}};
Ewb=class{add(a,b,c,d,e){ia(a<=c);ia(b<=d);this.Uba==null||this.Uba.y<b?(this.flush(),this.rows.length&&ka(this.rows.length<=b),this.Uba={y:b,maxY:d,cells:[]},this.Uba.cells[a]=e):this.Uba.y===b?(ka(this.Uba.cells.length<=a),this.Uba.maxY=Math.max(this.Uba.maxY,d),this.Uba.cells[a]=e):ka(this.Uba.y>b);this.lr=Math.max(this.lr,c+1);this.GB=Math.max(this.GB,d+1);return this}flush(){if(this.Uba){const {y:a,...b}=this.Uba;this.rows[a]=b;this.Uba=void 0}}build(){this.flush();return new Jwb(this.rows,this.lr,
this.GB)}constructor(){this.rows=[];this.GB=this.lr=0}};Dwb=new __c.Cwb(new Jwb([],0,0));
__c.Fs=class extends mr{ee(){return new Bwb}OX(){return Dwb}replace(a,b){return new Gwb(a,b)}update(a,b){a=a==null||Yq(a.o,a.n)?void 0:a;b=b==null||this.component.isIdentity(b)?void 0:b;return a!=null||b!=null?new Hwb(a,b):void 0}Ke(a={}){const b=a.cells||(new Zq).build();return{x:a.x||Sq.le().build(),y:a.y||Sq.le().build(),cells:b,E5:a.E5||Es.project(b)}}isIdentity(a){return Sq.isIdentity(a.x)&&Sq.isIdentity(a.y)&&a.cells.isEmpty&&Es.isIdentity(a.E5)}compose(a,b){const c=Jnb(this,a.cells,b.x,b.y),
d=Es.expand(a.E5,b.x,b.y);return{x:Sq.compose(a.x,b.x),y:Sq.compose(a.y,b.y),cells:Mnb(this,c,b.cells),E5:Es.compose(d,b.E5)}}transform(a,b){const c=wp.ts(),{ru:d,$u:e}=zp(c,Sq.transform(a.x,b.x)),{ru:f,$u:g}=zp(c,Sq.transform(a.y,b.y)),h=Jnb(this,a.cells,d,f),k=Jnb(this,b.cells,e,g);a=Es.expand(a.E5,d,f);b=Es.expand(b.E5,e,g);const {ru:m,$u:n}=zp(c,Es.transform(a,b)),p=new Fwb,q=Es.cursor(a,Math.max(h.lr,k.lr),Math.max(h.GB,k.GB)),v=new Zq,x=new Zq;Knb(h.zd(),k.zd(),(y,B,C,D)=>{if(C!=null||D!=null){a:if(C==
null||D==null)var F=xp(D,C);else switch(C.type){case 1:b:{switch(D.type){case 1:F=wp.ts();const {ru:N,$u:Q}=C.delta&&D.delta?zp(F,this.component.transform(C.delta,D.delta)):xp(D.delta,C.delta);if(C.bounds&&D.bounds){C=C.bounds;D=D.bounds;ka(Yq(C.o,D.o));const W={right:Math.min(C.n.right,D.n.right),bottom:Math.min(C.n.bottom,D.n.bottom)},U=wp.ts();Vkb(U,!Yq(D.n,W));Wkb(U,!Yq(C.n,W));C=U.build({o:D.n,n:W},{o:C.n,n:W});C=zp(F,C)}else C=xp(D.bounds,C.bounds);const {ru:R,$u:T}=C;F=F.build(this.update(R,
N),this.update(T,Q));break b;case 0:ka(D.o!=null);C.bounds&&ka(Yq(C.bounds.o,D.o));F=new wp(this.replace({...(C.bounds?C.bounds.n:D.o),state:C.delta?this.component.apply(D.o.state,C.delta):D.o.state},D.n),void 0,!1,!0);break b;default:throw new r(D);}F=void 0}break a;case 0:b:switch(D.type){case 1:ka(C.o!=null);D.bounds&&ka(Yq(C.o,D.bounds.o));F=yp(this.replace({...(D.bounds?D.bounds.n:C.o),state:D.delta?this.component.apply(C.o.state,D.delta):C.o.state},C.n));break b;case 0:ka(__c.$q(this,C.o,D.o));
F=yp(this.replace(D.n,C.n));break b;default:throw new r(D);}break a;default:throw new r(C);}var {ru:G,$u:J}=zp(c,F);G&&(F=Pnb(this,y,B,G,p,q))&&(G=Lnb(this,G,F),J=Lnb(this,J,F),Vkb(c));G&&x.add(y,B,G);J&&v.add(y,B,J)}});q.finish();return c.build({x:d,y:f,cells:x.build(),E5:m},{x:e,y:g,cells:v.build(),E5:n})}El(a){const b=new Zq;a.cells.forEach((d,e,f)=>{if(f!=null)switch(f.type){case 1:f=this.update(f.bounds&&{o:f.bounds.n,n:f.bounds.o},f.delta&&this.component.El(f.delta));b.add(d,e,f);break;case 0:b.add(d,
e,this.replace(f.n,f.o));break;default:throw new r(f);}});const c=b.build();return{x:Sq.El(a.x),y:Sq.El(a.y),cells:c,E5:Es.project(c)}}identity(){return this.Ke()}apply(a,b){a=this.iQa(a,b.x,b.y);const c=this.ee();Knb(a.zd(),b.cells.zd(),(d,e,f,g)=>{if(f!=null||g!=null)if(g==null)ka(f!=null),c.add(Xq(d,e,f.right,f.bottom),f.state);else switch(g.type){case 1:ka(f!=null);g.bounds&&ka(Yq(g.bounds.o,f));c.add({...(g.bounds?g.bounds.n:f),left:d,top:e},g.delta?this.component.apply(f.state,g.delta):f.state);
break;case 0:g.o&&(ka(f!=null),ka(__c.$q(this,f,g.o)));g.n&&c.add({left:d,top:e,right:g.n.right,bottom:g.n.bottom},g.n.state);break;default:throw new r(g);}});return c.build()}iQa(a,b,c){if(Sq.isIdentity(b)&&Sq.isIdentity(c))return a;const d=new Set,e=new Set;a.forEach((k,m)=>{d.add(m.left);d.add(m.right);e.add(m.top);e.add(m.bottom)});const f=Pq(b,d),g=Pq(c,e),h=new Bwb;a.forEach((k,m)=>{m={left:l(f.get(m.left)),right:l(f.get(m.right)),top:l(g.get(m.top)),bottom:l(g.get(m.bottom))};h.add(m,k)});
return h.build()}Xl(a,b){const c=this.ee();Knb(a.zd(),b.cells.zd(),(d,e,f,g)=>{if(f!=null||g!=null)if(g==null)ka(f!=null),c.add(Xq(d,e,f.right,f.bottom),f.state);else switch(g.type){case 1:ka(f!=null);g.bounds&&ka(Yq(g.bounds.n,f));c.add({...(g.bounds?g.bounds.o:f),left:d,top:e},g.delta?this.component.Xl(f.state,g.delta):f.state);break;case 0:g.n&&(ka(f!=null),ka(__c.$q(this,f,g.n)));g.o&&c.add({left:d,top:e,right:g.o.right,bottom:g.o.bottom},g.o.state);break;default:throw new r(g);}});return this.N8b(c.build(),
b.x,b.y)}N8b(a,b,c){if(Sq.isIdentity(b)&&Sq.isIdentity(c))return a;const d=new Set,e=new Set;a.forEach((k,m)=>{d.add(m.left);d.add(m.right);e.add(m.top);e.add(m.bottom)});const f=knb(b,d),g=knb(c,e),h=new Bwb;a.forEach((k,m)=>{m={left:l(f.get(m.left)),right:l(f.get(m.right)),top:l(g.get(m.top)),bottom:l(g.get(m.bottom))};h.add(m,k)});return h.build()}Eh(a){return a.map(b=>this.component.Eh(b))}Hi(a,b){if(a===b)return!0;a=a.zd();b=b.zd();let c=a.head,d=b.head;for(;c||d;){if(c==null||d==null||c.x!==
d.x||c.y!==d.y||c.value.bottom!==d.value.bottom||c.value.right!==d.value.right||!this.component.Hi(c.value.state,d.value.state))return!1;a.uu();b.uu();c=a.head;d=b.head}return!0}equals(a){return this===a||a instanceof __c.Fs&&this.component.equals(a.component)}constructor(a){super();this.component=a}};__c.Fs.prototype.Wg=ba(154);__c.Fs.prototype.zf=ba(132);
Fwb=class{append(a){for(let b=a.top;b<=a.bottom;b++)for(let c=a.left;c<=a.right;c++){ka(!this.readBuffer(c,b));const {D3d:d,I3d:e}=Snb(this,c,b);this.buffer[e]||(this.buffer[e]=[]);this.buffer[e][d]=!0}}readBuffer(a,b){const {D3d:c,I3d:d}=Snb(this,a,b);return this.buffer[d]&&this.buffer[d][c]}constructor(){this.buffer=[];this.qAa=this.Gja=0}};
__c.Gs=class extends mr{isIdentity(a){return a.items.isEmpty()}compose(a,b){if(this.isIdentity(a))return b;if(this.isIdentity(b))return a;const c=this.pib.ee();onb(a,b,c,(d,e,f)=>e||f);return c.build()}transform(a,b){return xp(b,a)}El(a){return a}identity(){return this.id}apply(a){return a}Xl(a){return a}Eh(){}Hi(a,b){return a===b}equals(a){return this===a||a instanceof __c.Gs}le(){return new Kwb(()=>this.pib.ee(),a=>Tkb(this,a))}cursor(a,b,c){return new Lwb(a,b,c)}project(a){const b=this.le();a.forEach((c,
d,e)=>{switch(e.type){case 1:e.bounds&&b.add(Xq(c,d,e.bounds.n.right,e.bounds.n.bottom));break;case 0:e.n&&b.add(Xq(c,d,e.n.right,e.n.bottom));break;default:throw new r(e);}});return b.build()}expand(a,b,c){b=this.pib.Ke({x:Tnb(b),y:Tnb(c)});return this.pib.apply(a,b)}constructor(){super();this.pib=new Cs((a,b,c)=>b===c);this.id=this.pib.ee().build()}};__c.Gs.prototype.Wg=ba(153);__c.Gs.prototype.zf=ba(131);
Kwb=class{add(a){const b=this.Y5a(),c=a.left*2,d=a.top*2,e=a.right*2;a=a.bottom*2;b.rows(d);b.Hv().SB(c).attrs({value:!0}).SB(e-c+1).attrs({value:void 0}).finish();b.rows(a-d+1);b.Hv().SB(c).attrs({value:void 0}).SB(e-c+1).attrs({value:void 0}).finish();this.Fla.push(b.build());return this}build(){return this.Fla.length?this.reduce(this.Fla):this.Y5a().build()}constructor(a,b){this.Y5a=a;this.reduce=b;this.Fla=[]}};
Lwb=class{get L3d(){ka(this.Ara%2===0);return this.Ara/2}Hv(){ka(this.PLa===0);this.VV=this.zd.Hv();return this}get value(){ka(this.VV!=null);return this.VV.attrs.value}Ilc(a){ka(this.VV!=null);for(var b=this.VV.head;b!=null;){if(b.type===0)this.VV.ov();else if(b=this.VV.eo(b.length),this.Ara%2===0&&this.VV.attrs.value)for(let c=0;c<b;c++)this.PLa%2===0&&a(this.PLa/2,this.Ara/2),this.PLa++;else this.PLa+=b;b=this.VV.head}return this}Job(){for(ka(this.VV!=null);this.VV.head;)this.VV.head.type===0?
this.VV.ov():this.VV.eo(this.VV.head.length);this.VV.finish();this.VV=void 0;this.PLa=0;return this}finish(){Nnb(this,this.zd.GB);this.zd.head&&(this.Hv(),this.Job());this.zd.finish()}constructor(a,b,c){this.PLa=this.Ara=0;this.zd=a.zd(void 0,b*2,c*2)}};Es=__c.Es=new __c.Gs;var Mwb=class extends pr{get(a,b){a=this.grid.get(a,b);if(a!=null)return{span:a.span,ref:a.ak.mutable}}forEach(a){this.grid.forEach((b,c,d)=>{b.ySa.left===d&&b.ySa.top===c&&a(b.ak.mutable,b.span)})}set(a,b){b=(new Zq).add(a.left,a.top,this.domain.replace(void 0,{right:a.right,bottom:a.bottom,state:b})).build();this.xq(this.domain.compose(Unb(this,a),this.domain.Ke({cells:b})));return l(this.get(a.top,a.left))}delete(a){this.xq(Unb(this,a))}Mlb(a,b,c){ka(a.span.left===c.left);ka(a.span.top===c.top);
ka(a.span.right===c.right);ka(a.span.bottom===c.bottom);for(let d=c.top;d<=c.bottom;d++)for(let e=c.left;e<=c.right;e++)ka(this.grid.get(d,e)===a),this.grid.delete(d,e);a.ak.destroy(b)}T3(a){this.Dgc(a.x);this.Egc(a.y);a.cells.forEach((b,c,d)=>{switch(d.type){case 1:var e=l(this.grid.get(c,b));d.delta&&e.ak.wR(d.delta);if(d.bounds){ka(e.span.left===b&&e.span.top===c);const h=d.bounds.o;var f=d.bounds.n;ka(e.span.right===h.right&&e.span.bottom===h.bottom);if(h.right!==f.right||h.bottom!==f.bottom){d=
Math.min(h.right,f.right);f=Math.min(h.bottom,f.bottom);for(var g=f+1;g<=h.bottom;g++)for(let k=b;k<=h.right;k++)ka(this.grid.get(g,k)===e),this.grid.delete(g,k);for(b=d+1;b<=h.right;b++)for(g=c;g<=f;g++)ka(this.grid.get(g,b)===e),this.grid.delete(g,b);e.ySa.right=znb(this.grid,d);e.ySa.bottom=ynb(this.grid,f)}}break;case 0:d.o&&(e=l(this.grid.get(c,b)),this.Mlb(e,d.o.state,{left:b,top:c,right:d.o.right,bottom:d.o.bottom}));break;default:throw new r(d);}});a.cells.forEach((b,c,d)=>{switch(d.type){case 1:if(d.bounds){const g=
l(this.grid.get(c,b));var e=d.bounds.o;d=d.bounds.n;var f=Math.min(e.right,d.right);e=Math.min(e.bottom,d.bottom);for(let h=e+1;h<=d.bottom;h++)for(let k=b;k<=d.right;k++)ka(this.grid.get(h,k)==null),this.grid.set(h,k,g);for(b=f+1;b<=d.right;b++)for(f=c;f<=e;f++)ka(this.grid.get(f,b)==null),this.grid.set(f,b,g);g.ySa.right=znb(this.grid,d.right);g.ySa.bottom=ynb(this.grid,d.bottom)}break;case 0:d.n&&Ynb(this,d.n.state,{left:b,top:c,right:d.n.right,bottom:d.n.bottom});break;default:throw new r(d);
}})}Dgc(a){if(a.pre!==0||a.post!==0){var b=0;a=a.zd();for(var c=a.head;c;)c.type===0?b+=a.GA(c.length):(c=Oq(a,c.length),Anb(this.grid,b,c,d=>d.span.right!==b-1),b+=c),c=a.head}}Egc(a){let b=0;a=a.zd();for(var c=a.head;c;)c.type===0?b+=a.GA(c.length):(c=Oq(a,c.length),Bnb(this.grid,b,c,d=>d.span.bottom!==b-1),b+=c),c=a.head}lX(){const a=this.domain.ee();for(let b=0;b<this.grid.GB;b++)for(let c=0;c<this.grid.lr;c++){const d=this.grid.get(b,c);d!=null&&d.span.top===b&&d.span.left===c&&a.add(d.span,
d.ak.snapshot())}return a.build()}destroy(a){let b=0,c=0;a.forEach(()=>c++);for(let d=0;d<this.grid.GB;d++)for(let e=0;e<this.grid.lr;e++){const f=this.grid.get(d,e);if(f==null||f.span.top!==d||f.span.left!==e)continue;const g=l(a.get(f.span.left,f.span.top));ka(g.span.right===f.span.right&&g.span.bottom===f.span.bottom);f.ak.destroy(g.state);b++}ka(c===b)}ki(a){const b=new Zq,c=new Zq;for(let d=0;d<this.grid.GB;d++)for(let e=0;e<this.grid.lr;e++){const f=this.grid.get(d,e);f!=null&&f.span.top===
d&&f.span.left===e&&b.add(f.span.left,f.span.top,this.domain.replace({right:f.span.right,bottom:f.span.bottom,state:f.ak.snapshot()},void 0))}a.forEach((d,e)=>c.add(e.left,e.top,this.domain.replace(void 0,{right:e.right,bottom:e.bottom,state:d})));this.xq(this.domain.compose(this.domain.Ke({cells:b.build()}),this.domain.Ke({cells:c.build()})));return!0}constructor(a,b,c,d){super(a);this.type=b;this.domain=c;this.grid=new ywb;d.forEach((e,f)=>{Ynb(this,e,f)})}},Xnb=class{get span(){return this.ySa.UId.get()}constructor(a,
b){this.ak=a;this.ySa=b}},Wnb=class{get right(){return this.O6c.get()}set right(a){this.O6c.set(a)}get bottom(){return this.u6c.get()}set bottom(a){this.u6c.set(a)}constructor(a,b){this.fUb=a;this.UId=jr(()=>({left:l(this.fUb.Ukc.get(this.left)),top:l(this.fUb.DQc.get(this.top)),right:l(this.fUb.Ukc.get(this.right)),bottom:l(this.fUb.DQc.get(this.bottom))}),{equals:__c.Olb.structural});this.left=b.left;this.top=b.top;this.O6c=new qr(b.right);this.u6c=new qr(b.bottom)}},Znb=class extends vr{bx(a,b){return new Mwb(a,
this.type,this.domain,b)}Um(a){return a}connect(a,b){return this.Um(a).connect(b)}snapshot(a){return this.Um(a).snapshot()}destroy(a,b){return this.Um(a).destroy(b)}ki(a,b){return this.Um(a).ki(b)}aw(a,b){return new Znb(this.type,a,b)}constructor(a,b,c){super(b,c);this.type=a;this.domain=new __c.Fs(this.type.domain)}};var Nwb,Owb,br,$nb,Hs,Pwb,Qwb;Nwb=new Map;Owb=class{ordinal(a,b){b!=null?this.fhb.set(a,b):this.fhb.delete(a);return this}Kk(a){a.forEach((b,c)=>this.fhb.set(c,b));return this}build(){return this.fhb.size?this.fhb:Nwb}constructor(){this.fhb=new Map}};br=class{toString(){return`R(${this.oldValue??"_"},${this.newValue??"_"})`}constructor(a,b){this.oldValue=a;this.newValue=b;this.type=0}};
$nb=class{toString(){return`U(${this.oldValue},${this.newValue})`}constructor(a,b){this.oldValue=a;this.newValue=b;this.type=1}};Hs=class{static create(a,b){const c=Sq.isIdentity(a),d=b.size===0;return c&&d?Pwb:new Hs(c?Pwb.axis:a,d?Pwb.Kk:b)}toString(){const a=[...this.Kk].map(([b,c])=>`"${b}":${c}`).join(",");return`{${this.axis}|${a}}`}constructor(a,b){this.axis=a;this.Kk=b}};Pwb=new Hs(Sq.le().build(),new Map);
Qwb=class{retain(a){this.axis.retain(a);return this}expand(a){this.axis.expand(a);return this}build(){return Hs.create(this.axis.build(),this.Kk)}constructor(){this.Kk=new Map;this.axis=Sq.le()}};
__c.Is=class extends mr{ee(){return new Owb}le(){return new Qwb}replace(a,b,c){return cr(this.le(),a,b,c).build()}update(a,b,c){return aob(this.le(),a,b,c).build()}Ke(a,b){return Hs.create(a,b)}isIdentity(a){return Sq.isIdentity(a.axis)&&!a.Kk.size}compose(a,b){if(this.isIdentity(a))return b;if(this.isIdentity(b))return a;const c=cob(a.Kk,b.axis),d=new Map;for(const h of bob(c,b.Kk)){var e=c.get(h);const k=b.Kk.get(h);if(e&&k){var f=d,g=f.set;a:{Bo(e.newValue,k.oldValue);switch(e.type){case 0:e=new br(e.oldValue,
k.newValue);break a;case 1:switch(k.type){case 0:e=new br(e.oldValue,k.newValue);break a;case 1:e=new $nb(e.oldValue,k.newValue);break a;default:throw new r(k);}default:throw new r(e);}e=void 0}g.call(f,h,e)}else e?d.set(h,e):k&&d.set(h,k)}return Hs.create(Sq.compose(a.axis,b.axis),d)}transform(a,b){if(this.isIdentity(a)||this.isIdentity(b))return xp(b,a);const c=wp.ts(),{ru:d,$u:e}=zp(c,Sq.transform(a.axis,b.axis));a=cob(a.Kk,d);const f=cob(b.Kk,e);b=new Map;const g=new Map;for(var h of bob(a,f)){var k=
a.get(h);const m=f.get(h);if(k&&m){a:{Bo(k.oldValue,m.oldValue);switch(k.type){case 0:k=yp(new br(m.newValue,k.newValue));break a;case 1:switch(m.type){case 0:k=new wp(new br(k.newValue,m.newValue),void 0,!1,!0);break a;case 1:k=yp(new $nb(m.newValue,k.newValue));break a;default:throw new r(m);}default:throw new r(k);}k=void 0}const {ru:n,$u:p}=zp(c,k);p&&b.set(h,p);n&&g.set(h,n)}else k?b.set(h,k):m&&g.set(h,m)}h=Hs.create(d,g);a=Hs.create(e,b);return c.build(h,a)}El(a){const b=a.Kk.size===0?a.Kk:
Tg(a.Kk,c=>{switch(c.type){case 0:return new br(c.newValue,c.oldValue);case 1:return new $nb(c.newValue,c.oldValue);default:throw new r(c);}});return Hs.create(Sq.El(a.axis),b)}identity(){return Pwb}apply(a,b){if(this.isIdentity(b)||!a.size&&!b.Kk.size)return a;a=this.iQa(a,b.axis);if(!b.Kk.size)return a;const c=new Map(a);for(const [d,e]of b.Kk)b=a.get(d),Bo(b,e.oldValue),e.newValue!=null?c.set(d,e.newValue):c.delete(d);return c}iQa(a,b){if(Sq.isIdentity(b))return a;const c=new Set(a.values()),d=
Pq(b,c);return Tg(a,e=>l(d.get(e)))}Xl(a,b){if(this.isIdentity(b)||!a.size&&!b.Kk.size)return a;if(!b.Kk.size)return this.N8b(a,b.axis);const c=new Map(a);for(const [d,e]of b.Kk){const f=a.get(d);Bo(f,e.newValue);e.oldValue!=null?c.set(d,e.oldValue):c.delete(d)}return this.N8b(c,b.axis)}N8b(a,b){if(Sq.isIdentity(b))return a;const c=new Set(a.values()),d=knb(b,c);return Tg(a,e=>l(d.get(e)))}Eh(a){return new Map(a)}Hi(a,b){return a===b?!0:a.size===b.size&&[...a.keys()].every(c=>a.get(c)===b.get(c))}equals(a){return this===
a||a instanceof __c.Is}constructor(){super();this.OX=Nwb}};__c.Is.prototype.Wg=ba(152);__c.Is.prototype.zf=ba(130);__c.fr=new __c.Is;var Rwb,er,Swb,hob,gr,iob,job,Twb;Rwb=new Map;er=class{static from(a){if(a instanceof er)return a;if(Array.isArray(a)){const [b,c]=a;return new er(b,c)}return new er(a.start,a.end)}toString(){return`[${this.start},${this.end}]`}constructor(a,b){this.start=a;this.end=b}};Swb=class{range(a,b){b?this.Vda.set(a,er.from(b)):this.Vda.delete(a);return this}We(a){a.forEach((b,c)=>this.Vda.set(c,er.from(b)));return this}build(){return this.Vda.size?this.Vda:Rwb}constructor(){this.Vda=new Map}};
hob=class{toString(){return`R(${this.oldValue??"_"},${this.newValue??"_"})`}constructor(a,b){this.oldValue=a;this.newValue=b;this.type="replace"}};gr=class{static from(a){if(a instanceof gr)return a;if(Array.isArray(a)){const [b,c]=a;return new gr(b,c)}return new gr(a.oldValue,a.newValue)}toString(){return`[${this.oldValue},${this.newValue}]`}constructor(a,b){this.oldValue=a;this.newValue=b}};
iob=class{toString(){return`U(${this.start??"_"},${this.end??"_"})`}constructor(a,b){this.start=a;this.end=b;this.type="update"}};job=class{static create(a,b){const c=Sq.isIdentity(a),d=b.size===0;return c&&d?Twb:new job(c?Twb.axis:a,d?Twb.We:b)}toString(){return`{${this.axis}|${[...this.We].map(([a,b])=>`"${a}":${b}`).join(",")}}`}constructor(a,b){this.axis=a;this.We=b}};Twb=new job(Sq.le().build(),new Map);
__c.Uwb=class{retain(a){this.axis.retain(a);return this}expand(a){this.axis.expand(a);return this}bya(a,b,c){this.We.set(a,new hob(b&&er.from(b),c&&er.from(c)));return this}createRange(a,b){return this.bya(a,void 0,b)}build(){return job.create(this.axis.build(),this.We)}constructor(){this.We=new Map;this.axis=Sq.le()}};__c.Uwb.prototype.SOa=ba(215);ka(!0);Js=__c.Js=__c.fr.map(kob,gob,fob,eob);
__c.Vwb=class extends mr{ee(){return new Swb}le(){return new __c.Uwb}replace(a,b,c){return this.le().bya(a,b,c).build()}update(a,b,c){var d=this.le();d.We.set(a,new iob(b&&gr.from(b),c&&gr.from(c)));return d.build()}Ke(a,b){return job.create(a,b)}isIdentity(a){return Js.isIdentity(a)}compose(a,b){return Js.compose(a,b)}transform(a,b){return Js.transform(a,b)}El(a){return Js.El(a)}identity(a){return Js.identity(a)}apply(a,b){return Js.apply(a,b)}Xl(a,b){return Js.Xl(a,b)}Eh(a){return Js.Eh(a)}Hi(a,
b){return Js.Hi(a,b)}equals(a){return Js.equals(a)}constructor(){super();this.OX=Rwb}};__c.Vwb.prototype.Wg=ba(151);__c.Vwb.prototype.zf=ba(129);__c.Ks=new __c.Vwb;var Wwb,Xwb;
Wwb=class extends pr{static C(a){M(a,{Jyd:jr})}get Jyd(){const a=new Map;this.items.forEach((b,c)=>a.set(b,c));return a}get(a){return hr(this,this.refs.get(a))}forEach(a){for(const [b,c]of this.refs)a(hr(this,c),b)}create(a,b){a=this.domain.replace(a,this.get(a),b);this.xq(a)}update(a,b){const c=l(hr(this,this.refs.get(a)));a=this.domain.update(a,c,b);this.xq(a)}delete(a){const b=hr(this,this.refs.get(a));b!=null&&(a=this.domain.replace(a,b,void 0),this.xq(a))}lX(){const a=this.domain.ee();for(const [b,
c]of this.refs)a.ordinal(b,hr(this,c));return a.build()}destroy(a){ka(this.refs.size===a.size);for(const [b,c]of this.refs)ka(a.has(b)),ka(hr(this,c)===a.get(b))}ki(a){const b=this.domain.le();for(const [c,d]of this.refs){const e=hr(this,d),f=a.get(c);cr(b,c,e,f)}for(const [c,d]of a)this.refs.has(c)||cr(b,c,void 0,d);this.xq(b.build());return!0}T3(a){if(!this.domain.isIdentity(a)){var b=a.axis;if(!b.isEmpty()){var c=0;this.items.length<b.pre&&(this.items.length=b.pre);b=b.zd();for(var d=b.head;d;)d.type===
0?c+=b.GA(d.length):(d=Oq(b,d.length),this.items.spliceWithArray(c,0,Array(d)),c+=d),d=b.head}for(const [e,f]of a.Kk)switch(f.type){case 0:f.oldValue!=null?(a=l(this.refs.get(e)),c=lob(this,f.oldValue),ia(a===c)):ia(!this.refs.has(e));f.newValue!=null?this.refs.set(e,lob(this,f.newValue)):this.refs.delete(e);break;case 1:a=l(this.refs.get(e));c=lob(this,f.oldValue);ia(a===c);this.refs.set(e,lob(this,f.newValue));break;default:throw new r(f);}}}constructor(a,b){super(a);this.domain=(Wwb.C(this),__c.fr);
this.items=kr.array([],{deep:!1});this.refs=kr.map(new Map,{deep:!1});for(const [c,d]of b)this.refs.set(c,lob(this,d))}};Xwb=class extends vr{bx(a,b){return new Wwb(a,b)}Um(a){return a}connect(a,b){return this.Um(a).connect(b)}snapshot(a){return this.Um(a).snapshot()}destroy(a,b){return this.Um(a).destroy(b)}ki(a,b){return this.Um(a).ki(b)}aw(a,b){return new Xwb(a,b)}constructor(...a){super(...a);this.domain=__c.fr}};__c.Ls=new Xwb($p,Lp);var Ywb,Zwb,$wb;
Ywb=class{create(a,b){a=dr(a);var c=this.base.get(a.start);const d=this.base.get(a.end);if(c==null&&d==null){c=this.base;b=new Map([[a.start,b.start],[a.end,b.end]]);a=c.domain.le();for(const [e,f]of b)cr(a,e,c.get(e),f);c.xq(a.build())}}get(a){var b=dr(a);a=this.base.get(b.start);b=this.base.get(b.end);if(a!=null&&b!=null)return{start:a,end:Math.max(a,b)}}forEach(a){const b=new Set;this.base.forEach((c,d)=>{c=dob(d);b.has(c)||(b.add(c),d=l(this.get(c)),a(d,c))})}delete(a){var b=dr(a);a=this.base;
var c=new Set([b.start,b.end]);b=a.domain.le();for(const d of c)c=a.get(d),c!=null&&cr(b,d,c);a.xq(b.build())}constructor(a){this.base=a}};Zwb=__c.Ls.map(kob,gob,fob,eob,a=>new Ywb(a),a=>a.base);$wb=class extends ur{bx(a,b){a=__c.Ls.bx(a,eob(b));return new Ywb(a)}connect(a,b){return Zwb.connect(a,b)}snapshot(a){return Zwb.snapshot(a)}destroy(a,b){return Zwb.destroy(a,b)}ki(a,b){return Zwb.ki(a,b)}constructor(){super();this.domain=__c.Ks}};__c.Ms=new $wb;var axb,bxb,cxb,dxb,exb,fxb,gxb,hxb,ixb,jxb,kxb,mxb,nxb,rxb,sxb,txb,uxb,vxb,xxb,yxb,zxb,Axb,Bxb,Cxb,Dxb,Fxb,Gxb,Hxb,Ixb,Jxb,Kxb,Lxb,Mxb,Oxb,Pxb,Rxb,Sxb,Txb,Wxb,Xxb,$xb,byb,cyb,fyb;axb=cq(/^([A-Z]+|[1-9]\d*)$/);bxb=cq(/^([A-Z]+:[A-Z]+|[1-9]\d*:[1-9]\d*)$/);cxb=aq({type:Yp("single-row"),ypa:mq,Wyb:axb});dxb=aq({type:Yp("single-column"),LNa:mq,Wyb:axb});exb=aq({type:Yp("range-row"),oIa:mq,Wyb:bxb});fxb=aq({type:Yp("range-column"),VBa:mq,Wyb:bxb});
gxb=Zp(bq({"single-row":cxb,"single-column":dxb,"range-row":exb,"range-column":fxb},a=>a.type));hxb=aq({type:Yp("canonical"),pjb:mq,hb:gxb});ixb=aq({type:Yp("invalid"),vOc:mq});jxb=oq(aq({type:Yp("formula"),value:bq({canonical:hxb,invalid:ixb},a=>a.type)}));kxb=oq(aq({type:Yp("boolean"),value:xr}));__c.lxb=Xp(a=>Number.isFinite(a)&&(Math.abs(a)>=2.2250738585072014E-308||Object.is(a,0)));mxb=oq(aq({type:Yp("number"),value:__c.lxb}));nxb=oq(aq({type:Yp("plaintext"),value:mq}));
__c.oxb=qq({attributes:{Zp:kq(__c.Zrb)},hb:{fill:__c.vs}});__c.pxb=wq(__c.oxb);__c.qxb=qq({values:{type:Yp("media")},hb:{value:__c.pxb}});rxb=wq(oq(bsb));sxb=qq({values:{type:Yp("mention")},hb:{value:rxb}});txb=aq({embed:csb});uxb=wq(oq(txb));vxb=qq({values:{type:Yp("embed")},hb:{value:uxb}});__c.wxb={formula:jxb,boolean:kxb,number:mxb,plaintext:nxb,media:__c.qxb,mention:sxb,embed:vxb};xxb=Lq(__c.wxb,a=>a.type,a=>a.type);yxb=aq({type:Yp("plain"),format:cwb});zxb=aq({type:Yp("currency"),format:Xvb});
Axb=aq({type:Yp("percentage"),format:awb});Bxb=aq({type:Yp("date"),format:Zvb});Cxb=bq({plain:yxb,currency:zxb,percentage:Axb,date:Bxb},a=>a.type);Dxb=oq(aq({type:Yp("plain_number"),mk:yxb}));__c.Exb=oq(aq({type:Yp("currency"),mk:zxb}));Fxb=oq(aq({type:Yp("percentage"),mk:Axb}));Gxb=oq(aq({type:Yp("date"),mk:Bxb}));Hxb=qq({attributes:{label:ppb},hb:{fill:__c.vs}});Ixb=wq(Hxb);Jxb=qq({values:{type:Yp("select")},attributes:{mk:kq(Cxb)},hb:{options:Ixb}});Kxb=oq(aq({type:Yp("mention")}));Lxb=oq(aq({type:Yp("embed")}));
Mxb=oq(aq({type:Yp("checkbox")}));__c.Nxb=Lq({plain_number:Dxb,currency:__c.Exb,percentage:Fxb,date:Gxb,select:Jxb,mention:Kxb,embed:Lxb,checkbox:Mxb},a=>a.type,a=>a.type);__c.Ns=a=>qq({attributes:{Ek:__c.vpb},hb:{content:jq(fq(a)),Tc:jq(fq(__c.Nxb))}});Oxb=__c.Ns(xxb);
Pxb={static:{fontFamily:ys.fontFamily,fontSize:ys.fontSize,fontWeight:ys.fontWeight,fontStyle:ys.fontStyle,TO:ys.TO,verticalAlign:ys.verticalAlign,color:ys.color,Nl:ys.Nl,dv:ys.dv,link:ys.link,letterSpacing:ys.letterSpacing,lineHeight:ys.lineHeight,direction:ys.direction,Ev:ys.Ev,xJ:ys.xJ},Zd:{},Qk:{}};__c.Qxb=__c.wib(Pxb);
Rxb={hX:Lo("block",oob,"inherit"),gX:Lo("block",oob,"inherit"),jX:Lo("block",oob,"inherit"),iX:Lo("block",oob,"inherit"),T4:Lo("block",nob,"inherit"),S4:Lo("block",nob,"inherit"),V4:Lo("block",nob,"inherit"),U4:Lo("block",nob,"inherit"),TMa:Lo("block",pob,"inherit"),SMa:Lo("block",pob,"inherit"),VMa:Lo("block",pob,"inherit"),UMa:Lo("block",pob,"inherit")};Sxb=["auto",...hwb];
Txb={static:{...Pxb.static,TI:Lo("block",mob,"#ffffff"),...Rxb,textAlign:Mo("block",Sxb),jw:Mo("block",["overflow","wrap","clip"]),Oj:Mo("block",["middle","start","end"])},Zd:{},Qk:{}};__c.Ds=__c.wib(Txb);__c.Uxb=new Awb;__c.Vxb=__c.Uxb.domain.OX();Wxb=qq({values:{id:mq},attributes:{height:tpb,minHeight:__c.spb}});Xxb=qq({values:{id:mq},attributes:{width:tpb}});wq(Wxb);wq(Xxb);__c.Yxb=new tq(Wxb,$p,Mp(Bmb,new Cmb(Pp(amb,Wxb.Pk))));__c.Zxb=new tq(Xxb,$p,Mp(Bmb,new Cmb(Pp(amb,Xxb.Pk))));
$xb=qq({values:{ypa:mq,LNa:mq,tGe:xr}});__c.ayb=nq($xb);byb=qq({values:{type:Yp("replace")},attributes:{yi:iq(lsb),oIa:__c.Fr,VBa:__c.Fr}});cyb=Lq({replace:byb},a=>a.type,a=>a.type);__c.dyb=wq(cyb);__c.eyb=__c.ar(Oxb).domain.OX();fyb=qq({attributes:{Ksa:__c.Fr,fXa:__c.Fr}});__c.gyb=qq({hb:{freeze:fyb}});
}).call(self, self._456c437108d2d2713799e19380be528d);}

}])
//# sourceMappingURL=sourcemaps/89ce2400357d6530.js.map